[{"content":"æˆ‘æœ€åˆçš„ä»»åŠ¡æ˜¯åŸºäºå·²æœ‰çš„æ¨¡æ¿ç»™æˆ‘ä¹‹å‰å‚ä¸çš„è®ºæ–‡åšä¸€ä¸ª project pageï¼Œé€‰ç”¨çš„æ¨¡æ¿æ˜¯ eliahuhorwitz/Academic-project-page-templateã€‚ç„¶è€Œï¼Œè¿™ä¸ªæ¨¡æ¿æ˜¯ä¸€ä¸ª html æ–‡ä»¶ï¼Œåœ¨æ¶‰åŠåˆ°åˆ—è¡¨ï¼ˆä¾‹å¦‚ä½œè€…åˆ—è¡¨ï¼‰æ—¶éœ€è¦æ‰‹åŠ¨å¤åˆ¶ç²˜è´´å¹¶é€ä¸€ä¿®æ”¹å†…å®¹ï¼Œè¿™ä¸ä»…ç¹çï¼Œä¹Ÿä¸ä¾¿äºåç»­çš„ä¿®æ”¹ï¼ˆä¾‹å¦‚æ”¹å±•ç¤ºæ ¼å¼ï¼Œæˆ–æ˜¯è¿ç§»åˆ°åˆ«çš„é¡¹ç›®ï¼‰ã€‚æˆ‘å·æ‡’çš„å¤©æ€§ä¸å…è®¸æˆ‘è¿™æ ·åšï¼ˆå¥½éº»çƒ¦å•ŠğŸ˜«ï¼‰ï¼Œäºæ˜¯æˆ‘èŒç”Ÿäº†ä¸€ä¸ªè‡ªç„¶çš„æƒ³æ³•ï¼šå°† html ä¿®æ”¹ä¸º jinja æ¨¡æ¿ï¼Œä½¿ç”¨ç¨‹åºæ¸²æŸ“æ¨¡æ¿å¾—åˆ°æœ€ç»ˆçš„é™æ€é¡µé¢ã€‚\nç¬¬ä¸€ç‰ˆï¼šåŸºç¡€åŠŸèƒ½ è¿™æ—¶ï¼Œæˆ‘çš„æƒ³æ³•æ¯”è¾ƒç®€å•ï¼šä½¿ç”¨ Python æ ‡å‡†åº“é‡Œçš„ tomllib (python\u0026gt;=3.11) è¯»å– toml æ–‡ä»¶ä½œä¸º contextï¼Œå¹¶ä½¿ç”¨ jinja è¯»å–æ¨¡æ¿è¿›è¡Œæ¸²æŸ“ï¼Œæœ€åå°†æ¸²æŸ“ç»“æœè¾“å‡ºåˆ° html æ–‡ä»¶é‡Œã€‚ä»£ç å®ç°ä¹Ÿéå¸¸ç®€æ´ï¼Œä»…åŒ…å«å‡ è¡Œä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 import tomllib, os from jinja2 import Environment, FileSystemLoader target_folder = \u0026#34;./dist\u0026#34; env = Environment(loader=FileSystemLoader(\u0026#34;./template\u0026#34;), autoescape=False) with open(\u0026#34;./config.toml\u0026#34;, \u0026#39;rb\u0026#39;) as config_file: config = tomllib.load(config_file) page = env.get_template(\u0026#39;index.html\u0026#39;).render(config) with open(os.path.join(target_folder, \u0026#34;index.html\u0026#34;), \u0026#39;w\u0026#39;) as f: f.write(page) ä½œä¸ºè¾“å…¥çš„tomlæ–‡ä»¶ç±»ä¼¼äºè¿™æ ·ï¼š\n1 2 3 4 5 6 7 8 [paper] title = \u0026#34;...\u0026#34; conference = \u0026#34;...\u0026#34; abstract = \u0026#34;...\u0026#34; [[paper.authors]] name = \u0026#34;...\u0026#34; ...... é€šè¿‡ç»“åˆ TOML é…ç½®æ–‡ä»¶ä¸ Jinja æ¨¡æ¿ä¸­çš„å¾ªç¯å’Œåˆ¤æ–­è¯­å¥ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç¼–è¾‘ html çš„å·¥ä½œè½¬æ¢ä¸ºç¼–è¾‘é…ç½®æ–‡ä»¶ã€‚ç›¸è¾ƒäºç›´æ¥ç¼–è¾‘ htmlï¼Œåè€…æ˜¾ç„¶æ›´ä¸ºç®€ä¾¿ã€‚\nç»™ä»¥ä¸Šçš„ä»£ç åŠ ä¸Šä¸€äº›å¤„ç†é™æ€æ–‡ä»¶çš„é€»è¾‘ï¼Œä¾‹å¦‚ï¼š\næ„å»ºå‰æ¸…é™¤ç›®æ ‡æ–‡ä»¶å¤¹ æ„å»ºæ—¶ä»æŒ‡å®šæ–‡ä»¶å¤¹å¤åˆ¶æ–‡ä»¶åˆ°ç›®æ ‡æ–‡ä»¶å¤¹ é‚£æ€ä¹ˆé¢„è§ˆæ„å»ºç»“æœå‘¢ï¼Ÿæˆ‘å½“æ—¶çš„åšæ³•æ˜¯åœ¨ ./dist ä¸­ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤å¯åŠ¨ä¸€ä¸ª Python çš„ç®€æ˜“æ–‡ä»¶æœåŠ¡å™¨ï¼š\n1 $ python3 -m http.server ç„¶åï¼Œå†ç¼–å†™ä¸€ç‚¹ bash è„šæœ¬å®ç°ä¸€é”®éƒ¨ç½²åˆ° GitHub Pagesï¼Œå³å¯å½¢æˆä¸€ä¸ªç®€æ˜“çš„å•é¡µé¢é™æ€ç½‘ç«™ç”Ÿæˆå™¨ï¼Œè¿™ä¾¿æ˜¯ç¬¬ä¸€ç‰ˆã€‚\nç¬¬äºŒç‰ˆï¼šç›‘æµ‹æ–‡ä»¶æ›´æ”¹å¹¶è‡ªåŠ¨æ„å»º åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘å¾ˆå¿«å‘ç°ç¬¬ä¸€ç‰ˆå­˜åœ¨ä¸€ä¸ªæ˜¾è‘—é—®é¢˜ï¼šæ¯æ¬¡ä¿®æ”¹æ¨¡æ¿æˆ–é…ç½®åï¼Œéƒ½éœ€è¦æ‰‹åŠ¨æ‰§è¡Œæ„å»ºå‘½ä»¤å¹¶åˆ·æ–°é¡µé¢ã€‚ æˆ‘é’ˆå¯¹å‰è€…çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ watch æŒ‡ä»¤æ¯éš”ä¸€ç§’æ‰§è¡Œä¸€æ¬¡æ„å»ºè„šæœ¬ï¼Œä¾‹å¦‚ï¼š\n1 $ watch -d -n1 python3 build.py ä½†æ˜¯ï¼Œæˆ‘è®¤ä¸ºè¿™æ ·çš„è§£å†³æ–¹æ³•ä¸æ˜¯å¾ˆä¼˜é›…ï¼Œäºæ˜¯å°±æƒ³ç€ï¼Œèƒ½ä¸èƒ½ç”±æ„å»ºè„šæœ¬æŒç»­ç›‘æµ‹æ–‡ä»¶æ›´æ”¹ï¼Œå¹¶åœ¨æœ‰éœ€è¦çš„æ—¶å€™è‡ªåŠ¨æ„å»ºå‘¢ï¼Ÿç­”æ¡ˆå½“ç„¶æ˜¯å¯ä»¥çš„ã€‚äº’è”ç½‘å¯¹æ­¤ç»™å‡ºäº†å››ç§æ–¹æ¡ˆï¼š\nä½¿ç”¨ watchdog åº“ ä½¿ç”¨ inotify åº“ ï¼ˆä»…é™ Linuxï¼‰ è®¡ç®—æ–‡ä»¶æ•£åˆ—å€¼ï¼Œåˆ¤æ–­æ˜¯å¦ä¿®æ”¹ ä½¿ç”¨ os åº“è·å–æ–‡ä»¶ä¿®æ”¹æ—¶é—´ï¼Œåˆ¤æ–­æ˜¯å¦ä¿®æ”¹ å‰ä¸¤ç§æ–¹æ³•æœ€ä¸ºä¾¿æ·ï¼Œå¯ä»¥ç›´æ¥åˆ©ç”¨å·²æœ‰çš„åº“ï¼›ç¬¬ä¸‰ç§æ–¹æ³•é€šè¿‡è®¡ç®—æ–‡ä»¶æ•£åˆ—å€¼æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦ä¿®æ”¹ï¼Œè™½ç„¶ï¼Œèƒ½å‡†ç¡®è·çŸ¥æ–‡ä»¶å†…å®¹æ˜¯å¦å˜åŒ–ï¼ˆå…¶ä½™ä¸‰ç§åªæ˜¯ç›‘æµ‹æ›´æ”¹æ–‡ä»¶çš„æ“ä½œï¼‰ï¼Œä½†æ˜¯ï¼Œèµ„æºæ¶ˆè€—è¾ƒå¤§ï¼›ç¬¬å››ç§æ–¹æ³•é€šè¿‡è·å–æ–‡ä»¶ä¿®æ”¹æ—¶é—´æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦ä¿®æ”¹ï¼Œæ˜“äºç†è§£ä¸”å®ç°ç®€å•ã€‚æœ€ç»ˆï¼Œæˆ‘é€‰æ‹©äº†ç¬¬å››ç§æ–¹æ³•ï¼š\né¦–å…ˆï¼Œå®šä¹‰ all_filepaths å‡½æ•°ï¼ˆgeneratorï¼‰è·å–ç»™å®šæ‰€æœ‰ç›®å½•ä¸‹çš„æ‰€æœ‰è·¯å¾„ï¼Œè¿™é‡Œéœ€è¦è¿”å›æ–‡ä»¶å¤¹æ˜¯å› ä¸ºæ–‡ä»¶å¤¹çš„æœ€åä¿®æ”¹æ—¶é—´å¯ä»¥åæ˜ è¯¥æ–‡ä»¶å¤¹å†…æ˜¯å¦æœ‰æ–‡ä»¶è¢«ç§»åŠ¨æˆ–åˆ é™¤ã€‚\n1 2 3 4 5 6 7 8 9 10 def all_filepaths(*paths): # è·å–æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰è·¯å¾„ï¼ŒåŒ…æ‹¬æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ for path in paths: if not os.path.exists(path): # å¦‚æœè·¯å¾„ä¸å­˜åœ¨ï¼Œè·³è¿‡ pass elif os.path.isfile(path): # å¦‚æœæ˜¯æ–‡ä»¶ï¼Œç›´æ¥è¿”å›æ–‡ä»¶è·¯å¾„ yield path else: # å¦‚æœæ˜¯æ–‡ä»¶å¤¹ï¼Œéå†æ–‡ä»¶å¤¹å†…çš„æ‰€æœ‰æ–‡ä»¶å’Œå­æ–‡ä»¶å¤¹ for root, _, files in os.walk(path): yield root yield from (os.path.join(root, file) for file in files) æ¥ä¸‹æ¥ï¼Œå®šä¹‰ä¸€ä¸ªå‡½æ•° build_on_changeï¼Œå¾ªç¯è·å–æ–‡ä»¶çš„æœ€åæ›´æ”¹æ—¶é—´ï¼Œå¹¶åˆ¤æ–­æ–‡ä»¶æ˜¯å¦è¢«æ›´æ”¹ã€‚å¦‚æœæ£€æµ‹åˆ°æ–‡ä»¶åœ¨ä¸Šæ¬¡æ„å»ºä¹‹åæœ‰æ›´æ”¹ï¼Œåˆ™æ‰§è¡Œ build å‡½æ•°é‡æ–°æ„å»ºé¡µé¢ã€‚æ­¤å¤„å°† last_update åˆå€¼è®¾ä¸ºé›¶,å¯ä»¥ç¡®ä¿ç¨‹åºå¯åŠ¨åä¼šç«‹åˆ»è§¦å‘ä¸€æ¬¡æ„å»ºã€‚\n1 2 3 4 5 6 7 8 9 10 def build_on_change(*paths, **build_kwargs): # ç›‘å¬æ–‡ä»¶æ›´æ”¹å¹¶è‡ªåŠ¨æ„å»ºé¡µé¢ last_update = 0.0 # åˆå§‹åŒ–æœ€åæ›´æ–°æ—¶é—´ä¸º0ï¼Œç¡®ä¿ç¨‹åºå¯åŠ¨åç«‹å³è§¦å‘ä¸€æ¬¡æ„å»º while True: for filepath in all_filepaths(*paths): last_modified_at = os.stat(filepath).st_mtime if last_modified_at \u0026gt;= last_update: build(**build_kwargs) last_update = time.time() break time.sleep(1) # æ¯éš”1ç§’æ£€æŸ¥ä¸€æ¬¡æ–‡ä»¶æ›´æ”¹ é€šè¿‡ä»¥ä¸Šä»£ç ï¼Œä»…éœ€ 20 è¡Œå³å¯å®ç° Python åŸç”Ÿçš„è‡ªåŠ¨ç›‘æµ‹æ–‡ä»¶æ›´æ”¹çš„åŠŸèƒ½ï¼ˆå½“ç„¶ï¼Œè°ƒåº“æ›´å¿«ï¼Œä½†æ˜¯éœ€è¦å®‰è£…ä¾èµ–ï¼‰ã€‚ æœ€åï¼Œåªéœ€å†ç¼–å†™å°‘é‡ä»£ç ï¼Œåˆ©ç”¨ sys.argv è·å–å‘½ä»¤è¡Œå‚æ•°ï¼Œå¹¶åœ¨ç¨‹åºå…¥å£å¤„åŒºåˆ†å•æ¬¡æ„å»ºå’Œè‡ªåŠ¨æ›´æ–°ï¼ˆé¢„è§ˆï¼‰ä¸¤ç§æ¨¡å¼ï¼Œè¿™ä¾¿æ˜¯ç¬¬äºŒç‰ˆã€‚\nç¬¬ä¸‰ç‰ˆï¼šé›†æˆé™æ€æ–‡ä»¶æœåŠ¡å™¨+è‡ªåŠ¨åˆ·æ–°é¡µé¢ å°½ç®¡ç¬¬äºŒç‰ˆè§£å†³äº†â€œæ‰‹åŠ¨æ‰§è¡Œæ„å»ºå‘½ä»¤å¹¶åˆ·æ–°é¡µé¢â€çš„éƒ¨åˆ†é—®é¢˜ï¼Œä½†ä¿å­˜åä»éœ€æ‰‹åŠ¨åˆ·æ–°é¡µé¢ï¼Œè¿™ä¸€ç—›ç‚¹ä¾ç„¶å­˜åœ¨ã€‚ç¬¬ä¸‰ç‰ˆçš„ç›®æ ‡ä¾¿æ˜¯å½»åº•è§£å†³è¿™ä¸€é—®é¢˜ã€‚\nå…ˆæŠŠæ¯æ¬¡éœ€è¦æ‰‹åŠ¨å¯åŠ¨çš„ http.server é›†æˆåˆ°è„šæœ¬é‡Œæ¥ï¼šç›´æ¥ä¿®æ”¹http.server å®˜æ–¹æ–‡æ¡£é‡Œçš„ç¤ºä¾‹ä»£ç ï¼Œç„¶ååŠ ä¸Š Threading æ ‡å‡†åº“ä½¿å…¶ä»¥å®ˆæŠ¤çº¿ç¨‹çš„æ–¹å¼è¿è¡Œï¼ˆä¸»ç¨‹åºé€€å‡ºæ—¶è‡ªåŠ¨ç»“æŸï¼Œæ— éœ€æ‰‹åŠ¨ç»ˆæ­¢ï¼‰ã€‚è¿™ä»…éœ€ 10 è¡Œä»£ç ï¼ˆä¸åŒ…æ‹¬ç©ºè¡Œï¼‰ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 def start_server_daemon(ip=\u0026#34;127.0.0.1\u0026#34;, port=8123, directory=\u0026#34;./dist\u0026#34;): from threading import Thread import http.server, socketserver def start_server(): # åˆ›å»ºä¸€ä¸ªç®€å•çš„HTTPæœåŠ¡å™¨ï¼Œç»‘å®šåˆ°æŒ‡å®šçš„IPå’Œç«¯å£ with socketserver.TCPServer((ip, port), http.server.SimpleHTTPRequestHandler) as httpd: print(f\u0026#34;Serving live preview at http://{ip}:{port}/\u0026#34;) httpd.serve_forever() # å¯åŠ¨æœåŠ¡å™¨å¹¶ä¿æŒè¿è¡Œ # åˆ›å»ºä¸€ä¸ªå®ˆæŠ¤çº¿ç¨‹ï¼Œå½“ä¸»çº¿ç¨‹é€€å‡ºæ—¶ï¼Œå®ˆæŠ¤çº¿ç¨‹ä¹Ÿä¼šè‡ªåŠ¨é€€å‡º t = Thread(target=start_server, daemon=True) t.start() ä¸è¿‡è¿™æ ·çš„å®ç°æœ‰ä¸€ä¸ªé—®é¢˜ï¼šåœ¨ä¸»ç¨‹åºç»ˆæ­¢å¯¼è‡´å®ˆæŠ¤çº¿ç¨‹é€€å‡ºåï¼Œå ç”¨çš„ç«¯å£å¹¶ä¸ä¼šæ­£å¸¸é‡Šæ”¾ã€‚æŒ‰ç†æ¥è¯´ç¬¬å…­è¡Œçš„ with è¯­å¥ä¼šåœ¨é€€å‡ºæ—¶è‡ªåŠ¨å¤„ç†ç«¯å£çš„é‡Šæ”¾ï¼Œå¯èƒ½åœ¨å®ˆæŠ¤çº¿ç¨‹æ¨¡å¼ä¸‹å°±ä¸è¡Œäº†ï¼Ÿ\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¢è®¨å¦‚ä½•å®ç°é¡µé¢çš„è‡ªåŠ¨åˆ·æ–°åŠŸèƒ½ã€‚æ¢è¨€ä¹‹ï¼ŒæœåŠ¡å™¨å¦‚ä½•é€šçŸ¥æµè§ˆå™¨å†…å®¹å·²æ›´æ–°å‘¢ï¼Ÿ http.server çš„å®˜æ–¹æ–‡æ¡£å†…åŒæ ·æä¾›äº†ç­”æ¡ˆï¼šåœ¨å…¶æä¾›æ–‡ä»¶æ—¶ï¼Œä¼šåœ¨ response header ä¸­åŠ å…¥Last-Modified headerï¼Œè¿™ä¸ªheaderçš„æ—¶é—´æˆ³æ¥æºäºæ–‡ä»¶ç³»ç»Ÿè®°å½•çš„æœ€åæ›´æ”¹æ—¶é—´ã€‚ç”±äºæˆ‘çš„ç¨‹åºåªä¼šå…¨é‡æ„å»ºï¼Œæ‰€ä»¥ dist ç›®å½•å†…çš„æ‰€æœ‰æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´å¿…å®šä¸æœ€åä¸€æ¬¡æ„å»ºçš„æ—¶é—´ç›¸åŒã€‚\nåŸºäºæ­¤ï¼Œæˆ‘ä»¬åªéœ€åœ¨æµè§ˆå™¨ä¸­ç”¨ JavaScript è½®è¯¢æœåŠ¡å™¨ä¸Šçš„æŸä¸ªæ–‡ä»¶ï¼ˆæˆ‘è¿™é‡Œæ˜¯åœ¨è‡ªåŠ¨æ›´æ–°æ¨¡å¼ä¸‹é¢å¤–åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ï¼‰ï¼Œè·å–å…¶ header å†…çš„ Last-Modifiedï¼Œåˆ¤æ–­é¡µé¢æ˜¯å¦æ›´æ–°ï¼Œå¦‚æœæ›´æ–°äº†å°±è°ƒç”¨ window.location.reload() åˆ·æ–°é¡µé¢å³å¯ã€‚\nPython éƒ¨åˆ†åªéœ€è¦åˆ›å»ºä¸Šè¿°çš„ç©ºæ–‡ä»¶ï¼Œä»¥åŠåœ¨æ¨¡æ¿çš„ context ä¸­åŠ å…¥æ˜¯å¦å¯ç”¨è‡ªåŠ¨åˆ·æ–°çš„å‚æ•°å³å¯ã€‚æ¨¡æ¿å†…éœ€è¦åŠ å…¥å¦‚ä¸‹ javascript ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 (function(){ // é˜²æ­¢å‘½åå†²çª let last_updated = new Date(); // åˆå§‹åŒ–ä¸ºå½“å‰æ—¶é—´ const dummy_file_path = \u0026#34;/{{preview_mode.dummy_file_path}}\u0026#34;; // æ¨¡æ¿æ¸²æŸ“æ—¶å¡«å……ç©ºæ–‡ä»¶åç§° const refresh_on_change = () =\u0026gt; { // å®šä¹‰å‡½æ•° fetch(dummy_file_path).then(res =\u0026gt; { const last_modified = new Date(res.headers.get(\u0026#34;Last-Modified\u0026#34;)); if(last_updated \u0026lt; last_modified){ window.location.reload(); // åˆ·æ–°é¡µé¢ } }) } setInterval(refresh_on_change, 1000); // æ¯ä¸€ç§’æ£€æŸ¥ä¸€æ¬¡æ˜¯å¦æ›´æ–° })(); å½“ç„¶ï¼Œè¿™æ®µ JavaScript ä»£ç éœ€è¦æ”¾åœ¨ \u0026lt;script\u0026gt; æ ‡ç­¾å†…ï¼ŒåŒæ—¶åœ¨æ¨¡æ¿ä¸­ç¡®ä¿åªæœ‰è‡ªåŠ¨æ›´æ–°å¯ç”¨æ—¶æ‰ä¼šæ¸²æŸ“è¿™ä¸ªæ ‡ç­¾ã€‚è¿™ä¾¿æ˜¯ç¬¬ä¸‰ç‰ˆã€‚\nç¬¬å››ç‰ˆï¼šæœ€å°åŒ–ç”Ÿæˆçš„æ–‡ä»¶ é€šè¿‡æ¨¡æ¿å¼•æ“æ¸²æŸ“ç”Ÿæˆçš„ html æ–‡ä»¶ï¼Œå¸¸å¸¸ä¼šåŒ…å«å¤§é‡çš„ç©ºç™½å­—ç¬¦ã€å¼•å·å’Œæ³¨é‡Šç­‰å†—ä½™å…ƒç´ ã€‚è¿™äº›å…ƒç´ è™½ç„¶åœ¨å¼€å‘é˜¶æ®µæœ‰åŠ©äºæå‡ä»£ç çš„å¯è¯»æ€§ä¸ç»´æŠ¤æ€§ï¼Œä½†åœ¨å®é™…ç½‘é¡µåŠ è½½è¿‡ç¨‹ä¸­ï¼Œå®ƒä»¬å´æ˜¾è‘—å¢åŠ äº†æ–‡ä»¶çš„ä½“ç§¯ï¼Œè¿›è€Œæ‹–æ…¢äº†ç½‘é¡µçš„åŠ è½½é€Ÿåº¦ã€‚ä¸ºäº†ä¼˜åŒ–é¡µé¢åŠ è½½æ€§èƒ½ï¼Œæˆ‘ä»¬æœ‰å¿…è¦åœ¨æ„å»ºå®Œæˆåï¼Œå¯¹è¿™äº›å†—ä½™å­—ç¬¦è¿›è¡Œç²¾ç®€å¤„ç†ï¼Œä»¥ç¼©å‡æ–‡ä»¶å¤§å°ã€‚\nè¿™ä¸€ä¼˜åŒ–ç­–ç•¥åŒæ ·é€‚ç”¨äº css æ–‡ä»¶ï¼Œä¸åŒçš„æ˜¯ï¼Œcss æ–‡ä»¶ä¸­çš„å†—ä½™å­—ç¬¦å¾€å¾€éµå¾ªç‰¹å®šçš„æ¨¡å¼ï¼Œå¯ä»¥ç›´æ¥è¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…ä¸å»é™¤ï¼Œæˆ‘çš„ä»£ç å¦‚ä¸‹ï¼ˆè¿™æ®µä»£ç å¹¶ä¸å…¨é¢ï¼Œä½†æ˜¯å®ƒå·²ç»èƒ½æ˜¾è‘—ç¼©å°æ–‡ä»¶çš„ä½“ç§¯ï¼Œäºæˆ‘è€Œè¨€ï¼Œè¿™æ ·å°±å¤Ÿäº†ï¼‰ï¼š\n1 2 3 4 5 6 7 8 import re def minify_css(filepath): content = open(filepath,\u0026#39;r\u0026#39;).read() minimized = re.sub(r\u0026#39; *\\n *|/\\*.*?\\*/\u0026#39;, \u0026#39;\u0026#39;, content) minimized = re.sub(r\u0026#39;; *(?=})|(?\u0026lt;=:) +| +(?={)\u0026#39;, \u0026#39;\u0026#39;, minimized) with open(filepath, \u0026#39;w\u0026#39;) as f: f.write(minimized) print(f\u0026#39;{filepath}: reduced from {len(content)} Bytes to {len(minimized)} Bytes\u0026#39;) è€Œ html çš„è§„åˆ™å¤æ‚ï¼Œæœ‰çš„ç©ºæ ¼å’Œæ¢è¡Œç¬¦çš„ç§»é™¤ä¼šå½±å“é¡µé¢çš„å‘ˆç°æ•ˆæœï¼ˆä¾‹å¦‚ \u0026lt;pre\u0026gt; æ ‡ç­¾çš„å†…å®¹ï¼‰ã€‚å› æ­¤ï¼Œåœ¨å¤„ç† html æ–‡ä»¶æ—¶ï¼Œç›¸æ¯”äºè‡ªå·±å®ç°ï¼Œæˆ‘å†³å®šä½¿ç”¨ htmlmin åº“çš„å®ç°ã€‚ä»£ç å¦‚ä¸‹ï¼Œæ³¨æ„å…¶ä¸­çš„ remove_all_empty_space=True ä¹Ÿä¼šåœ¨ä¸€å®šæƒ…å†µä¸‹å½±å“é¡µé¢çš„å‘ˆç°ï¼Œä¾‹å¦‚ï¼Œä¸¤ä¸ª \u0026lt;span\u0026gt; æ ‡ç­¾ä¹‹é—´çš„ç©ºæ ¼ä¹Ÿä¼šè¢«ç§»é™¤ï¼Œå¯¹äºè¿™ç§æƒ…å†µéœ€è¦å»æ‰è¿™ä¸ªå‚æ•°ï¼Œæˆ–æ˜¯åœ¨ css æˆ– style å±æ€§ä¸­åŠ å…¥ margin-right åˆ›é€ ç©ºéš™ã€‚\n1 2 3 4 5 6 7 from htmlmin.main import minify def minify_html(filepath): content = open(filepath,\u0026#39;r\u0026#39;).read() minimized = minify(content, remove_comments=True, remove_all_empty_space=True) with open(filepath, \u0026#39;w\u0026#39;) as f: f.write(minimized) print(f\u0026#39;{filepath}: reduced from {len(content)} Bytes to {len(minimized)} Bytes\u0026#39;) è‡³äº JavaScript æ–‡ä»¶ï¼Œç”±äºåœ¨è¿™ä¸ªé¡¹ç›®ä¸­æˆ‘è‡ªå·±å†™çš„ js ä»£ç å¾ˆå°‘ï¼Œä¸”éƒ½å·²ç»åµŒå…¥ html æ–‡ä»¶ï¼Œè€Œå¤–éƒ¨åº“éƒ½æ˜¯é€šè¿‡ CDN å¼•å…¥çš„ï¼ŒåŠ è½½çš„å¤§å¤šæ˜¯ä¼˜åŒ–è¿‡çš„æ–‡ä»¶ï¼Œå› æ­¤æˆ‘å¹¶æ²¡æœ‰è€ƒè™‘å¯¹ js æ–‡ä»¶åšæœ€å°åŒ–ã€‚\næœ€åï¼Œåœ¨æ„å»ºååˆ©ç”¨ä¹‹å‰å†™çš„ all_filepaths å‡½æ•°éå† dist æ–‡ä»¶å¤¹å†…çš„æ‰€æœ‰æ–‡ä»¶ï¼Œæ ¹æ®æ‰©å±•ååˆ¤æ–­å¯¹åº”çš„æœ€å°åŒ–æ–¹æ³•ï¼Œç„¶åè°ƒç”¨ç›¸åº”çš„å‡½æ•°æœ€å°åŒ–å³å¯ã€‚å› ä¸ºè¿™é‡Œçš„æœ€å°åŒ–æ˜¯ä¸ºäº†éƒ¨ç½²æœåŠ¡çš„ï¼Œæ‰€ä»¥åœ¨é¢„è§ˆæ¨¡å¼ä¸‹ä¸ä¼šæ‰§è¡Œè¿™æ®µä»£ç ã€‚\n1 2 3 4 5 6 7 8 for path in all_filepaths(target_folder): if not os.path.isfile(path): continue extension = os.path.basename(path).rsplit(\u0026#34;.\u0026#34;,1)[-1].lower() # è·å–æ–‡ä»¶æ‰©å±•å if extension == \u0026#34;css\u0026#34;: minify_css(path) elif extension in {\u0026#39;html\u0026#39;, \u0026#39;svg\u0026#39;, \u0026#39;xml\u0026#39;}: minify_html(path) ç»¼åˆä¸Šè¿°æ‰€æœ‰åŠŸèƒ½ï¼Œä¾¿å¾—åˆ°äº†ç¬¬å››ç‰ˆï¼Œä¹Ÿæ˜¯ç›®å‰çš„æœ€ç»ˆç‰ˆã€‚\næ€»ç»“ å›é¡¾è¿™ä¸ªæµç¨‹ï¼Œæœ€åˆæˆ‘åªæ˜¯æƒ³å·ä¸ªæ‡’ï¼Œæ²¡æƒ³åˆ°æœ€ç»ˆä»˜å‡ºçš„æ—¶é—´æ¯”åŸæœ¬ä¸å·æ‡’è¿˜è¦å¤šã€‚ç„¶è€Œï¼Œè€ƒè™‘åˆ°åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘çš„æ”¶è·ï¼Œæˆ‘è§‰å¾—è¿™ä¸ªæ—¶é—´èŠ±çš„è¿˜æ˜¯å¾ˆå€¼å¾—çš„ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä¹‹å‰åœ¨ç”¨ç°æˆçš„ live server æ—¶ï¼Œä»æœªæƒ³è¿‡è¿™ä¸ªåŠŸèƒ½çš„å®ç°å¯ä»¥å¦‚æ­¤ç®€å•ï¼ˆå½“ç„¶æˆ‘çš„å®ç°ä¹Ÿæ¯”è¾ƒç³™å°±æ˜¯äº†ï¼‰ã€‚åŒæ—¶ï¼Œè¿™æ¬¡çš„ç»éªŒã€ç¼–å†™çš„è„šæœ¬å’Œæ¨¡æ¿ï¼Œåˆ°ä»¥ååšå•é¡µé¢é™æ€ç½‘ç«™æˆ–è€…æ–°çš„è®ºæ–‡çš„ project page æ—¶ä¹Ÿéƒ½å¯ä»¥æ´¾ä¸Šç”¨åœºã€‚\nå½“ç„¶ï¼Œæˆ‘ä¹ŸçŸ¥é“å¸‚é¢ä¸Šæœ‰å¾ˆå¤šç°æˆçš„é™æ€ç½‘ç«™ç”Ÿæˆå·¥å…·ï¼Œä¾‹å¦‚åŸºäº Python çš„ Pelicanï¼ŒåŸºäº Ruby çš„ Jekyll å’Œæˆ‘æ„å»ºè¿™ä¸ªåšå®¢æ‰€ä½¿ç”¨çš„åŸºäº Golang çš„ hugoï¼Œé—®é¢˜æ˜¯å®ƒä»¬éƒ½æ˜¯é’ˆå¯¹å¤šé¡µé¢çš„å†…å®¹å‘ç½‘ç«™ï¼Œå®ƒä»¬çš„é¡¹ç›®ç»“æ„ä¹Ÿæ¯”è¾ƒå¤æ‚ï¼Œå¯¹äºæˆ‘çš„å•é¡µé¢ã€ä»…æœ‰ä¸¤å¼ å›¾ç‰‡çš„ project page è€Œè¨€ï¼Œç¡®å®æ˜¾å¾—æœ‰äº›å¤§æå°ç”¨ã€‚å› æ­¤ï¼Œæˆ‘é€‰æ‹©è‡ªå·±åŠ¨æ‰‹é€ è½®å­ï¼Œè¿‡ç¨‹è™½ç„¶æ›²æŠ˜ï¼Œä½†æ”¶è·é¢‡ä¸°ã€‚\n","date":"2024-10-20T17:05:46+08:00","image":"https://files.furffisite.link/blogimg/20241020234336-67f7ee39e8f8df0b.jpg","permalink":"https://blog.furffisite.link/p/liveserver/","title":"ç”¨ Python å†™ä¸€ä¸ªç®€å•çš„å•é¡µé¢é™æ€ç½‘ç«™ç”Ÿæˆå™¨"},{"content":"This blog post is completely written in English, just for practicing my English writing skills. Please let me know if there is any suggestions.\nBasic Information Titleï¼š An End-to-End Submodular Framework for Data-Efficient In-Context Learning [1] Authorsï¼š Lilly Kumari, Shengjie Wang, Arnav Das, Tianyi Zhou, Jeff Bilmes Conferenceï¼š NAACL 2024 Open Accessï¼š https://aclanthology.org/2024.findings-naacl.209 The Problem to Solve The problem of annotating, selecting and ordering in-context exemplars for Large Language Models (LLMs).\nThe In-Context Learning (ICL) performance of LLMs is largely affected by the selection and ordering of in-context exemplars, which makes it necessary to develop a methodology to select the in-context exemplars according to the query.\nThe Proposed Algorithm In reality, the most of the data we have are unannotated data, i.e. queries without answers, some recent methods [2] suggest to select and annotate a subset from an unannotated huge dataset $\\mathcal X_\\mathrm{unlabeled}$ to form a small annotated dataset $\\mathcal X_\\mathrm{labeled}$, and to choose the in-context exemplars from this subset during evaluation. This passage followed this paradigm, and proposed Div-S3, a two-stage data-efficient learning-free framework for exemplar selection.\nThe first stage (Div): Exemplar Annotation, from $\\mathcal X_\\mathrm{unlabeled}$ to $\\mathcal X_\\mathrm{labeled}$. The second stage (S3): Exemplar Retrieval, from $\\mathcal X_\\mathrm{labeled}$ and query set $Q$ to get in-context exemplars $\\mathcal D_\\mathrm{context}$. Exemplar Annotation Problem Definition. The first stage of Div-S3, as mentioned above, selects from unannotated data $\\mathcal X_\\mathrm{unlabeled}$ and let homo sapiens do the annotations to make an informative and diverse subset $\\mathcal X_\\mathrm{labeled}$, with the constraint of $|\\mathcal X_\\mathrm{labeled}| \\ll |\\mathcal X_\\mathrm{unlabeled}|$. This is a process similar to one iteration of pool-based active learning. With the objective of diversity and reducing redundancy, this can also be formulated as a set optimization problem [3] as follows: $$\\max_{A\\subset \\mathcal X_\\mathrm{unlabeled},|A|\\le k} f(A),$$ where $k$ is a hyperparameter representing the annotation budget, $f:~2^{\\mathcal X_\\mathrm{unlabeled}}\\rightarrow\\mathbb R$ is a submodular function mapping all subsets of $\\mathcal X_\\mathrm{unlabeled}$ to the respective score of each subset. The higher the score, the better the subset is.\nThe submodular function must satisfy the properties of monotone and decreasing marginal profit, i.e., respectively, $$\\begin{aligned}\\forall A\\subseteq T, \\quad\u0026amp;f(A) \\le f(T), \\\\ \\forall A\\subset T,~ \\forall x\\not\\in T, \\quad\u0026amp;f(\\{x\\}|A) \\ge f(\\{x\\}|T), \\end{aligned}$$ where $f(\\{x\\}|T) = f(\\{x\\}\\cup T) - f(T)$ is the marginal profit of adding $\\{x\\}$ to $T$.\nThe authors set the submodular function to be facility location, which is defined as $$f(A) = \\sum_{s_i\\in\\mathcal X_\\mathrm{unlabeled}}\\max_{s_j\\in A}\\mathrm{sim}(s_i,s_j),$$ where $\\mathrm{sim}(\\cdot,\\cdot)$ denotes the cosine similarity of two queries\u0026rsquo; embeddings, generated by sentence-BERT [4].\nIntuitive Interpretation. This problem can be intuitively and geometrically interpreted as minimizing the sum of all distances between each node and its nearest selected nodes, which is a k-medoids problem and is pretty similar to k-means clustering.\nSolution. The authors of this paper use a greedy algorithm proposed by Nemhauser et al. [5], called Greedy Submodular Maximization (GSM). Its fundamental idea is to greedily select the item with the maximum marginal profit for $k$ iterations, i.e. $$A\\leftarrow A\\cup \\{\\argmax_{v\\in V, v\\not\\in A} f(A\\cup \\{v\\}) - f(A) \\}.$$ Considering the time spent in calculating $f$, this is an algorithm with the time complexity of $O((nk)^2)$. The paper says it\u0026rsquo;s $O(n^2+nk)$ but I beg to differ as it seems to have ignored the time complexity of calculating $f$, which is $\\Theta(nm)$ with pre-calculated similarity matrix, where $m=0,1,\\ldots,k-1$ in the iterations. But I agree with the authors that the algorithm can be accelerated by techniques like caching and priority queues, etc.\nExemplar Retrieval Exemplar retrieval is intended to find the best in-context exemplars $\\mathcal D_\\mathrm{context}$ for the given query set $Q$ from $\\mathcal X_\\mathrm{labeled}$. Previous similarity-based methods usually yield in-context exemplars with redundant information. To reduce such redundancy, the authors formalize exemplar retrieval as a conditional submodular subset selection problem. The purpose of this stage is to \u0026ldquo;obtain a set of exemplars that are not only relevant to the test query but also encompass diverse aspects crucial for aiding the LLM in the target task\u0026rdquo; [1]. They come up with a two-phase method called Submodular Span Summarization (S3), which was published prior to this paper [6].\nPhase 1 of S3 Problem Definition. This phase targets to select a relatively large subset relevant to the query set $Q$, but might be redundant. The original problem might be difficult to solve, so the paper considered solving the dual problem of it: $$\\min_{A\\subseteq V - Q,|A|\\ge k_1}f(A|Q),$$ which is a cardinality-constrained submodular minimization problem. The authors use $m_Q(A) = \\sum_{a\\in A}f(a|Q)$ to approximate $f(A|Q)$, which is an upper bound of $f(A|Q)$.\nSolution. Although the paper doesn\u0026rsquo;t state it clearly, I think the algorithm to solve this problem, given the approximation, is to select $k_1$ exemplars with minimal values of $f(a|Q)$ from $A$. And this algorithm matches the time complexity $O(k+k\\log k_1)$ stated in Appendix B, if ignoring the time for calculating $f$.\nPhase 2 of S3 This stage is intended to select the most representative exemplars from the result of phase 1, and is mathematically the same as Exemplar Annotation: $$\\max_{A\\subset A_Q,|A|\\le k_2} f(A),$$ where $A_Q$ is the set of selected exemplars from phase 1. Optionally, we can apply a knapsack constraint on the problem, and solve it with a modified version of GSM.\nComments The authors proposed a learning-free framework named Div-S3 to select in-context exemplars from unlabeled datasets, and evaluated its effectiveness with ablation experiments across 7 Natural Language Processing (NLP) tasks and 5 LLMs. Although the algorithm doesn\u0026rsquo;t take ordering into consideration, the paper proves its insensitiveness to the order of exemplars.\nHowever, from my perspective, I still have some problems related to the paper:\nIn Exemplar Retrieval stage, what\u0026rsquo;s the meaning of computing $f(Q)$ against all unlabeled data $\\mathcal X_\\mathrm{unlabeled}$. Given that $\\mathcal X_\\mathrm{labeled}$ is a representative subset of $\\mathcal X_\\mathrm{unlabeled}$, would it be computationally better to calculate $f(Q)$ and $f(a|Q)$ only against $\\mathcal X_\\mathrm{labeled}\\cup Q$? What\u0026rsquo;s the purpose of dealing with the queries as a whole (query set $Q$), instead of retrieving the best exemplars for each query $q$? The experiments didn\u0026rsquo;t cover the comparison of Div-S3 with some recent algorithms, especially the learning-based ones. Will the algorithm averagely perform better if we handcraft a rule to arrange the selected exemplars? Also, in Figure 3, the variances do not seem to be small. References [1] L. Kumari, S. Wang, A. Das, T. Zhou, and J. Bilmes, â€œAn End-to-End Submodular Framework for Data-Efficient In-Context Learning,â€ in Findings of the Association for Computational Linguistics: NAACL 2024, K. Duh, H. Gomez, and S. Bethard, Eds., Mexico City, Mexico: Association for Computational Linguistics, Jun. 2024, pp. 3293â€“3308. Accessed: Jul. 02, 2024. [Online]. Available: https://aclanthology.org/2024.findings-naacl.209â¤¶â¤¶ [2] H. Su et al., â€œSelective Annotation Makes Language Models Better Few-Shot Learners,â€ presented at the The Eleventh International Conference on Learning Representations, Sep. 2022. Accessed: May 30, 2024. [Online]. Available: https://openreview.net/forum?id=qY1hlv7gwgâ¤¶ [3] S. C. H. Hoi, R. Jin, J. Zhu, and M. R. Lyu, â€œBatch mode active learning and its application to medical image classification,â€ in Proceedings of the 23rd international conference on Machine learning, in ICML â€™06. New York, NY, USA: Association for Computing Machinery, Jun. 2006, pp. 417â€“424. doi: 10.1145/1143844.1143897.â¤¶ [4] N. Reimers and I. Gurevych, â€œSentence-BERT: Sentence Embeddings using Siamese BERT-Networks.â€ arXiv, Aug. 27, 2019. Accessed: Jul. 08, 2024. [Online]. Available: http://arxiv.org/abs/1908.10084â¤¶ [5] G. L. Nemhauser, L. A. Wolsey, and M. L. Fisher, â€œAn analysis of approximations for maximizing submodular set functionsâ€”I,â€ Mathematical programming, vol. 14, pp. 265â€“294, 1978.â¤¶ [6] L. Kumari and J. Bilmes, â€œSubmodular Span, with Applications to Conditional Data Summarization,â€ Proceedings of the AAAI Conference on Artificial Intelligence, vol. 35, no. 14, Art. no. 14, May 2021, doi: 10.1609/aaai.v35i14.17465.â¤¶ ","date":"2024-07-08T12:33:03+08:00","image":"https://files.furffisite.link/blogimg/20240709193826-409d3c5c4adf797af0b0d55992852fce-5194f.jpg","permalink":"https://blog.furffisite.link/p/read-papers/div-s3/","title":"ã€è¯»è®ºæ–‡ã€‘An End-to-End Submodular Framework for Data-Efficient In-Context Learning"},{"content":"éªŒæœº åœ¨å®Œæˆ Windows åˆå§‹é…ç½®ï¼Œè¿›å…¥æ¡Œé¢åçš„ç¬¬ä¸€ä»¶äº‹æ˜¯éªŒæœºï¼Œå³ç¡®ä¿ç¬”è®°æœ¬çš„é…ç½®ç¬¦åˆå‚å®¶çš„å®£ä¼ ã€ç¡®ä¿ç¬”è®°æœ¬æ²¡æœ‰æš—ç—…ç­‰ã€‚\nåœ¨å¤–è§‚ä¸Šçš„éªŒæœºæ­¥éª¤åœ¨å¼€æœºå‰åº”å½“å·²ç»å®Œæˆäº†ï¼Œä¾‹å¦‚åŒ…è£…æ­£å¸¸ã€å¤–è§‚æ— åˆ’ç—•ã€é¦–æ¬¡å¼€æœºå¿…é¡»æ¥å…¥ç”µæºç­‰ã€‚ ä½†æ˜¯ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½ä»å¤–è§‚çœ‹å‡ºç¬”è®°æœ¬çš„é…ç½®ä¿¡æ¯ï¼Œå› æ­¤ï¼Œéœ€è¦åœ¨è¿›å…¥ç³»ç»Ÿåä½¿ç”¨ç›¸å…³è½¯ä»¶æ£€æµ‹ç¬”è®°æœ¬çš„ç¡¬ä»¶é…ç½®ã€‚è¿™äº›å·¥å…·ä¾‹å¦‚ï¼š\nCPU-Zï¼šæ£€æµ‹ä¸»è¦ç¡¬ä»¶ä¿¡æ¯ï¼ˆCPU/ä¸»æ¿/å†…å­˜æ˜¾å¡ï¼‰ï¼› AIDA-64ï¼šæ£€æµ‹æ‰€æœ‰ç¡¬ä»¶ä¿¡æ¯ï¼› CrystalDiskInfo: æŸ¥çœ‹ç¡¬ç›˜ä¿¡æ¯å’ŒçŠ¶æ€ï¼› â€¦â€¦ è¿™ç±»å·¥å…·è½¯ä»¶éƒ½å·²ç»è¢«DIYçˆ±å¥½è€…ä¸­è‘—åçš„å›¾å§å·¥å…·ç®±å’Œå¡ç¡¬å·¥å…·ç®±æ”¶å½•ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç›´æ¥ä¸‹è½½ä½¿ç”¨è¿™äº›å·¥å…·ç®±ç”¨äºæ£€æµ‹ç¡¬ä»¶ã€‚ å¯¹äºåŠå…¬ç”¨çš„ç¬”è®°æœ¬è€Œè¨€è¿™äº›éªŒæœºè½¯ä»¶æ˜¯æ— ç”¨çš„ï¼Œå› æ­¤è¾ƒä¸ºæ¨èçš„åšæ³•æ˜¯å°†å…¶ç¨‹åºæ”¾åœ¨ U ç›˜é‡Œï¼ŒéªŒæ–°æœºçš„æ—¶å€™åªéœ€æ’å…¥è¿™ä¸ª U ç›˜ï¼Œè¿è¡Œè¿™äº›ç¨‹åºå³å¯ã€‚\næ¸…ç† å¯¹äºæ–°ç³»ç»Ÿè€Œè¨€ï¼Œéœ€è¦æ¸…ç†çš„åªæœ‰é¢„è£…è½¯ä»¶å’Œå¼€æœºå¯åŠ¨é¡¹\næ¸…ç†é¢„è£…è½¯ä»¶ï¼šå³é”® Windows å¾½æ ‡ -\u0026gt; â€œå®‰è£…çš„åº”ç”¨â€ -\u0026gt; éå†åˆ—è¡¨å¹¶å¸è½½ç”¨ä¸ä¸Šçš„é¢„è£…åº”ç”¨ï¼› æ¸…ç†å¼€æœºå¯åŠ¨é¡¹ï¼šå³é”® Windows å¾½æ ‡ -\u0026gt; â€œä»»åŠ¡ç®¡ç†å™¨â€ -\u0026gt; å¯åŠ¨åº”ç”¨ -\u0026gt; éå†åˆ—è¡¨å¹¶å¸è½½ç”¨ä¸ä¸Šçš„é¢„è£…åº”ç”¨ã€‚ è®¾ç½® Windows ç¡¬ç›˜åˆ†åŒº å› ä¸ºæœ‰äº›å“ç‰Œçš„ç¬”è®°æœ¬å‡ºå‚æ˜¯è‡ªå¸¦ BitLocker åˆ†åŒºåŠ å¯†çš„ï¼Œè€Œå¸¸ç”¨çš„ DiskGenius ç­‰ç¬¬ä¸‰æ–¹çš„åˆ†åŒºåŠ©æ‰‹ä¼¼ä¹å¹¶ä¸æ”¯æŒ BitLocker åŠ å¯†çš„åˆ†åŒºï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œä½¿ç”¨ Windows è‡ªå¸¦çš„ç¡¬ç›˜ç®¡ç†åŠŸèƒ½ç®¡ç†ç¡¬ç›˜åˆ†åŒºã€‚ Windows çš„ç¡¬ç›˜ç®¡ç†åŠŸèƒ½å¯ä»¥ç›´æ¥é€šè¿‡ Windows å¾½æ ‡çš„å³é”®èœå•æ‰“å¼€ã€‚\nåœ¨â€œç£ç›˜ç®¡ç†â€ä¸­ï¼Œä½¿ç”¨ å³é”® -\u0026gt; åˆ é™¤å· åˆ é™¤å‡ºå‚é¢„åˆ†é…çš„å¸¦ç›˜ç¬¦çš„åˆ†åŒºï¼ˆä¸å¸¦ç›˜ç¬¦çš„æ¢å¤åˆ†åŒºæœ€å¥½åˆ«åˆ ï¼‰ï¼Œç„¶åä½¿ç”¨å³é”® Windows åˆ†åŒº -\u0026gt; æ‰©å±•å·æˆ–è€…å‹ç¼©å·ï¼Œä»¥è°ƒæ•´ Windows åˆ†åŒºçš„å¤§å°ã€‚æˆ‘è®¢è´­çš„ç¬”è®°æœ¬å†…ç½®äº†ä¸€å— 1 TB çš„å›ºæ€ç¡¬ç›˜ï¼Œæˆ‘çš„ç©ºé—´åˆ†é…æ–¹æ¡ˆå¦‚ä¸‹ï¼š\nWindows åˆ†åŒºï¼ˆ300 GiBï¼‰ï¼Œç”¨äºå­˜æ”¾ Windows ç³»ç»Ÿã€åº”ç”¨ç¨‹åºå’Œå¼€å‘ç¯å¢ƒï¼› Data åˆ†åŒºï¼ˆ200 GiBï¼‰ï¼Œç”¨äºå­˜æ”¾å­¦ä¹ èµ„æ–™ã€ä»£ç å’Œç…§ç‰‡ç­‰æ•°æ®ï¼› Extra åˆ†åŒºï¼ˆå‰©ä½™çš„ 451 GiBï¼‰ï¼Œç”¨äºå­˜æ”¾å¯ä»¥ä»äº’è”ç½‘é‡å¤ä¸‹è½½çš„èµ„æºï¼Œä¾‹å¦‚ Steam æ¸¸æˆåº“ã€é¢„è®­ç»ƒæ¨¡å‹æƒé‡å’Œæ•°æ®é›†ç­‰ã€‚ è¿™é‡Œæ²¡æœ‰ç»™ Linux ç³»ç»Ÿç•™ç©ºé—´æ˜¯å› ä¸ºæ–°çš„ç¬”è®°æœ¬å†…æœ‰ä¸€ä¸ªç©ºçš„ M.2 NVME ç¡¬ç›˜ä½ï¼Œæˆ‘å‡†å¤‡æŠŠæ—§ç¬”è®°æœ¬å†…çš„å›ºæ€ç¡¬ç›˜æ‹†äº†æ”¾åœ¨è¿™é‡Œä½œä¸º Linux ç³»ç»Ÿçš„ç³»ç»Ÿç›˜ã€‚\nå¼€å§‹èœå• æ¸…ç†å¼€å§‹èœå•ï¼šç‚¹å‡» Windows å¾½æ ‡æ‰“å¼€å¼€å§‹èœå• -\u0026gt; åˆ é™¤å¼€å§‹èœå•å†…ä¸éœ€è¦çš„åº”ç”¨å›¾æ ‡ å±•ç¤ºæ›´å¤šé¡¹ç›®ï¼šè¿›å…¥è®¾ç½® -\u0026gt; â€œä¸ªæ€§åŒ–â€ -\u0026gt; â€œå¼€å§‹â€ -\u0026gt; é€‰æ‹©â€œæ›´å¤šå›ºå®šé¡¹â€ ç®¡ç†ç”µæºæŒ‰é’®å·¦ä¾§çš„å›¾æ ‡ï¼šè¿›å…¥è®¾ç½® -\u0026gt; â€œä¸ªæ€§åŒ–â€ -\u0026gt; â€œå¼€å§‹â€ -\u0026gt; â€œæ–‡ä»¶å¤¹â€ -\u0026gt; å¼€å¯éœ€è¦æ˜¾ç¤ºåœ¨ç”µæºæŒ‰é’®å·¦ä¾§çš„å›¾æ ‡ï¼ˆæˆ‘é€‰æ‹©äº†è®¾ç½®ã€æ–‡ä»¶èµ„æºç®¡ç†å™¨ã€ä¸‹è½½å’Œä¸ªäººæ–‡ä»¶å¤¹ï¼‰ ä»»åŠ¡æ  ä»»åŠ¡æ å±…å·¦ï¼šè¿›å…¥è®¾ç½® -\u0026gt; â€œä¸ªæ€§åŒ–â€ -\u0026gt; â€œä»»åŠ¡æ â€ -\u0026gt; â€œä»»åŠ¡æ è¡Œä¸ºâ€ -\u0026gt; â€œä»»åŠ¡æ å¯¹é½æ–¹å¼â€ -\u0026gt; â€œé å·¦â€ æœç´¢æ¡†æ”¹ä¸ºæœç´¢å›¾æ ‡ï¼š\u0026hellip; -\u0026gt; â€œä»»åŠ¡æ â€ -\u0026gt; â€œä»»åŠ¡æ é¡¹â€ -\u0026gt; â€œæœç´¢â€ -\u0026gt; â€œä»…æœç´¢å›¾æ ‡â€ å…³é—­å°ç»„ä»¶ï¼š\u0026hellip; -\u0026gt; â€œä»»åŠ¡æ é¡¹â€ -\u0026gt; â€œå°ç»„ä»¶â€ -\u0026gt; è®¾ä¸ºå…³é—­ é¼ æ ‡æŒ‡é’ˆæ ·å¼ ä¸ªäººè®¤ä¸ºé»˜è®¤çš„ç™½è‰²æŒ‡é’ˆä¸å¥½çœ‹ï¼Œå¹¶ä¸”åœ¨ç™½åº•é»‘å­—ã€æ–‡å­—å’ŒæŒ‡é’ˆå¤§å°ç›¸è¿‘çš„æƒ…å†µä¸‹ï¼Œæœ‰æ—¶ä¼šæ··è¿›æ–‡å­—é‡Œéš¾ä»¥åˆ†è¾¨ã€‚\næ›´æ”¹é¼ æ ‡æŒ‡é’ˆæ ·å¼ï¼šè¿›å…¥è®¾ç½® -\u0026gt; â€œè¾…åŠ©åŠŸèƒ½â€ -\u0026gt; â€œé¼ æ ‡æŒ‡é’ˆä¸è§¦æ§â€ -\u0026gt; â€œé¼ æ ‡æŒ‡é’ˆæ ·å¼â€ -\u0026gt; æˆ‘ä¸ªäººæ›´å–œæ¬¢ç¬¬å››é¡¹ â€œè‡ªå®šä¹‰â€ -\u0026gt; ä»ç»™å‡ºçš„é¢œè‰²ä¸­é€‰ä¸€ä¸ªï¼ˆä¸æ»¡æ„çš„è¯ä¹Ÿå¯ä»¥é€‰æ‹©å…¶å®ƒé¢œè‰²ï¼‰ è¯­è¨€ æ·»åŠ è‹±æ–‡è¾“å…¥æ³•ï¼ˆä¾¿äºå†™ä»£ç ï¼‰ï¼šè¿›å…¥è®¾ç½® -\u0026gt; â€œæ—¶é—´å’Œè¯­è¨€â€ -\u0026gt; â€œè¯­è¨€å’ŒåŒºåŸŸâ€ -\u0026gt; â€œæ·»åŠ è¯­è¨€â€ -\u0026gt; æœç´¢å¹¶é€‰æ‹©â€œè‹±è¯­ï¼ˆç¾å›½ï¼‰â€ æ·»åŠ æ—¥æ–‡è¾“å…¥æ³•ï¼ˆæœ‰æ—¶ä¼šç”¨åˆ°ï¼‰ï¼š\u0026hellip; -\u0026gt; â€œæ·»åŠ è¯­è¨€â€ -\u0026gt; æœç´¢å¹¶é€‰æ‹©â€œæ—¥è¯­â€ ä¸ªäººæ•°æ®å­˜å‚¨ä½ç½® è¿™ä¸€æ­¥çš„ç›®çš„æ˜¯å°†ä¸€éƒ¨åˆ†ä¸ªäººæ•°æ®çš„ä¿å­˜ä½ç½®ä»ç³»ç»Ÿç›˜æ›´æ”¹è‡³ D ç›˜ã€‚ä¸è¿‡è¿™ä¸ªæ“ä½œåªèƒ½è¿ç§»ä¸€éƒ¨åˆ†æ•°æ®ï¼Œå¯¹äº AppData å†…çš„æ–‡ä»¶åˆ™æ— èƒ½ä¸ºåŠ›ã€‚\nè¿›å…¥ä¸ªäººæ–‡ä»¶å¤¹ -\u0026gt; å³é”®â€œæ–‡æ¡£/éŸ³ä¹/å›¾ç‰‡/è§†é¢‘/ä¸‹è½½â€ -\u0026gt; â€œå±æ€§â€ -\u0026gt; â€œä½ç½®â€æ ‡ç­¾é¡µ -\u0026gt; ç‚¹å‡»â€œç§»åŠ¨â€ -\u0026gt; é€‰æ‹© D ç›˜å†…çš„ç›®æ ‡æ–‡ä»¶å¤¹ -\u0026gt; â€œç¡®å®šâ€ è¿›å…¥è®¾ç½® -\u0026gt; â€œç³»ç»Ÿâ€ -\u0026gt; â€œå­˜å‚¨â€ -\u0026gt; â€œä¿å­˜æ–°å†…å®¹çš„åœ°æ–¹â€ -\u0026gt; å°†ä¸­é—´å››é¡¹çš„å­˜å‚¨ä½ç½®ä» C ç›˜æ›´æ”¹ä¸º D ç›˜ å®‰è£…è½¯ä»¶ å·¥å…· ç›®å‰åªå®‰è£…äº†è¿™äº›ï¼Œæˆ‘åœ¨ä¹‹åå‘ç°çš„å’Œç”¨åˆ°çš„å¥½ç”¨å°å·¥å…·ä¹Ÿä¼šæ›´æ–°åˆ°è¿™ä¸ªåˆ—è¡¨é‡Œã€‚\nPowerToys (Microsoft Store)ï¼šå¼€æºçš„ Windows å°å·¥å…·åˆé›†ï¼› Snipaste (Microsoft Store)ï¼šæˆªå›¾/è´´å›¾å·¥å…·ï¼› Notepads App (Microsoft Store)ï¼šæ›´ç¾è§‚çš„è®°äº‹æœ¬å¹³æ›¿ï¼› PotPlayer (Microsoft Store)ï¼šåª’ä½“æ’­æ”¾å™¨ï¼› Bandizip (Microsoft Store)ï¼šå¥½ç”¨çš„å‹ç¼©è½¯ä»¶ï¼› Sumatra PDF (Download)ï¼šè½»é‡çº§ PDF é˜…è¯»å™¨ï¼› Zotero (Download)ï¼šæ–‡çŒ®ç®¡ç†/é˜…è¯»å·¥å…·ï¼› MacTypeï¼šWindows å­—ä½“æ¸²æŸ“ä¼˜åŒ–ã€‚ å¼€å‘ç¯å¢ƒ åç»­æˆ‘ä¸»è¦çš„å¼€å‘å·¥ä½œè¿˜æ˜¯ä¼šåœ¨ Linux ç³»ç»Ÿä¸­è¿›è¡Œï¼Œå› æ­¤åœ¨ Windows ç³»ç»Ÿé‡Œåªè£…è¿™äº›åº”è¯¥å°±å¤Ÿäº†ã€‚\nVisual Studio Codeï¼šä»£ç ç¼–è¾‘å™¨ï¼› Pythonï¼šPython è§£é‡Šå™¨ï¼› Pip æ¢æºï¼š 1 pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple Scoopï¼šWindows çš„ç¬¬ä¸‰æ–¹åŒ…ç®¡ç†å·¥å…·ï¼› 1 2 Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser Invoke-RestMethod -Uri https://get.scoop.sh | Invoke-Expression Git + hugoï¼šç‰ˆæœ¬ç®¡ç† + å†™åšå®¢ç”¨çš„ã€‚ 1 scoop install git go ","date":"2024-07-05T10:57:02+08:00","image":"https://files.furffisite.link/blogimg/20240707215654-5c276c9ae1c98340521bf56811f4b765-87c36.jpg","permalink":"https://blog.furffisite.link/p/windows-setup/","title":"ä¸ªäººå¸¸ç”¨çš„æ–° Windows 11 ç³»ç»Ÿçš„é…ç½®è¿‡ç¨‹"},{"content":"èƒŒæ™¯ åˆšä¸Šå¤§å­¦çš„æ—¶å€™ï¼Œæˆ‘è€ƒè™‘åˆ°æ—¥åŒºçš„ Apple Music ç‰ˆæœ¬å¯é€‰çš„æ­Œæ›²æ›´å¤šï¼Œè€Œä¸”å„ç§æœåŠ¡ä¹Ÿæ›´ç»™åŠ›[1]ã€‚ äºæ˜¯æˆ‘å°±å¼€é€šäº†æ—¥åŒºçš„ä¼šå‘˜ï¼Œå› ä¸ºæœ‰å­¦ç”Ÿä¼˜æƒ ï¼Œæ¯æœˆä¹Ÿå°±èŠ± 580 æ—¥å…ƒï¼ˆçº¦ 25 äººæ°‘å¸ï¼‰ã€‚ ä½†ç°åœ¨æ¯•ä¸šåœ¨å³ï¼Œæˆ‘å¼€å§‹æ€€ç–‘æˆ‘åˆ°ç ”ç©¶ç”Ÿé˜¶æ®µè¿˜èƒ½ä¸èƒ½ç»§ç»­äº«å—è¿™ä¸ªä¼˜æƒ ã€‚è€Œæ—¥åŒºä¼šå‘˜åŸä»·è¦æ¯æœˆ 1080 æ—¥å…ƒï¼ˆçº¦ 50 äººæ°‘å¸ï¼‰ï¼Œè¿™è¶…å‡ºæˆ‘çš„å¯æ¥å—èŒƒå›´äº†ã€‚ æ­¤å¤–ï¼Œæœ€è¿‘æ·˜å®ä¸Šè‹¹æœæ—¥åŒº App Store çš„å……å€¼å¡ä¸æ˜¯å¾ˆå¥½æ‰¾ï¼Œè€Œæˆ‘æ—¥åŒºè´¦æˆ·çš„ä½™é¢ä¹Ÿè¦è§åº•äº†ã€‚ æ‰€ä»¥ï¼Œæ˜¯æ—¶å€™æ¢ä¸ªå¹³å°äº†ã€‚\nç„¶è€Œï¼Œå›½å†…çš„éŸ³ä¹å¹³å°çš„ç¤¾äº¤å±æ€§å¤ªå¼ºï¼Œæˆ‘ä¸ªäººä¸å¤ªå–œæ¬¢è¿™äº›ï¼Œè§‰å¾—å¤ªçƒ­é—¹äº†[2]ã€‚ ç›¸å¯¹è€Œè¨€ï¼ŒApple Music åˆ™æ›´ä¸“æ³¨äºéŸ³ä¹æœ¬èº«ï¼Œè€Œä¸”è·Ÿè‹¹æœç”Ÿæ€èåˆçš„æ›´å¥½ï¼Œæ‰€ä»¥æˆ‘æœ€åè¿˜æ˜¯é€‰æ‹©äº†è½¬åˆ° Apple Music çš„ä¸­å›½å¤§é™†åŒºï¼ˆå›½åŒºï¼‰ã€‚\næˆ‘æœ‰ä¸¤ä¸ªè‹¹æœè´¦æˆ·ï¼Œä¸€ä¸ªåœ¨å›½åŒºã€ä¸€ä¸ªåœ¨æ—¥åŒºï¼Œäºæˆ‘è€Œè¨€è¿™é‡Œçš„â€œè½¬åŒºâ€å°±æ˜¯å°†åè€…èµ„æ–™åº“çš„æ‰€æœ‰æ­Œæ›²æ·»åŠ åˆ°å‰è€…çš„èµ„æ–™åº“ä¸­ã€‚ è€ƒè™‘åˆ° Apple Music å›½åŒºçš„ç‰ˆæƒåº“ä¸å¦‚æ—¥åŒºï¼Œæˆ‘å¹¶ä¸è¦æ±‚å°†å…¶å…¨éƒ¨è¿ç§»ï¼Œåªè¦èƒ½å°†å¤§éƒ¨åˆ†æ­Œæ›²å¤åˆ¶åˆ°ç›®æ ‡è´¦æˆ·çš„èµ„æ–™åº“é‡Œå°±è¡Œã€‚\næˆ‘èƒ½æœåˆ°çš„æˆç†Ÿçš„å·¥å…·ä¸æ˜¯æ»¡è¶³ä¸äº†æˆ‘çš„éœ€æ±‚å°±æ˜¯éœ€è¦æ”¶è´¹ï¼Œå› æ­¤æˆ‘å†³å®šè‡ªå·±æ¢ç´¢è¿ç§»æ›²åº“çš„æ–¹æ³•ã€‚æœ¬æ–‡çš„æ–¹æ³•åˆ†ä¸ºä¸¤æ­¥ï¼š\nä»æºè´¦æˆ·è·å–æ­Œæ›² å°†æ­Œæ›²æ·»åŠ åˆ°æ–°è´¦æˆ· è¿™éœ€è¦æ“ä½œè€…æœ‰ä¸€å®šçš„ç¼–ç¨‹å’Œçˆ¬è™«åŸºç¡€ï¼Œæœ¬æ–‡åªæ˜¯è®²è¿°æˆ‘çš„æ€è·¯å’Œæ“ä½œæµç¨‹ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰å°†å…¶æ•´ç†æˆé€šç”¨çš„ä»£ç çš„æƒ³æ³•ï¼Œæ–‡ä¸­çš„è„šæœ¬éœ€è¦æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹åæ‰å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚ æœ¬æ–‡çš„æ–¹æ³•ä¸è´¦æˆ·æ‰€åœ¨çš„åŒºåŸŸæ— å…³ï¼Œå› æ­¤ç†è®ºä¸Šä¹Ÿé€‚ç”¨äºå…¶å®ƒåŒºåŸŸé—´çš„å’Œç›¸åŒåŒºåŸŸä¸åŒè´¦æˆ·ä¹‹é—´çš„è¿ç§»ã€‚\nç¬¬ä¸€æ­¥ï¼šä»æºè´¦æˆ·è·å–æ­Œæ›² æˆ‘ç§¯ç´¯äº†å››å¹´çš„è´¦æˆ·é‡Œæœ‰æ­Œæ›² 8441 é¦–ï¼Œå®ƒä»¬åˆ†å¸ƒåœ¨ 1820 å¼ ä¸“è¾‘å†…ï¼Œæ‰€ä»¥ä»¥ä¸“è¾‘ä¸ºå•ä½è¿ç§»æ›´åˆç†ä¸€äº›ã€‚\nå¾—ç›Šäº Apple Music çš„ç½‘é¡µç«¯ï¼Œè·å–ç›¸å…³çš„ API å¹¶ä¸æ˜¯ä»€ä¹ˆéš¾äº‹ï¼š\nåœ¨æµè§ˆå™¨å†…çš„ Apple Musicç½‘é¡µç«¯ç™»å½•æºè´¦æˆ·ï¼Œæ‰“å¼€è°ƒè¯•å·¥å…·ï¼Œåˆ‡æ¢åˆ° Network é¡µï¼Œè¿‡æ»¤å‡º XHR è¯·æ±‚ã€‚ ç‚¹å‡»â€œä¸“è¾‘/Albumsâ€åˆ‡æ¢åˆ°ä¸“è¾‘é¡µï¼Œè¿™æ—¶åœ¨è°ƒè¯•å·¥å…·å†…åº”è¯¥ä¼šå‡ºç°ä¸€æ¡ amp-api å¼€å¤´çš„è¯·æ±‚ï¼š å³é”®è¿™æ¡è¯·æ±‚ï¼ŒCopy -\u0026gt; Copy as cURLï¼Œå¤åˆ¶åˆ°ç»ˆç«¯å†…å°è¯•é‡æ”¾è¯·æ±‚ï¼Œåœ¨æˆ‘è¿™é‡ŒæˆåŠŸäº†ï¼Œè¯´æ˜è‹¹æœå¹¶æ²¡æœ‰åšå„ç§å¼¯å¼¯ç»•ç»•çš„åçˆ¬æªæ–½ï¼Œå¥½è¯„ã€‚ è¿™ä¸ªAPIå“åº”çš„ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 { \u0026#34;data\u0026#34;: [...], \u0026#34;resources\u0026#34;: { \u0026#34;library-albums\u0026#34;: {...}, \u0026#34;albums\u0026#34; : {...}, \u0026#34;library-artists\u0026#34;: {...}, \u0026#34;artists\u0026#34;: {...} }, \u0026#34;meta\u0026#34;: {...} } æœ‰äº† API ä¹‹åå°±å¯ä»¥å¾ªç¯è¯·æ±‚è·å–å®Œæ•´åˆ—è¡¨äº†ï¼š\nè¯·æ±‚å‚æ•°é‡Œçš„ offset é¡¹æŒ‡å®šäº†åç§»é‡ï¼Œé€šè¿‡ä¸æ–­æ”¹å˜è¿™ä¸ªå€¼å¯ä»¥è·å–å®Œæ•´çš„ä¸“è¾‘åˆ—è¡¨ã€‚ åœ¨å“åº”jsonæœ€åçš„ meta é¡¹é‡Œæœ‰è®¢é˜…çš„ä¸“è¾‘æ€»æ•°ï¼Œåœ¨æˆ‘è¿™é‡Œæ˜¯ \u0026quot;meta\u0026quot;: {\u0026quot;total\u0026quot;: 1820, ...}ï¼Œå³1820æ¡ï¼Œè¯·æ±‚å‚æ•°å†… limit=100 ä¹Ÿå°±æ˜¯æ¯é¡µæœ‰ 100 æ¡ã€‚æ ¹æ®è¿™ä¸¤ä¸ªæ•°å€¼å¯ä»¥ç®—å‡ºä¸€å…±æœ‰ 19 é¡µï¼Œè¦è¯·æ±‚ 19 æ¬¡ã€‚æˆ‘ä¹Ÿå°è¯•äº†è°ƒé«˜ limitï¼Œå‘ç° limit\u0026gt;100 æ—¶ API ä¼šè¿”å›é”™è¯¯ã€‚ å°†å‰é¢å¤åˆ¶çš„ curl æŒ‡ä»¤æ”¾åˆ° .sh è„šæœ¬å†…ï¼Œå†™ä¸€ä¸ªå¾ªç¯ï¼Œä¾‹å¦‚ï¼š 1 2 3 4 5 6 7 8 9 10 11 ...... for i in {0..18}; do chunk=\u0026#34;${i}00\u0026#34; curl \u0026#34;https://amp-api.music.apple.com/.../...\u0026amp;offset=$chunk\u0026amp;...\u0026#34; \\ --compressed \\ ...... -H \u0026#39;Sec-Fetch-Site: same-site\u0026#39; \\ -H \u0026#39;TE: trailers\u0026#39; \\ -o \u0026#34;chunk$chunk.json\u0026#34; # æŠŠå“åº”è¾“å‡ºåˆ°æ–‡ä»¶ sleep 10 # é¿å…è¯·æ±‚é—´éš”å¤ªçŸ­å¯¼è‡´è¢« ban done åœ¨ç»ˆç«¯ç”¨ bash è¿è¡Œè¿™ä¸ªè„šæœ¬ï¼Œä¸ä¸€ä¼šèµ„æ–™åº“å†…çš„æ‰€æœ‰ä¸“è¾‘çš„ä¿¡æ¯å°±éƒ½è¢«ä¿å­˜åˆ°æœ¬åœ°çš„ json æ–‡ä»¶å†…äº†ã€‚ ç¬¬äºŒæ­¥ï¼šå°†æ­Œæ›²æ·»åŠ åˆ°æ–°è´¦æˆ· å’Œä¸Šé¢ç±»ä¼¼ï¼Œé¦–å…ˆè·å–æ·»åŠ ä¸“è¾‘çš„ APIï¼š\nåˆ‡æ¢åˆ°ç›®æ ‡è´¦æˆ·ï¼Œæ‰“å¼€è°ƒè¯•å·¥å…·ï¼Œåˆ‡æ¢åˆ° Network é¡µï¼Œè¿‡æ»¤å‡º XHR è¯·æ±‚ã€‚ åœ¨é¦–é¡µä¸Šéšä¾¿æ‰¾ä¸ªä¸“è¾‘æ·»åŠ åˆ°èµ„æ–™åº“å†…ï¼Œåœ¨è°ƒè¯•å·¥å…·å†…å®šä½åˆ°è¿™æ¡è¯·æ±‚ï¼š åŒä¸Šï¼Œå¤åˆ¶ curl æŒ‡ä»¤åˆ°ç»ˆç«¯å†…å°è¯•é‡æ”¾ï¼ŒæˆåŠŸã€‚ åˆ†æè¯·æ±‚ URLï¼š\n1 https://amp-api.music.apple.com/v1/me/library?art[url]=f\u0026amp;format[resources]=map\u0026amp;ids[albums]=1725057905\u0026amp;representation=ids å…¶ä¸­çš„ 1725057905 å¯¹åº”ä¹‹å‰è·å–åˆ°çš„ json æ–‡ä»¶é‡Œ resources.albums å†…çš„æ¯ä¸ªå±æ€§çš„åç§°ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªä¸“è¾‘çš„ IDã€‚ ç”±äº URL å†… ID æ˜¯å¤æ•° idsï¼Œæˆ‘ä¾¿çŒœæµ‹èƒ½å¦åŒæ—¶æ·»åŠ å¤šä¸ªä¸“è¾‘ï¼Œå°†URLä¸­çš„ 1725057905 æ›¿æ¢ä¸º 398320584,322934943ï¼Œé‡æ–°å‘é€è¯·æ±‚ï¼Œå±…ç„¶ä¹ŸæˆåŠŸäº†ï¼Œè¯´æ˜æˆ‘çš„çŒœæµ‹æ˜¯å¯¹çš„ã€‚\næœ‰äº†è¿™äº›åŸºç¡€ï¼Œç¼–å†™è„šæœ¬å°±å¾ˆå®¹æ˜“äº†ï¼Œé¦–å…ˆä½¿ç”¨ jq è§£æä¹‹å‰ä¿å­˜çš„å“åº” jsonï¼Œæå–å‡ºå…¶ä¸­ resources.albums å†…æ¯ä¸€é¡¹çš„é”®å€¼ï¼Œä½¿ç”¨é€—å·åˆ†éš”è¾“å‡ºå¹¶æ‹¼æ¥åˆ° url å†…ï¼š\n1 2 3 jqs=\u0026#34;.resources.albums | keys[${section}] | [ .[] | tonumber ] | @csv\u0026#34; ids=\u0026#34;$(cat chunk${index}00.json | jq -r \u0026#34;$jqs\u0026#34; )\u0026#34; url=\u0026#34;https://amp-api.music.apple.com/.../...\u0026amp;ids%5Balbums%5D=$ids\u0026amp;...\u0026#34; æ”¾åˆ°ä¹‹å‰çš„ curl è¯·æ±‚å†…ï¼ŒåŠ ä¸Šå¾ªç¯ç»„æˆè„šæœ¬ï¼Œè„šæœ¬é‡Œå¯¹æ¯ä¸ª chunk åˆ†æ®µè¯·æ±‚æ˜¯å› ä¸ºä¸€æ¬¡å¢åŠ  100 å¼ ä¸“è¾‘è¯·æ±‚çš„å“åº”ä¼šå¾ˆæ…¢ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 ...... for index in {0..18}; do for section in \u0026#39;:25\u0026#39; \u0026#39;25:50\u0026#39; \u0026#39;50:75\u0026#39; \u0026#39;75:\u0026#39;; do jqs=\u0026#34;.resources.albums | keys[${section}] | [ .[] | tonumber ] | @csv\u0026#34; ids=\u0026#34;$(cat chunk${index}00.json | jq -r \u0026#34;$jqs\u0026#34; )\u0026#34; url=\u0026#34;https://amp-api.music.apple.com/v1/me/library?art%5Burl%5D=f\u0026amp;format%5Bresources%5D=map\u0026amp;ids%5Balbums%5D=$ids\u0026amp;representation=ids\u0026#34; curl -X POST \u0026#34;$url\u0026#34; \\ -H \u0026#34;$ua\u0026#34; \\ -H \u0026#39;Accept: */*\u0026#39; \\ ...... -H \u0026#39;Content-Length: 0\u0026#39; \\ -H \u0026#39;TE: trailers\u0026#39; echo sleep 10 # é¿å…è¯·æ±‚é—´éš”å¤ªçŸ­å¯¼è‡´è¢« ban done done ä¹‹åè¿è¡Œè¿™ä¸ªè„šæœ¬ï¼Œå°±å¯ä»¥çœ‹åˆ°è‡ªå·±æºè´¦æˆ·é‡Œçš„æ­Œæ›²è¢«æ…¢æ…¢æ·»åŠ åˆ°ç›®æ ‡è´¦æˆ·é‡Œäº†ã€‚\nå“ªäº›æ­Œæ›²æ²¡æˆåŠŸè¿ç§» ä»¿ç…§ç¬¬ä¸€æ­¥è·å–ç›®æ ‡è´¦æˆ·çš„æ‰€æœ‰ä¸“è¾‘ï¼Œç„¶åå†™ä¸€äº›è„šæœ¬å°±èƒ½çœ‹åˆ°æœ‰å“ªäº›æ­Œæ›²æ²¡è¢«æˆåŠŸè¿ç§»äº†ï¼Œä¾‹å¦‚è¿™ä¸ª python ç¨‹åºï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 import json def getalbums(count: int, fn: str) -\u0026gt; dict: albums = {} for index in range(count): filename = fn.format(index) data = json.load(open(filename)) for k,v in data[\u0026#34;resources\u0026#34;][\u0026#34;albums\u0026#34;].items(): albums[int(k)] = v[\u0026#34;attributes\u0026#34;][\u0026#34;name\u0026#34;] + \u0026#39; | \u0026#39; + v[\u0026#34;attributes\u0026#34;][\u0026#34;artistName\u0026#34;] return albums org_album = getalbums(19, \u0026#34;chunk{}00.json\u0026#34;) dest_album = getalbums(15, \u0026#34;after-chunk{}00.json\u0026#34;) ids = set(org_album) - set(dest_album) for i in ids: print(f\u0026#34;{i}:\u0026#34;,org_album[i]) print(len(ids)) æˆ‘ä¸€å…±æœ‰ 338 å¼ ä¸“è¾‘æ²¡æœ‰è¢«æˆåŠŸè¿ç§»ï¼Œè¿™ä¸»è¦æœ‰ä¸‰ç§æƒ…å†µï¼š\nApple Music å›½åŒºæ²¡ç‰ˆæƒï¼› æ²¡æœ‰ä¸€æ¨¡ä¸€æ ·çš„ï¼Œä½†æ˜¯æœ‰ä¸åŒç‰ˆæœ¬çš„ï¼› å›½åŒºå’Œæ—¥åŒºéƒ½æœ‰ï¼Œä½†æ˜¯ ID ä¸åŒï¼Œä¾‹å¦‚ RADWIMPS å’Œ HOYO-MiX çš„ä¸“è¾‘ã€‚ å…¶ä¸­åä¸¤è€…é æ‰‹åŠ¨æœç´¢ä¹Ÿå¯ä»¥æ…¢æ…¢æ·»åŠ å›å»ï¼Œå¦‚æœé‡åˆ°äº†ç¬¬ä¸€ç§é‚£å°±çœŸçš„æ²¡åŠæ³•äº†ã€‚\nå‚è€ƒèµ„æ–™ [1] è®¢é˜… Apple Music è¯¥é€‰å“ªä¸ªåŒºï¼Ÿâ€”â€”ä¸­ç¾å¡æ¸¯å°æ—¥å…­å¤§åœ°åŒºå…¨å¯¹æ¯”ï¼ˆç¬¬äºŒç‰ˆï¼‰ - å‘è¿œå…¬å›­ | Step Parkâ¤¶ [2] éŸ³ä¹å¹³å°æ¨ªè¯„ï¼šApple Musicã€QQ éŸ³ä¹ã€ç½‘æ˜“äº‘ã€å’ªå’•ã€Spotifyã€YouTube Musicã€Tidal - å°‘æ•°æ´¾â¤¶ ","date":"2024-05-23T16:01:12+08:00","image":"https://files.furffisite.link/blogimg/20240523203808-9f4a7d937672d53fbc1a7174037c6f64-581fc.jpg","permalink":"https://blog.furffisite.link/p/applemusic-transfer/","title":"Apple Music æ›²åº“è¿ç§»"},{"content":"å¤ªé•¿ä¸çœ‹ç‰ˆï¼š\nä½¿ç”¨ root æƒé™æ‰“å¼€ /etc/security/faillock.conf ï¼ˆvim å¯æ¢æˆå…¶å®ƒç¼–è¾‘å™¨ï¼Œå¦‚ nanoï¼‰ 1 $ sudo vim /etc/security/faillock.conf å–æ¶ˆæ³¨é‡Šå¹¶ä¿®æ”¹unlock_timeä¸€é¡¹ï¼Œ60 å¯æ›¿æ¢ä¸ºä½ æƒ³è¦çš„ç§’æ•°ï¼ˆé»˜è®¤600ç§’ï¼‰ 1 unlock_time = 60 æˆ–è€…ï¼Œä¿®æ”¹denyä¸€é¡¹å…³é—­é”™è¯¯é”å®š 1 deny = 0 èƒŒæ™¯ ä»Šå¤©æ¸…æ™¨æˆ‘åˆšåˆšèµ·åºŠï¼Œåœ¨è¿·ç³Šä¸­æƒ³çœ‹çœ‹åŠå¤œæŒ‚æœºè®­ç»ƒçš„æ¨¡å‹çš„æ•ˆæœï¼Œäºæ˜¯æŠ“èµ·ç¬”è®°æœ¬å¼€æœºï¼Œè¾“å¯†ç ã€‚ç»“æœå› ä¸ºæˆ‘æ²¡ç¡é†’ï¼Œè¾“é”™äº†ä¸‰æ¬¡å¯†ç ï¼Œå±å¹•ä¸Šè·³å‡ºäº†è¿™ä¸ªæç¤ºï¼š\nï¼ˆç™»å½•ç•Œé¢çš„å£çº¸æ˜¯ ã•ãªã› è€å¸ˆç”»çš„ é“¶ç‹¼ã€‚ï¼‰\nå“‡ï¼æˆ‘ç”¨äº†ä¸€å¹´å¤šçš„ EndeavourOS ç¬¬ä¸€æ¬¡è§åˆ°è¿™ä¸ªæç¤ºã€‚å†æ€ä¹ˆè¯´è¾“é”™ä¸‰æ¬¡è¦é” 10 åˆ†é’Ÿä¹Ÿå¤ªæ— æƒ…äº†å§ï¼Œå¦‚æœæˆ‘æ€¥ç€ç”¨æ€ä¹ˆåŠã€‚æ€ä¹ˆæ”¹å˜è¿™ä¸ªè®¾ç½®å‘¢ï¼Ÿ\nfaillock é…ç½® ç”±äºæˆ‘ä¸çŸ¥é“è¿™ä¸ªéƒ¨åˆ†å…·ä½“æ˜¯é‚£ä¸ªæ¨¡å—è´Ÿè´£çš„ï¼Œæœç´¢çš„è¿‡ç¨‹è¿˜æ˜¯æœ‰ä¸€äº›æ³¢æŠ˜çš„ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°ç™»å½•ç•Œé¢ï¼ˆgreeterï¼‰ç”± LightDM çš„ greeter [1] æä¾›ï¼Œç™»å½•éªŒè¯ç”± Pluggable Authentication Modules (PAM) [2][3] å¤„ç†ï¼Œè´¦æˆ·é”å®šçš„éƒ¨åˆ†åˆ™ç”± PAM çš„æ¨¡å—pam_faillock.soè´Ÿè´£ã€‚å‰è€…çš„é…ç½®æ–‡ä»¶åœ¨ /etc/lightdm/ æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–‡ä»¶åè§†æ‰€ä½¿ç”¨çš„ greeter è€Œå®šï¼ˆæˆ‘è¿™é‡Œæ˜¯slick-greeter.confï¼‰ï¼Œåè€…çš„é…ç½®æ–‡ä»¶æ˜¯ /etc/security/faillock.conf[4].\nä½¿ç”¨ vimã€nano ç­‰æ–‡æœ¬ç¼–è¾‘å™¨ä»¥ root æƒé™æ‰“å¼€ faillock çš„é…ç½®æ–‡ä»¶ï¼š\n1 $ sudo vim /etc/security/faillock.conf å¯ä»¥å‘ç°é»˜è®¤çš„é…ç½®æ–‡ä»¶é‡Œï¼ˆå¯èƒ½å› å‘è¡Œç‰ˆä¸åŒè€Œæœ‰å·®å¼‚ï¼‰å·²ç»è§£é‡Šäº†æ¯ä¸€é¡¹é…ç½®åŠå…¶ä½œç”¨ï¼Œæˆ‘ä»¬è¦åšçš„åªæ˜¯å–æ¶ˆå¯¹åº”è¡Œçš„æ³¨é‡Šï¼Œä¿®æ”¹æˆæˆ‘ä»¬æƒ³è¦çš„æ•°å€¼ã€‚\nè´¦æˆ·é”å®šç›¸å…³çš„é…ç½® å¯¹äºéå…±äº«çš„PCè€Œè¨€æˆ‘è§‰å¾—æœ€é‡è¦çš„ä¹Ÿå°±ä¸‰é¡¹ï¼šdenyï¼Œfail_intervalå’Œunlock_timeã€‚è¿™ä¸‰é¡¹ç”¨ä¸€å¥è¯æ¥æ¦‚æ‹¬å°±æ˜¯ï¼šâ€œdenyä¸º0æ—¶æ— è®ºè¾“é”™å¤šå°‘æ¬¡éƒ½ä¸ä¼šé”å®šè´¦æˆ·ï¼Œå¦åˆ™ï¼Œåœ¨{fail_interval}ç§’å†…è¿ç»­å¯†ç é”™è¯¯{deny}æ¬¡ä¼šå¯¼è‡´è´¦æˆ·è¢«é”å®š{unlock_time}ç§’ã€‚â€è¿™ä¸‰é¡¹çš„é»˜è®¤å€¼åˆ†åˆ«æ˜¯deny=3ï¼Œfail_interval=900å’Œunlock_time=600\nä¸ºäº†é¿å…æš´åŠ›ç ´è§£ï¼Œæˆ‘æ²¡æœ‰å°†denyè®¾ä¸º 0ï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„é…ç½®ï¼š\n1 2 3 deny = 3 fail_interval = 60 unlock_time = 60 å› ä¸ºæ¯”èµ·é»˜è®¤çš„ 10 åˆ†é’Ÿï¼Œ1 åˆ†é’Ÿæˆ‘è§‰å¾—æ˜¯å…¼é¡¾äº†å®‰å…¨å’Œä¾¿æ·çš„é€‰æ‹©ã€‚\nå¦å¤–ï¼Œfaillock è®°å½•çš„ç™»å½•å¤±è´¥æ¬¡æ•°é»˜è®¤æ˜¯æ”¾åœ¨ /var/run/faillock å†…çš„ï¼Œè€Œè¿™ä¸ªæ–‡ä»¶å¤¹å¤„åœ¨ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿ tmpfs å†…ï¼Œä¹Ÿå°±æ˜¯è¯´å½“è´¦æˆ·å› å¤šæ¬¡å¯†ç é”™è¯¯è¢«é”å®šæ—¶ï¼Œåªè¦é‡å¯ç”µè„‘å°±èƒ½è§£é™¤é”å®š[5]ã€‚ä¿®æ”¹é…ç½®æ–‡ä»¶çš„dirä¸€é¡¹ï¼Œå°†æ–‡ä»¶å¤¹æ”¹åˆ°æŒä¹…å­˜å‚¨çš„æ–‡ä»¶ç³»ç»Ÿå†…å³å¯é˜²æ­¢é‡å¯è§£é™¤é”å®šï¼ˆä¾‹å¦‚/var/lib/faillockï¼‰ã€‚\næˆ‘è¿˜è¯•äº†ä¸€ä¸‹ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨ ssh è¿œç¨‹ç™»é™†ä¹Ÿæ˜¯æœ‰å¯èƒ½è§¦å‘è´¦æˆ·é”å®šçš„ï¼ˆå½“ç„¶è¿™ä¸ªä¹Ÿå–å†³äºPAMçš„é…ç½®ï¼‰ï¼Œå½“è´¦æˆ·é”å®šæ—¶å³ä½¿å¯†ç æ­£ç¡®ä¹Ÿä¼šè¿”å› Permission denied, please try again.ã€‚\nroot ç›¸å…³çš„é…ç½® åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸ºäº†é˜²æ­¢ DOS æ”»å‡»ï¼Œ faillock æ˜¯ä¸ä¼šé”å®š root è´¦æˆ·çš„ [6]ã€‚å¼€å¯ even_deny_root è¿™ä¸€é¡¹åˆ™è®© faillock å¯ä»¥é”å®š root ã€‚ä½¿ç”¨ root_unlock_time å¯ä»¥ä¸º root è´¦æˆ·å•ç‹¬è®¾ç½®é”å®šæ—¶é—´ï¼Œå¹¶ä¸”è®¾ç½®è¿™é¡¹ä¼šéšå¼å¼€å¯even_deny_rootã€‚\næ—¥å¿—ç›¸å…³çš„é…ç½® åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ï¼š\n1 $ journalctl --since today -fg pam å¯ä»¥çœ‹åˆ°ä»Šå¤©ä»¥æ¥ä¸ PAM æœ‰å…³çš„æ—¥å¿—ï¼Œä½¿ç”¨ faillock æŒ‡ä»¤å¯ä»¥çœ‹åˆ°ç³»ç»Ÿå½“å‰è®°å½•çš„ç™»å½•å¤±è´¥çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š\n1 2 3 4 5 6 $ faillock --user furffico furffico: When Type Source Valid 2024-03-21 13:16:24 RHOST 192.168.1.101 V 2024-03-21 13:16:27 RHOST 192.168.1.101 V 2024-03-21 13:16:30 RHOST 192.168.1.101 V é…ç½®æ–‡ä»¶å†…ä¸æ—¥å¿—ç›¸å…³çš„é…ç½®æœ‰ä¸‰ä¸ªï¼š\naudit: å½“ç”¨æˆ·ä¸å­˜åœ¨æ—¶å°†ç”¨æˆ·åè®°å…¥ç³»ç»Ÿæ—¥å¿—ã€‚ 1 2 3 4 # before: sshd[134004]: pam_faillock(sshd:auth): User unknown # after: sshd[136827]: pam_faillock(sshd:auth): User unknown: f slientï¼šä¸æ‰“å° informativeï¼ˆä¿¡æ¯ä¸°å¯Œçš„ï¼Ÿï¼‰æ¶ˆæ¯ï¼ˆæ²¡è¯•å‡ºæ¥è¿™ä¸ªå¼€äº†æœ‰ä»€ä¹ˆåŒºåˆ«ï¼‰ã€‚ no_log_infoï¼šä¸å‘ç³»ç»Ÿæ—¥å¿—æ‰“å° informative æ¶ˆæ¯ã€‚ å‚è€ƒèµ„æ–™ [1] LightDM - ArchWikiâ¤¶ [2] PAM - ArchWikiâ¤¶ [3] An introduction to Pluggable Authentication Modules (PAM) in Linux | Enable Sysadminâ¤¶ [4] faillock.conf(5) â€” Arch manual pagesâ¤¶ [5] Security - ArchWikiâ¤¶ [6] pam_faillock(8) â€” Arch manual pagesâ¤¶ ","date":"2024-03-20T13:55:32+08:00","image":"https://files.furffisite.link/blogimg/20240321144218-38a3404b3f78e405beab5627f4e45e7b-f5a7b.jpg","permalink":"https://blog.furffisite.link/p/linux-authfail-lock/","title":"ã€Linuxã€‘ä¿®æ”¹ç™»å½•ç•Œé¢ å¯†ç ä¸‰æ¬¡é”™è¯¯é”å®šæ—¶é—´"},{"content":"è®ºæ–‡ä¿¡æ¯ æ ‡é¢˜ï¼š Unsupervised Learning for Solving the Travelling Salesman Problem[1] ä½œè€…ï¼š Yimeng Min, Yiwei Bai, Carla P. Gomes ä¼šè®®ï¼š NeurIPS 2023 åœ¨çº¿èµ„æºï¼š https://proceedings.neurips.cc/paper_files/paper/2023/hash/93b8618a9061f8a55825c13ecf28392b-Abstract-Conference.html ä»£ç ï¼š https://github.com/yimengmin/UTSP UTSP ç®—æ³• ä½œè€…è®¤ä¸ºç†æƒ³çš„ heatmap $\\mathcal{H}\\in[0,1]^{n\\times n}$ åº”è¯¥è¡¨ç¤º TSP çš„æœ€ä¼˜è§£ï¼Œå³ä¸€æ¡é•¿åº¦æœ€çŸ­çš„æ±‰å¯†å°”é¡¿ç¯è·¯ï¼Œä¹Ÿå°±æ˜¯ï¼š\n$\\mathcal{H}$ ä½œä¸ºé‚»æ¥çŸ©é˜µè¡¨ç¤ºçš„å›¾å†…æœ‰ä¸”ä»…æœ‰ä¸€æ¡æ±‰å¯†å°”é¡¿ç¯è·¯ï¼› $\\mathcal{H}$ è¡¨ç¤ºçš„ç¯è·¯é•¿åº¦æœ€çŸ­ï¼Œå³$$\\min_\\mathcal{H}\\sum^n_{i=1}\\sum^n_{j=1} \\mathcal{H} _{ij}\\cdot d _{ij}$$ ä¸ºäº†è®©ç½‘ç»œè¾“å‡ºçš„ $\\mathcal{H}$ æ»¡è¶³ç¬¬ä¸€ä¸ªæ¡ä»¶ï¼Œä½œè€…è®¾è®¡äº† soft indicator matrix $\\mathbb{T}\\in[0,1]^{n\\times n}$ï¼Œ$\\mathbb{T}=[\\mathbf p_1|\\mathbf p_2|\\cdots|\\mathbf p_n]$ æ˜¯$n$ä¸ªåˆ—å‘é‡ç»„æˆçš„çŸ©é˜µï¼Œæ»¡è¶³å„åˆ—å’Œä¸º$1$ï¼ˆ$\\sum_{j=1}^n p_{ij} = 1$ï¼‰ï¼Œè¿™ä¸ªæ¡ä»¶å¯ä»¥ä½¿ç”¨ Softmax å‡½æ•°æˆ–è€…å½’ä¸€åŒ–æ»¡è¶³ï¼Œè®ºæ–‡é‡Œä½¿ç”¨äº†å‰è€…ã€‚\nç„¶åä½œè€…æå‡ºäº† $\\mathbb{T}\\rightarrow\\mathcal{H}$ transformationï¼Œä»¥å°† soft indicator $\\mathbb{T}$ è½¬åŒ–ä¸ºå¯ä»¥é‡‡æ ·çš„ heatmap $\\mathcal{H}$ï¼š$$\\mathcal{H} = \\sum_{i=1}^n \\mathbf p_i\\cdot \\mathbf p_{i+1}^T + \\mathbf p_n\\cdot \\mathbf p_1^T$$ åŒæ—¶ä½œè€…ä¹Ÿè¯æ˜äº†è¿™æ ·å½¢æˆçš„ heatmap ä¸­è‡³å°‘æœ‰ä¸€æ¡æ±‰å¯†å°”é¡¿ç¯è·¯ï¼Œè¿™æ ·å°±æ»¡è¶³äº†ç¬¬ä¸€ä¸ªæ¡ä»¶çš„ä¸€åŠï¼ˆæœ‰ä¸€æ¡ï¼‰ã€‚\nè‡³äºå‰©ä¸‹çš„ä¸€åŠï¼ˆä¸è¶…è¿‡ä¸€æ¡ï¼‰ï¼Œä½œè€…ä½¿ç”¨è®¾è®¡çš„ loss å‡½æ•°é¼“åŠ±ç½‘ç»œå‡å°‘ç¯è·¯æ•°é‡ï¼š $$\\mathcal{L}=\\lambda _1 \\sum^n _{i=1}(\\sum^n _{j=1}\\mathbb{T} _{ij}-1)^2 + \\lambda_2 \\sum^n _{i=1}\\mathcal{H} _{ii} + \\sum^n _{i=1}\\sum^n _{j=1} \\mathcal{H} _{ij}\\cdot d _{ij}$$ å…¶ä¸­ç¬¬ä¸€é¡¹é¼“åŠ± $\\mathbb T$ æ¯è¡Œçš„å’Œæ¥è¿‘ $1$ï¼›ç¬¬äºŒé¡¹æƒ©ç½š $\\mathcal{H}$ ä¸­çš„è‡ªç¯ï¼›ç¬¬ä¸‰é¡¹å¯¹åº”ä¸Šé¢çš„ç¬¬äºŒä¸ªæ¡ä»¶ï¼Œå³è®©å›¾é‡Œæ‰€æœ‰è¾¹çš„åŠ æƒå’Œå°½å¯èƒ½å°ã€‚æœ€ç†æƒ³çš„æƒ…å†µä¸‹å‰ä¸¤é¡¹éƒ½æ˜¯ $0$ï¼Œ$\\mathcal L$ç­‰äºTSPæœ€ä¼˜è§£çš„è·¯å¾„é•¿åº¦ã€‚UTSP é€šè¿‡è®¾ç½®è¿™æ ·çš„ loss å‡½æ•°ï¼Œè®©ç¥ç»ç½‘ç»œè¾“å‡ºçš„ç»“æœé è¿‘ç†æƒ³çš„ heatmapã€‚\næ­¤å¤–ï¼Œæ–‡ç« ä½¿ç”¨äº† Scattering Attention GNN (SAG) ä½œä¸ºç¥ç»ç½‘ç»œï¼Œåœ¨æœç´¢å‰ç”¨ top-k ç¼©å°æœç´¢ç©ºé—´ï¼Œå¹¶ä½¿ç”¨ Heat Map Guided Best-first Local Search ä½œä¸ºå±€éƒ¨æœç´¢æ–¹æ³•ã€‚\nä¼˜åŠ¿ä¸å±€é™æ€§ æ ¹æ®æ–‡ç« ï¼ŒUTSP çš„ä¼˜åŠ¿æ˜¯ï¼š\nç›¸æ¯”äºæœ‰ç›‘ç£å­¦ä¹ ï¼ŒUTSP ä¸éœ€è¦æœ‰æ ‡æ³¨çš„æ•°æ®ï¼Œç›¸æ¯”äºå¼ºåŒ–å­¦ä¹ ï¼ŒUTSP çš„æ”¶æ•›é€Ÿåº¦æ›´å¿«ï¼ˆéœ€è¦çš„æ ·æœ¬æ•°é‡æ›´å°‘ï¼‰ï¼› UTSP ç›´æ¥ä» heatmap è®¡ç®— lossï¼Œçœå»äº†å¼ºåŒ–å­¦ä¹ ä¾èµ–é‡‡æ ·è·å¾— reward çš„è¿‡ç¨‹ï¼› é€šè¿‡ç»“æ„è®¾è®¡ä¿è¯è¾“å‡ºçš„ heatmap å«æœ‰æ±‰å¯†å°”é¡¿ç¯è·¯ï¼› ç¥ç»ç½‘ç»œå¾ˆè½»é‡åŒ–ï¼ˆTSP100 ä»…éœ€ä¸¤å±‚ 45k ä¸ªå‚æ•°ï¼‰ï¼› å¯ä»¥æœ‰æ•ˆåœ°å‡å°æœç´¢ç©ºé—´ã€‚ æˆ‘è®¤ä¸º UTSP çš„å±€é™æ€§æ˜¯ï¼š\næ ¹æ®æä¾›çš„å®éªŒæ•°æ®ï¼ŒUTSP å³ä½¿æœ‰è½»é‡åŒ–çš„ç½‘ç»œï¼Œå®ƒç”Ÿæˆ heatmap éœ€è¦çš„æ—¶é—´ä¾ç„¶æ¯” Att-GCRN[2] è¦é•¿ï¼ˆä¸ºä»€ä¹ˆå‘¢ï¼Ÿï¼‰ï¼› Soft indicator æ˜¯é’ˆå¯¹ TSP çš„å·§å¦™è®¾è®¡ï¼Œåªé€‚ç”¨äºè§£ä¸ºæ±‰å¯†å°”é¡¿ç¯çš„é—®é¢˜ï¼Œå¹¶ä¸” UTSP éœ€è¦é’ˆå¯¹é—®é¢˜ç²¾å¿ƒè®¾è®¡ loss å‡½æ•°ï¼Œå› æ­¤å°† UTSP è¿ç§»åˆ°åˆ«çš„ç»„åˆä¼˜åŒ–é—®é¢˜æ—¶ï¼Œç›¸æ¯”äºä¸€äº›æœ‰ç›‘ç£å­¦ä¹ å’Œå¼ºåŒ–å­¦ä¹ æ–¹æ³•ï¼ˆåˆ†åˆ«å¯ä»¥é€šè¿‡æœ‰æ ‡ç­¾çš„æ•°æ®å’Œ reward å­¦ä¹ é—®é¢˜ç‰¹å¾ï¼‰éœ€è¦æ›´å¤šå·¥ä½œã€‚ å‡ ä¸ªé—®é¢˜ï¼š\nåœ¨å°†è¾¹æƒé‡è¾“å…¥ç½‘ç»œæ—¶ï¼Œæ–‡ç« è¿›è¡Œäº†é¢„å¤„ç†ï¼š$w_{ij}=e^{-d_{ij}/\\tau}$ï¼Œè¿™æ ·åšé™¤äº†å°†è¾“å…¥æ˜ å°„åˆ° $(0,1]$ ä¹‹å¤–ï¼Œç›¸æ¯”äºç›´æ¥è¾“å…¥ $w_{ij}=d_{ij}$ è¿˜æœ‰ä»€ä¹ˆä½œç”¨å˜›ï¼› å¦‚æœä¸é‡‡ç”¨ Soft indicatorï¼Œå®éªŒç»“æœä¼šæœ‰å¤šå¤§å˜åŒ–ã€‚ ç›¸å…³æ–‡çŒ® [1] Y. Min, Y. Bai, and C. P. Gomes, â€œUnsupervised Learning for Solving the Travelling Salesman Problem,â€ in Advances in Neural Information Processing Systems, A. Oh, T. Neumann, A. Globerson, K. Saenko, M. Hardt, and S. Levine, Eds., Curran Associates, Inc., 2023, pp. 47264â€“47278. [Online]. Available: https://proceedings.neurips.cc/paper_files/paper/2023/file/93b8618a9061f8a55825c13ecf28392b-Paper-Conference.pdfâ¤¶ [2] Z.-H. Fu, K.-B. Qiu, and H. Zha, â€œGeneralize a Small Pre-trained Model to Arbitrarily Large TSP Instances,â€ Proceedings of the AAAI Conference on Artificial Intelligence, vol. 35, no. 8, pp. 7474â€“7482, May 2021, doi: 10.1609/aaai.v35i8.16916.â¤¶ ","date":"2024-03-12T15:05:23+08:00","image":"https://files.furffisite.link/blogimg/20240312193735-df25ede3714c69d2ea8b42ba9c39f7c9-755f3.jpg","permalink":"https://blog.furffisite.link/p/read-papers/utsp/","title":"ã€è¯»è®ºæ–‡ã€‘Unsupervised Learning for Solving the Travelling Salesman Problem"},{"content":"ä¹‹å‰çš„äº‹æƒ…ï¼š\næˆ‘æŠ˜è…¾NASçš„å†ç¨‹ï¼ˆä¸€ï¼‰ æˆ‘æŠ˜è…¾NASçš„å†ç¨‹ï¼ˆäºŒï¼‰ æˆ‘æŠ˜è…¾NASçš„å†ç¨‹ï¼ˆä¸‰ï¼‰ æœ¬æ–‡ä»¥ä¸Šä¸€ç¯‡çš„è‡ªç»„ NAS ä¸ºåŸºç¡€ï¼Œå‡çº§äº†ä¸€äº›é…ç½®ï¼Œå°±æ€§ä»·æ¯”è€Œè¨€æ„Ÿè§‰è¿™é’±èŠ±å¾—ä¸ç®—å¤ªå€¼ã€‚\nç¡¬ä»¶éƒ¨åˆ† å“ç‰Œ å‹å· å‚æ•° è´­ä¹°ä»· CPU Intel E5-2690 v4 14 æ ¸ 2.6GHz è§„æ ¼è¡¨ Â¥134ï¼ˆæ´‹åƒåœ¾ï¼‰ å†…å­˜ Samsung M386A4G40DM0-CPB DDR4 2133 MHz 32GB è§„æ ¼è¡¨ Â¥155ï¼ˆæ´‹åƒåœ¾ï¼‰ æ¥å£æ‰©å±• ï¼ˆä¸»æ§ï¼‰Marvell 88SE9215 PCIe2.0x1 è½¬ SATAx4 è§„æ ¼è¡¨ Â¥75 æ€»è®¡ Â¥364 CPU åŒæ ·æ˜¯æŒ‰ç…§ä¹‹å‰çš„è®¾ç½®ï¼Œä½¿ç”¨sysbenchç²—æµ‹çš„å¯¹æ¯”å¦‚ä¸‹ï¼š\nCPU ä¸»é¢‘ TDP Events/s Avg. Latency E5-2660 v4 2.0 GHz 105 W 17251.86 1.62 ms E5-2690 v4 2.6 GHz (+30%) 135 W (+28.6%) 22860.48 (+32.5%) 1.22 ms (-24.7%) è€ƒè™‘åˆ°è¿™ä¸¤å— CPU é™¤äº†ä¸»é¢‘å’ŒåŠŸè€—å¤–å‡ ä¹ä¸€è‡´ï¼Œæ€§èƒ½æˆæ¯”ä¾‹åœ°æå‡ç¡®å®æ˜¯é¢„æ–™ä¹‹ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä¸ºäº† 30% çš„æ€§èƒ½æå‡å¤šèŠ±äº† 157.7% çš„é’±ï¼Œæ€§ä»·æ¯”ä¸ç®—é«˜ï¼Œ ä¸è¿‡ä¸»é¢‘çš„æå‡å¯¹äºä¸€äº›å¤šçº¿ç¨‹ä¼˜åŒ–ä¸å¥½çš„ä»»åŠ¡ï¼ˆä¾‹å¦‚ Minecraft æœåŠ¡å™¨ï¼‰è¿˜æ˜¯æœ‰ç”¨çš„ã€‚\næ­¤å¤–æˆ‘ä¹°åˆ°çš„ä¼¼ä¹æ˜¯è¿™ä¸ªå•†å®¶çš„æœ€åä¸€å— E5-2690 v4ï¼Œæˆ‘ä¸‹å•åå›åˆ°è¯¦æƒ…é¡µå°±å‘ç°è¿™ä¸ªå‹å·ç¼ºè´§äº†ã€‚\nå†…å­˜ æˆ‘æœ¬æ¥è®¤ä¸ºè¿™ä¸ª 32GB çš„å†…å­˜æ¡å’Œä¹‹å‰è´­ä¹°çš„ 16GB å†…å­˜æ¡æ˜¯å…¼å®¹çš„ï¼Œå› ä¸ºæˆ‘åœ¨æˆ‘çš„ç¬”è®°æœ¬ä¸Šç”¨çš„å°±æ˜¯ 8GB+32GB çš„éå¯¹ç§°åŒé€šé“çš„é…ç½®ã€‚ å†…å­˜æ¡åˆ°è´§ä¹‹åæ‰å‘ç°ï¼Œè™½ç„¶è¿™ä¸¤æ¡å•ç‹¬å®‰è£…éƒ½æ˜¯èƒ½æ­£å¸¸å¯åŠ¨çš„ï¼ˆè¯´æ˜ä¸¤æ¡éƒ½æ²¡åï¼‰ï¼Œä½†æ˜¯ä¸¤è€…åŒæ—¶å®‰è£…çš„æ—¶å€™ï¼Œæ— è®ºæ”¾åœ¨å“ªä¸¤ä¸ªæ’æ§½ï¼ŒNAS éƒ½æ— æ³•å¼€æœºã€‚ è¿™è®©æˆ‘æ„Ÿè§‰å¾ˆå¥‡æ€ªï¼Œå¥ˆä½•ä¹Ÿæ‰¾ä¸åˆ°è§£å†³æ–¹æ³•ï¼Œåªå¥½å½“ä½œæ˜¯ä¸»æ¿/CPU ä¸æ”¯æŒï¼Œå¹¶é—²ç½®åŸæ¥çš„ 16GB å†…å­˜æ¡ã€‚\nPCIEè½¬SATAæ‰©å±•å¡ è¿™ä¸ªæ˜¯åœ¨æ·˜å®ä¸Šéšä¾¿æ‰¾çš„ä¸€ä¸ªã€‚å› ä¸ºæˆ‘éœ€è¦æ¥çš„ä¹Ÿéƒ½æ˜¯æœºæ¢°ç¡¬ç›˜ï¼Œä¼ è¾“ç“¶é¢ˆè¿˜æ˜¯åœ¨æœºæ¢°ç¡¬ç›˜çš„è¯»å†™ä¸Šï¼Œæ‰€ä»¥æˆ‘å¯¹é€Ÿç‡æ²¡ä»€ä¹ˆè¦æ±‚ï¼Œèƒ½è·‘æ»¡æœºæ¢°ç¡¬ç›˜çš„è¯»é€Ÿå°±å¯ä»¥ã€‚\nè‡³äºå®ƒæ˜¯ä¸æ˜¯çœŸçš„å€¼ 75 å…ƒå°±ä¸å¾—è€ŒçŸ¥äº†ã€‚\næ‰©å±•å®Œ SATA å£ä¹‹åï¼Œæœºç®±å†…ä¸€å…±æœ‰ 7 ä¸ª SATA æ¥å£ï¼Œä½†æ˜¯åªæœ‰4ä¸ªç¡¬ç›˜ä½ï¼Œæˆ‘æƒ³ä¸‹ä¸€æ­¥åº”è¯¥æ˜¯è´­ä¹°ç¡¬ç›˜æ”¯æ¶äº†ã€‚\nè½¯ä»¶éƒ¨åˆ† Gitea Gitea æ˜¯å¼€æºçš„ä»£ç æ‰˜ç®¡å¹³å°ã€‚ è‡ªå·±æœ‰æ—¶å€™å†™äº†ä¸€äº›å·¥å…·é¡¹ç›®ï¼Œä¸æƒ³å‘ Github ä¸Šä¼ çš„æ—¶å€™ï¼ˆæ‹…å¿ƒéšç§é—®é¢˜ï¼Œä»¥åŠå¤§é™†åœ°åŒºè®¿é—® Github æœ‰æ—¶è¿æ¥ä¸ç•…ï¼‰ï¼Œå°±ä¼šä¼ åˆ°è‡ªå»ºçš„ Gitea ä¸Šã€‚\nè™½ç„¶åå­—å’Œ Gitee åªå·®ä¸€ä¸ªå­—æ¯ï¼Œä½†æ˜¯å®ƒä»¬åº”è¯¥æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚ ç±»ä¼¼çš„è‡ªå»ºä»£ç æ‰˜ç®¡å¹³å°è¿˜æœ‰ GitLab å’Œ Gogsç­‰ã€‚ ä¸ç”¨ GitLab æ˜¯å› ä¸º GitLab çš„èµ„æºå ç”¨å¤ªå¤§äº†ï¼Œå¹¶ä¸”æˆ‘ä¹ŸåŸºæœ¬ç”¨ä¸åˆ°å®ƒçš„ CI/CD åŠŸèƒ½ã€‚\nGitea å¯ä»¥ç›´æ¥ä½¿ç”¨ docker é•œåƒéƒ¨ç½²ï¼Œå…·ä½“å‚ç…§ Gitea å®˜æ–¹æ–‡æ¡£ã€‚\nImmich Immich æ˜¯å¼€æºè‡ªå»ºçš„ç›¸å†ŒæœåŠ¡ï¼Œç±»ä¼¼äºè°·æ­Œç›¸å†Œï¼Œæä¾›äº†å›¾ç‰‡ç®¡ç†ã€äººè„¸è¯†åˆ«ã€åœ°å›¾å’Œæ™ºèƒ½æœç´¢ç­‰åŠŸèƒ½ï¼Œå¹¶ä¸”åœ¨ IOSã€Android å’Œç½‘é¡µç«¯éƒ½æœ‰å®˜æ–¹çš„å®¢æˆ·ç«¯ã€‚\nè¿™ä¸ªé¡¹ç›®å„æ–¹é¢éƒ½æŒºä¸é”™çš„ï¼Œç¼ºç‚¹æ˜¯ç‰ˆæœ¬æ›´æ–°æœ‰ç‚¹å¤ªå¿«äº†ï¼Œæœ€å¿«çš„æ—¶å€™ä¸€å‘¨èƒ½å‘ä¸‰å››ä¸ªç‰ˆæœ¬ã€‚å½“ç„¶å¯¹äºé¡¹ç›®è€Œè¨€è¿™æ˜¯å¥½äº‹ï¼Œæ˜¯é¡¹ç›®æ´»è·ƒçš„è¯æ˜ï¼Œä½†æ˜¯å¯¹äºä½¿ç”¨ä½“éªŒè€Œè¨€å°±ä¸é‚£ä¹ˆå¥½äº†ã€‚ å®ƒæ›´æ–°çš„æ—¶å€™å¯èƒ½ä¼šå¼•å…¥ breaking changesï¼Œè¿™å°±è¦æ±‚æ¯æ¬¡æ›´æ–°å‰éƒ½è¦åˆ°å…¶ github çš„å‘å¸ƒé¡µæŸ¥çœ‹å‡çº§å‰çš„æ³¨æ„äº‹é¡¹ï¼Œç„¶åæ‰èƒ½ç”¨ docker compose æ‹‰é•œåƒã€‚ æ‹‰é•œåƒçš„è¿‡ç¨‹ä¹Ÿæœ‰äº›æŠ˜ç£¨ï¼Œå› ä¸ºé•œåƒå®åœ¨å¤ªå¤§äº†ã€‚\nå®˜æ–¹æ–‡æ¡£é‡Œç»™å‡ºäº†ä½¿ç”¨ docker compose éƒ¨ç½² Immich çš„æ–¹æ³•ã€‚\nLANraragi LANraragi æ˜¯ç”¨ Perl è¯­è¨€ç¼–å†™çš„è‡ªå»ºæ¼«ç”»åº“å’Œæ¼«ç”»é˜…è¯»å™¨ã€‚ ä¼˜åŠ¿æ˜¯é€šè¿‡æµè§ˆå™¨è®¿é—®ï¼Œä¸”æ”¯æŒç›´æ¥ä» zipã€tar.gz ç­‰å‹ç¼©æ–‡ä»¶/å½’æ¡£æ–‡ä»¶è¯»å–å›¾ç‰‡ï¼Œè€Œä¸ç”¨æ‰‹åŠ¨è§£å‹ã€‚\nç¼ºç‚¹æ˜¯å®ƒå¯¹ unicode çš„æ”¯æŒä¸å¤ªå¥½ï¼Œæˆ‘è§‰å¾— Lanraragi åœ¨ç®¡ç†æ¼«ç”»æ–¹é¢çš„åŠŸèƒ½ä¹Ÿæ¯”è¾ƒæ¬ ç¼ºï¼Œä¸ç®—ç‰¹åˆ«å¥½ç”¨ã€‚ å¯ä»¥å…ˆæ‰¾æ‰¾å®ƒçš„æ›¿ä»£å“ï¼Œæ‰¾ä¸åˆ°çš„è¯ä¸å¦¨æœ‰ç©ºè‡ªå·±åŠ¨æ‰‹ç”¨ golang å®ç°ä¸€ä¸ªã€‚\nå®˜æ–¹æ–‡æ¡£ç»™å‡ºäº†ä½¿ç”¨dockeréƒ¨ç½²çš„æ–¹æ³•ã€‚\nä¸»é¡µï¼ˆhomerï¼‰ NASä¸Šè¿è¡Œçš„æœåŠ¡å¤šäº†ï¼Œæ¯æ¬¡è®¿é—®æœåŠ¡éƒ½è¦è¾“åœ°å€ï¼ˆæ— è®ºæ˜¯ ip + ç«¯å£è¿˜æ˜¯å†…ç½‘åŸŸåï¼‰ä¼šå¾ˆéº»çƒ¦ï¼Œäºæ˜¯ç”¨ homer æ­å»ºäº† NAS çš„å…¥å£é¡µã€‚\nç”±äºæ˜¯çº¯é™æ€çš„ç½‘é¡µï¼ˆæ”¹å®Œé…ç½®ä¹Ÿä¸éœ€è¦é‡æ–°ç¼–è¯‘ä¹‹ç±»çš„ï¼‰ï¼Œéƒ¨ç½²çš„æ—¶å€™è¿›é¡¹ç›®çš„ release é¡µä¸‹è½½ç¼–è¯‘å¥½çš„ zip æ–‡ä»¶è§£å‹ï¼Œç„¶åç›´æ¥åœ¨ nginx é‡Œæ·»ä¸€ä¸ª server å°±è¡Œï¼Œä¹Ÿå¯ä»¥æ”¹ defaultï¼Œè®©å®ƒæˆä¸ºè·¯ç”±æ— åŒ¹é…æ—¶çš„é»˜è®¤é¡µé¢ã€‚é…ç½®æ—¶åªè¦æ”¹assets/config.ymlï¼Œåœ¨æµè§ˆå™¨é‡Œåˆ·æ–°é¡µé¢ï¼ˆå¯èƒ½éœ€è¦åœ¨å¼€å‘è€…å·¥å…·çš„ networks é‡Œ Disable Cacheï¼‰å°±èƒ½çœ‹åˆ°æ›´æ”¹äº†ã€‚\nç™¾åº¦ç½‘ç›˜å®¢æˆ·ç«¯ ä¹‹å‰åœ¨å¤ä¹ å¤‡è€ƒçš„æ—¶å€™ï¼Œæœ‰å¾ˆå¤šè€ƒç ”èµ„æ–™æ˜¯é€šè¿‡ç™¾åº¦ç½‘ç›˜æµä¼ çš„ã€‚ åˆå› ä¸ºç™¾åº¦ç½‘ç›˜çš„é™é€Ÿï¼Œå’Œå®ƒçš„ä¸€äº›æ“ä½œè®©æˆ‘ä¸æ˜¯å¾ˆæƒ³åœ¨æœ¬æœºå®‰è£…å®ƒçš„å®¢æˆ·ç«¯ï¼Œå‚¬ç”Ÿäº†æˆ‘åœ¨ NAS ä¸Šéƒ¨ç½²å…¶å®¢æˆ·ç«¯çš„éœ€æ±‚ã€‚ ä¸€æœæœç„¶æœ‰å¤§ä½¬åšå¥½äº†ç™¾åº¦ç½‘ç›˜å®¢æˆ·ç«¯çš„ docker é•œåƒï¼Œå…¶ä¸­ä¹‹ä¸€æ˜¯ gshang2017 åšçš„ ã€‚\næŠŠæŒ‡ä»¤è½¬æ¢æˆdocker-compose.yamlæ–‡ä»¶ï¼Œç„¶ådocker compose up -dï¼Œä¸å‡ºæ„å¤–ç”¨æµè§ˆå™¨è®¿é—® NAS çš„ 5800 ç«¯å£å°±èƒ½çœ‹åˆ°ç™»å½•ç•Œé¢äº†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 services: baidunetdisk: image: johngong/baidunetdisk:latest volumes: - ./config:/config - \u0026lt;path to downloads\u0026gt;:/config/baidunetdiskdownload container_name: baidunetdisk ports: - 5800:5800 # web - 5900:5900 # vnc restart: unless-stopped environment: - VNC_PASSWORD=12345678 - USER_ID=1000 - GROUP_ID=1000 - NOVNC_LANGUAGE=\u0026#34;zh_Hans\u0026#34; å› ä¸ºè¿™ä¸ªé•œåƒæ˜¯ä»¥å®˜æ–¹çš„ linux å®¢æˆ·ç«¯ä¸ºåŸºç¡€åˆ¶ä½œçš„ï¼ŒåŠŸèƒ½åŸºæœ¬ä¸Šä¸ä¹‹ç›¸åŒã€‚é™¤äº†å¹¿å‘Šç‚¹ä¸å¼€ï¼ˆè¿™æ˜¯å¥½äº‹ï¼‰ä¹‹å¤–æˆ‘åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­æ²¡æœ‰é‡åˆ°ä»€ä¹ˆé—®é¢˜ã€‚\né¥¥è’æœåŠ¡å™¨ æˆ‘çš„èˆå‹æƒ³è¦è”æœºç©é¥¥è’ï¼ˆDon\u0026rsquo;t Starve (Together)ï¼‰ï¼Œäºæ˜¯æ‹œæ‰˜æˆ‘åœ¨ NAS ä¸Šæ­äº†ä¸€ä¸ªé¥¥è’æœåŠ¡å™¨ï¼ˆä¸è¿‡æˆ‘è‡ªå·±æ²¡ä»€ä¹ˆå…´è¶£å°±æ˜¯å•¦ï¼‰ã€‚\næˆ‘åœ¨ Docker ä¸Šæ²¡æ‰¾åˆ°ä¸‹è½½é‡è¾ƒå¤šçš„é•œåƒï¼Œäºæ˜¯æŒ‰ç…§çŸ¥ä¹å’Œ Fandom wiki çš„æ•™ç¨‹æ­å»ºäº†ç¯å¢ƒï¼ˆé…ç½®èµ·æ¥è¿˜æŒºéº»çƒ¦ï¼‰ï¼Œç„¶åå†™äº†dnst.serviceè®©å®ƒä½œä¸º systemd æœåŠ¡è¿è¡Œå’Œè‡ªå¯åŠ¨ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 [Unit] Description=DoNotStarveTogether Server After=network.target [Service] User=steam Group=steam Type=simple WorkingDirectory=/home/steam ExecStart=/home/steam/rundst.sh TimeoutStopSec=2min Restart=always [Install] WantedBy=multi-user.target è™šæ‹ŸåŒ–ï¼ˆKVMï¼‰ å…³äºè™šæ‹Ÿæœºï¼Œæˆ‘ä¹‹å‰åªç”¨è¿‡å›¾å½¢ç•Œé¢çš„ VirtualBoxï¼Œè¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡æ¥è§¦ Linux æœåŠ¡å™¨ä¸Šå¸¸ç”¨çš„ Kernel-based Virtual Machineï¼ˆKVMï¼‰ã€‚ æˆ‘æ˜¯æŒ‰ç…§è¿™ç¯‡æ•™ç¨‹åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…çš„KVMï¼ŒæŒ‰ç…§è¿™ç¯‡æ•™ç¨‹åœ¨æœ¬æœºï¼ˆArch Linuxï¼‰å®‰è£…äº†Virtual Machine Managerã€‚\nç›®å‰åªæ˜¯åœ¨è™šæ‹Ÿæœºé‡Œè£…å¥½äº† Ubuntu ç³»ç»Ÿï¼Œè¿˜æ²¡æœ‰æ·±å…¥æŠ˜è…¾ã€‚\n","date":"2024-03-09T23:53:36+08:00","image":"https://files.furffisite.link/blogimg/20240310022612-8671164f59f21e5d03de82e41e7073d5-7f2c7.jpg","permalink":"https://blog.furffisite.link/p/nas-4/","title":"æˆ‘æŠ˜è…¾ NAS çš„å†ç¨‹ï¼ˆå››ï¼‰ï¼šä¸€äº›å‡çº§"},{"content":"è€ƒç ”åˆè¯•ç»“æŸåï¼Œæˆ‘åœ¨æ·˜å®ä¸Šç»™è‡ªå·±ä¹°äº†ä¸ª 64GB çš„ LCD ç‰ˆ Steam Deckï¼Œå½“æ—¶ï¼ˆ2023å¹´12æœˆåº•ï¼‰èŠ±äº†ï¿¥2885.90.\næ‰©å®¹ç¡¬ç›˜ä¸æ¢å¤ç³»ç»Ÿ æˆ‘æ˜¯ä¸ºäº†çœé’±æ‰ä¹°çš„ 64GB ç‰ˆæœ¬ï¼Œä½†æ˜¯ 64GB çš„å¤–å­˜æ˜¾ç„¶ä¸å¤Ÿç”¨ï¼Œæ‰€ä»¥æˆ‘åˆä¹°äº†ä¸€å— 2230 å°ºå¯¸çš„ 2TB NVMe ç¡¬ç›˜ï¼ˆè¥¿æ•° SN740ï¼‰ï¼Œç¡¬ç›˜+æ•£çƒ­ç‰‡å…±èŠ±è´¹ ï¿¥744.90. è¿™æ ·ç®—ä¸‹æ¥è´­ä¹° 64GB ç‰ˆæœ¬è‡ªå·±åŠ ç¡¬ç›˜æ¯”ç›´æ¥ä¹°å•†å®¶æ”¹çš„ 2TB ç‰ˆæœ¬åˆ’ç®—ä¸”æ›´æœ‰ä¿éšœã€‚\nä¸‹é¢æ˜¯æ›´æ¢ç¡¬ç›˜åŠå…¶åç»­æ“ä½œçš„æ­¥éª¤ã€‚\nç¬¬ä¸€æ­¥ï¼šå¤‡ä»½å­˜æ¡£ å¦‚æœæ˜¯åˆšåˆ°æ‰‹çš„æ–°æœºï¼Œæˆ–è€…æœ‰ç¡¬ç›˜ç›’æ”¯æŒæ‹†ä¸‹æ¥çš„ 64GB çš„ç¡¬ç›˜çš„è¯å€’ä¹Ÿä¸å¿…è¦è¿™ä¸€æ­¥ã€‚ å¦‚æœæ‹¿åˆ°æ‰‹ä¹‹åå·²ç»ç©äº†ä¸€æ®µæ—¶é—´ï¼Œæ¸¸æˆä¸æ”¯æŒ steam äº‘å­˜æ¡£ï¼ˆæˆ–è€…å„ç§åŸå› å¯¼è‡´æ²¡æœ‰åŒæ­¥æˆåŠŸï¼‰ï¼Œä¸”æ‰‹è¾¹æ²¡æœ‰ç¡¬ç›˜ç›’çš„è¯ï¼Œä¸€å®šè¦åœ¨æ›´æ¢ç¡¬ç›˜ä¹‹å‰å¤‡ä»½ä¸€ä¸‹ Steam Deck ä¸Šçš„æ¸¸æˆå­˜æ¡£ã€‚\nè¿›å…¥ SteamOS çš„æ¡Œé¢æ¨¡å¼åæ’å…¥ U ç›˜ï¼Œä½¿ç”¨æŒ‡ä»¤æˆ–å›¾å½¢ç•Œé¢å¤åˆ¶æ–‡ä»¶å¤¹ /home/deck/.local/share/Steam/steamapps/compatdata åˆ° U ç›˜å†…ã€‚\nç¬¬äºŒæ­¥ï¼šæ›´æ¢ç¡¬ç›˜ æ›´æ¢ç¡¬ç›˜çš„æ“ä½œå¯ä»¥ç›´æ¥å‚è€ƒ iFixit çš„æ•™ç¨‹ [1]ã€‚\nç¬¬ä¸‰æ­¥ï¼šæ¢å¤SteamOS è¿™éƒ¨åˆ†çš„æ“ä½œå¯ä»¥å‚è€ƒ Steam å®˜æ–¹çš„æ•™ç¨‹ [2]ï¼Œæˆ‘åœ¨æ­¤è®°å½•ä¸€ä¸‹æˆ‘è¸©åˆ°çš„å‘ï¼š\nSteam æä¾›çš„é•œåƒä¸èƒ½ä½¿ç”¨ Ventoy å¯åŠ¨ï¼Œåªèƒ½è€è€å®å®ç”¨å·¥å…·ï¼ˆRufus / balenaEtcher / ddï¼‰å†™åˆ°ç©º U ç›˜æˆ– microSD å¡å†…ï¼› æˆ‘æœ€å¼€å§‹ç”¨çš„æ˜¯ U ç›˜ï¼Œä½†æ˜¯åœ¨ Steam Deck ä¸Šä» U ç›˜å¯åŠ¨æ—¶åœ¨é»‘å±å¡ä½äº†ï¼Œåé¢åœ¨ reddit ç”¨æˆ·çš„å»ºè®®ä¸‹ [3] æ¢ç”¨äº† microSD å¡ï¼ˆä¸‰æ˜Ÿ EVOPlus 64GBï¼‰æ‰é¡ºåˆ©è¿›å…¥æ¡Œé¢ï¼ˆä¸çŸ¥æ˜¯ hub çš„é—®é¢˜è¿˜æ˜¯ U ç›˜çš„é—®é¢˜ï¼Œè¸©è¿™ä¸ªå‘è®©æˆ‘å¤šèŠ±äº†ä¸¤ä¸‰ä¸ªå°æ—¶ï¼‰ã€‚ æ¢å¤å¥½ç³»ç»Ÿåå°±å¯ä»¥å¼¹å‡º U ç›˜æˆ– microSD å¡ï¼Œä»ç¡¬ç›˜å¯åŠ¨äº†ï¼Œä¹‹åç³»ç»Ÿåˆå§‹åŒ–çš„æ­¥éª¤å’Œåˆšæ‹¿åˆ°æœºå™¨æ—¶çš„ä¸€æ ·ã€‚\nç¬¬å››æ­¥ï¼šç¡¬ç›˜åˆ†åŒº è¿›å…¥æ¡Œé¢æ¨¡å¼ï¼Œä½¿ç”¨ KDE Partition Manager æŒ‰ç…§éœ€æ±‚è°ƒæ•´åˆ†åŒºï¼Œå¦‚æœæœ‰åŒç³»ç»Ÿéœ€æ±‚çš„è¦ç»™ Windows é¢„ç•™å¥½å®‰è£…ç©ºé—´ï¼ˆæˆ‘ç•™äº† 250GBï¼‰ï¼Œå¹¶ä¸”æŠŠä¸¤ä¸ªç³»ç»Ÿå…±äº«çš„æ¸¸æˆæ–‡ä»¶åˆ†åŒºæ ¼å¼åŒ–ä¸º NTFS æ–‡ä»¶ç³»ç»Ÿã€‚\næˆ‘çš„åˆ†åŒºæ–¹æ¡ˆå¦‚ä¸‹ï¼š\nå…¶ä¸­ï¼Œæˆ‘ç»™ SteamOS çš„ home åˆ†åŒºåˆ†é…äº† 200GBï¼Œç”¨äºå­˜æ”¾åªæœ‰ SteamOS ç”¨å¾—åˆ°çš„å·¥å…·ï¼Œå¦å¤– SteamOS ä¼šé»˜è®¤æŠŠæ¸¸æˆå­˜æ¡£ã€è¿è¡Œç¯å¢ƒå’Œæ¸¸æˆé¢„ç¼–è¯‘çš„ç€è‰²å™¨æ”¾åœ¨è¿™é‡Œï¼Œç›®å‰çš„ä½¿ç”¨æƒ…å†µå¦‚ä¸‹ï¼š\nç„¶åé…ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½ï¼Œè¿™ç®—æ˜¯ Linux ç”¨æˆ·çš„åŸºæ“å§ï¼Œæˆ‘å°±ä¸èµ˜è¿°äº†ï¼Œå¯ä»¥å‚è€ƒ [4] [5]ã€‚\né…ç½®å¥½ä¹‹åé‡å¯ï¼ˆæˆ–è€…ä½¿ç”¨ sudo mount -a æŒ‚è½½æ–°åˆ†åŒºï¼‰ï¼Œè¿›å…¥ Steam åœ¨æ–°åˆ†åŒºä¸Šåˆ›å»ºæ¸¸æˆåº“å³å¯ã€‚\nå®‰è£…åŒç³»ç»Ÿ é¦–å…ˆè¦æ˜ç¡®è‡ªå·±æœ‰æ²¡æœ‰åœ¨ Steam Deck ä¸Šå®‰è£…åŒç³»ç»Ÿçš„éœ€æ±‚ï¼Œæˆ‘è¦è£… Windows æ˜¯å› ä¸ºï¼š\næœ‰äº› Windows æ¸¸æˆä¸æ”¯æŒ SteamOSï¼› å¯¹äºé Steam å¹³å°çš„æ¸¸æˆï¼Œä½¿å…¶åœ¨ SteamOS ä¸Šæ­£å¸¸è¿è¡Œéœ€è¦è€—è´¹ä¸€å®šçš„ç²¾åŠ›ã€‚ ç¬¬ä¸€æ­¥ï¼šå®‰è£… Windows AtlasOS ç›¸å½“äºéå®˜æ–¹çš„ç²¾ç®€ç‰ˆ Windowsï¼Œæˆ‘è§‰å¾—åœ¨ä¾§é‡äºæ¸¸æˆçš„ Steam Deck ä¸Šå®‰è£…è¿™ä¸ªéå¸¸åˆé€‚ï¼ŒLinusTechTips ä¹Ÿå‡ºè¿‡ä¸€æœŸè§†é¢‘ä»‹ç»å®ƒ [6]ã€‚ è‡³äºè§†é¢‘è¯„è®ºé‡Œæåˆ°çš„å®‰å…¨æ€§é—®é¢˜æˆ‘å€’ä¸å¤ªæ‹…å¿ƒï¼Œå› ä¸ºæˆ‘åœ¨è¿™ä¸Šé¢æ— éå°±æ˜¯è¿è¡Œ Steam å’Œä¸€äº›æ¸¸æˆï¼Œæˆ‘çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆï¼Œè¦æ˜¯çœŸå‡ºäº†é—®é¢˜é‡è£…å°±è¡Œã€‚\nå®‰è£… AtlasOS çš„æ­¥éª¤å‚è§ [7]ã€‚æˆ‘æ¿€æ´» Windows æ—¶ç”¨çš„æ˜¯å­¦æ ¡çš„ KMS æœåŠ¡ã€‚\næ³¨æ„ï¼šå®‰è£… Windows æ—¶ä½¿ç”¨çš„ ISO æ–‡ä»¶åªèƒ½ä»è¿™ä¸ªé¡µé¢ç”Ÿæˆçš„é“¾æ¥ä¸‹è½½ï¼Œå¦åˆ™ Windows ç‰ˆæœ¬å¯¹ä¸ä¸Šï¼Œåˆ°åé¢ä½¿ç”¨ AME Wizard çš„æ—¶å€™ä¼šæŠ¥é”™ã€‚ æˆ‘è¸©ä¸­äº†è¿™ä¸ªå‘ï¼Œæµªè´¹äº†ä¸€ä¸ªå°æ—¶ã€‚\nç¬¬äºŒæ­¥ï¼šå®‰è£…é©±åŠ¨ Steam Deck ä¸Šåˆšè£…å¥½çš„ Windows ç³»ç»Ÿæ—¶æ²¡æœ‰éŸ³é¢‘è¾“å‡ºçš„ï¼ŒåŸå› æ˜¯ç¼ºå°‘ç›¸å…³é©±åŠ¨ã€‚ æ­¤æ—¶è¦æŒ‰ç…§ Steam çš„æŒ‡å— [8] ä¸‹è½½å¹¶å®‰è£…é‡Œé¢æä¾›çš„æ‰€æœ‰é©±åŠ¨ã€‚\nå¯æ˜¯è£…å®Œé©±åŠ¨åæˆ‘å‘ç°å±å¹•äº®åº¦çš„è°ƒèŠ‚è¿˜æ˜¯å­˜åœ¨ä¸€äº›é—®é¢˜ï¼šWindows é‡Œè°ƒæ•´äº®åº¦çš„èŒƒå›´æ¯” SteamOS çš„å°å¥½å¤šï¼Œä¸è¿‡è¿™ä¸å¤ªå½±å“æ—¥å¸¸ä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘å°±æ²¡ç®¡äº†ã€‚\nç¬¬ä¸‰æ­¥ï¼šåŒç³»ç»Ÿçš„å¸¸è§é—®é¢˜ ç›®å‰é‡åˆ°ä¸¤ä¸ªï¼Œè¿™æ˜¯å®‰è£…åŒç³»ç»Ÿçš„è®¡ç®—æœºéƒ½ä¼šé‡åˆ°çš„é—®é¢˜ï¼Œå¹¶é Steam Deck ç‹¬æœ‰çš„ï¼š\nåŒç³»ç»Ÿæ—¶é—´ä¸ä¸€è‡´ï¼Œè§£å†³æ–¹æ³•å¯ä»¥å‚è€ƒ [9]ï¼› åŒç³»ç»Ÿæ— æ³•å…±äº«è“ç‰™è®¾å¤‡ï¼Œè§£å†³æ–¹æ³•å‚è€ƒ [10]ï¼› åœ¨ Linux å†…æ— æ³•è®¿é—®åŒç³»ç»Ÿå…±äº«ç£ç›˜ï¼Œè§£å†³æ–¹æ³•æ˜¯å…³é—­ Windows çš„å¿«é€Ÿå¯åŠ¨ï¼Œå‚è§ [11]ã€‚ ç¬¬å››æ­¥ï¼šå®‰è£…è¾…åŠ©å·¥å…· Steam Deck Tools [12] æä¾›äº†æ”¹å–„åœ¨ Steam Deck ä¸Šä½¿ç”¨ Windows ä½“éªŒçš„ä¸€ç³»åˆ—å·¥å…·ï¼ŒåŒ…æ‹¬æ‰‹æŸ„æ¨¡æ‹Ÿï¼Œæ€§èƒ½ç›‘è§†å™¨ï¼ŒTDPæ§åˆ¶ç­‰ã€‚ å…¶ä¸­æ‰‹æŸ„æ¨¡æ‹Ÿï¼ˆSteam Controllerï¼‰æˆ‘è§‰å¾—æ˜¯å¿…è¦çš„ã€‚\nç›¸å…³é—®é¢˜ SteamOSæ›´æ–°åå¼•å¯¼æ¶ˆå¤± è¿‘æ—¥æˆ‘æ›´æ–°äº† SteamOS ç‰ˆæœ¬ï¼Œæ›´æ–°å SteamOS ä»å¯åŠ¨é¡¹èœå•æ¶ˆå¤±äº†ï¼Œæœ€ç»ˆæŒ‰ç…§ [13] æä¾›çš„ä¿®å¤æ–¹æ³•æˆåŠŸæ¢å¤å¯åŠ¨é¡¹ã€‚\nç›¸å…³èµ„æ–™ å‚è€ƒèµ„æ–™ [1] Steam Deck SSD æ›´æ¢ - iFixit ç»´ä¿®æŒ‡å—â¤¶ [2] Steam Support :: Steam Deck Recovery Instructionsâ¤¶ [3] Recovery image not booting : r/SteamDeckâ¤¶ [4] fstab - Arch Linux ä¸­æ–‡ç»´åŸºâ¤¶ [5] å¼€æœºè‡ªåŠ¨æŒ‚è½½ç¡¬ç›˜ â€” Linux latest æ–‡æ¡£â¤¶ [6] ã€å®˜æ–¹åŒè¯­ã€‘ä½ ä¸éœ€è¦æ–°ç”µè„‘(èµåŠ©)#linusè°ˆç§‘æŠ€_å“”å“©å“”å“©_bilibiliâ¤¶ [7] Installation - Atlas Documentationâ¤¶ [8] Steam Support :: Steam Deck - Windows Resourcesâ¤¶ [9] Linux Windows åŒç³»ç»Ÿæ—¶é—´ä¸ä¸€è‡´ - å°‘æ•°æ´¾â¤¶ [10] Linux ä¸ Windows åŒç³»ç»Ÿå…±äº«è“ç‰™é¼ æ ‡ - å—æµ¦æœˆâ¤¶ [11] ç»ˆææŒ‡å—ï¼šå¦‚ä½•åœ¨ Windows 10/11 ä¸­å…³é—­å¿«é€Ÿå¯åŠ¨ - HowToHiâ¤¶ [12] README | (Windows) Steam Deck Toolsâ¤¶ [13] SteamdeckåŒç³»ç»Ÿç³»ç»Ÿå¼•å¯¼é€šç”¨ä¿®å¤æŒ‡å—â€”â€”ä»¥SteamOSæ›´æ–°æ‰å¼•å¯¼ä¸ºä¾‹ - å“”å“©å“”å“©â¤¶ å…¶å®ƒèµ„æ–™ Steam Deckâ„¢ éå¸¸é€‚åˆ Deck ã€çˆ±æŠ˜è…¾ã€‘SteamDeckå®Œå…¨æŠ˜è…¾æŒ‡å—_å“”å“©å“”å“©_bilibili Steam Deckå•ç¡¬ç›˜åŒç³»ç»Ÿ+äº’é€šæ¸¸æˆåº“è¯¦ç»†æ•™ç¨‹ - å“”å“©å“”å“© Steam deckåŒç³»ç»Ÿç–‘éš¾æ‚ç—‡è®°å½•å¸– - å“”å“©å“”å“© Steam Deckä¸Šæ‰‹æŠ˜è…¾æŒ‡å— æ¢ç¡¬ç›˜ åŒç³»ç»Ÿ å†…å­˜å¡äº’é€šæ–°æ‰‹æ•™ç¨‹_å“”å“©å“”å“©_bilibili SteamDeckåŒç³»ç»Ÿå¯åŠ¨é¡¹ä¸€é”®æ›¿æ¢ä¸ºRefind - å“”å“©å“”å“© SteamDeck Windows å’Œ Steamos å…±äº«æ¸¸æˆåº“æ•™ç¨‹ - å“”å“©å“”å“© ","date":"2024-02-19T20:12:35+08:00","image":"https://files.furffisite.link/blogimg/20240220134919-e7ed5ace1e94b03d7e56a619a0f7a6d7-5ca68.jpg","permalink":"https://blog.furffisite.link/p/steamdeck-tweaking/","title":"Steam Deck æŠ˜è…¾è®°å½•"},{"content":"æˆ‘å› ä¸ºä¹‹å‰åšå®éªŒæ—¶ä¹ æƒ¯ä¸å¥½ï¼ˆä¸€è¾¹è®­ç»ƒä¸€è¾¹æ”¹ä»£ç ï¼‰ï¼Œæ²¡æœ‰ä¿ç•™å¥½å®éªŒè®°å½•æƒ¹å‡ºäº†ä¸€äº›éº»çƒ¦ï¼ˆä¸çŸ¥é“å‘å¸ƒçš„æ¨¡å‹å…·ä½“æ˜¯æ€ä¹ˆè®­ç»ƒå‡ºæ¥çš„ï¼‰ï¼Œè§‰å¾—æœ‰å¿…è¦ç¡®ç«‹å‡ æ¡åŸåˆ™é˜²æ­¢ä»¥åå†å‡ºç°ç±»ä¼¼çš„æƒ…å†µã€‚ ä¸ºäº†ç¡®ä¿æ¯æ¬¡å®éªŒéƒ½æ˜¯å®Œå…¨å¯å¤ç°çš„ï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„æƒ³æ³•ï¼š\nä½¿ç”¨ git ç®¡ç†å®éªŒä»£ç ç‰ˆæœ¬ï¼Œåœ¨ç¨‹åºå†…å¼ºåˆ¶è¦æ±‚é•¿æ—¶é—´è®­ç»ƒæ¨¡å‹å‰ commit æ‰€æœ‰ä¿®æ”¹ï¼Œå¹¶ä¸”åœ¨ commit è®°å½•å†…å†™æ¸…æ¥šæ¯æ¬¡åšå‡ºçš„æ›´æ”¹ï¼› ä½¿ç”¨loggingæ¨¡å—æ›¿ä»£printï¼Œä»¥å°†å¸¦æ—¶é—´æˆ³çš„è®°å½•åŒæ—¶è¾“å‡ºåˆ°æ§åˆ¶å°å’Œ log æ–‡ä»¶ï¼› åœ¨ç¨‹åºè¿è¡Œå‰è¾“å‡ºæ‰€æœ‰è¶…å‚æ•°ä¸è¿è¡Œæ—¶é—´ï¼› åœ¨è®­ç»ƒæ—¶ä½¿ç”¨è¿è¡Œæ—¶é—´ä¸ commit id çš„å‰å‡ ä½åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œå¹¶å°†æ­¤æ¬¡è®­ç»ƒäº§ç”Ÿçš„æ‰€æœ‰æ–‡ä»¶éƒ½ç»„ç»‡åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹å†…ï¼Œæµ‹è¯•è®°å½•å¯ä»¥å’Œæ¨¡å‹æ”¾åœ¨ä¸€èµ·ã€‚ å›ºå®šå¹¶è¾“å‡º random seedï¼› ä½¿ç”¨æœåŠ¡å™¨è®­ç»ƒæ—¶åº”åŠæ—¶ä¸‹è½½è®­ç»ƒè®°å½•ã€‚ å®ç° åŸæœ¬æƒ³è‡ªå·±å®ç°çš„ï¼Œè¿™ä¸ªæ—¶å€™å‘ç°äº† meta å¼€æºçš„ Hydra åº“ï¼Œä¼¼ä¹å®ƒæä¾›çš„åŠŸèƒ½èƒ½å®ç°å…¶ä¸­å‡ ä¸ªæƒ³æ³•ã€‚\n","date":"2023-12-26T18:07:49+08:00","image":"https://files.furffisite.link/blogimg/20240101025358-39157c666fdfaedad07996f1f3e91a67-39937.jpg","permalink":"https://blog.furffisite.link/p/experiment-record-management/","title":"å…³äºå®éªŒè®°å½•çš„ç®¡ç†"},{"content":"æœ¬æ–‡æ—¨åœ¨å›é¡¾æˆ‘è¿™ä¸‰ä¸ªæœˆå‡†å¤‡è€ƒç ”çš„ç»å†ã€‚æ— è®ºç»“æœå¦‚ä½•ï¼Œæˆ‘æƒ³ç»™è‡ªå·±ç•™ä¸‹ä¸€ä»½å¥‹æ–—çš„è®°å½•ï¼Œå¦‚æœèƒ½å¸®åˆ°åæ¥è€…é‚£å°±æ›´å¥½äº†ã€‚\nèƒŒæ™¯ åœ¨äº”æœˆä»½çš„æ—¶å€™ï¼Œæˆ‘çŸ¥é“æˆ‘å¤„åœ¨ä¿ç ”æ’åçš„è¾¹ç¼˜ï¼Œæœ‰ä¸€å®šå¯èƒ½è·å–ä¸åˆ°æ¨å…èµ„æ ¼ï¼Œäºæ˜¯æˆ‘åœ¨å½“æ—¶è´­ä¹°äº†å‡ æœ¬å‚è€ƒä¹¦ï¼Œå¹¶ä¸”å¤ä¹ äº†ä¸€å°æ®µæ—¶é—´çš„é«˜ç­‰æ•°å­¦ã€‚ ä½†æ˜¯éšç€å¤ä»¤è¥ã€é¢„æ¨å…å’Œæ¯•ä¸šå®ä¹ ç­‰å·¥ä½œçš„æ¨è¿›ï¼Œæˆ‘åŠ¨æ‘‡äº†ï¼Œä¸€åº¦è®¤ä¸ºè‡ªå·±çœŸçš„èƒ½æˆåŠŸä¿ç ”ï¼Œå®Œå…¨å°†å¤ä¹ è€ƒç ”æŠ›ä¹‹è„‘åã€‚ ç­‰åˆ°æˆ‘ååº”è¿‡æ¥çš„æ—¶å€™ï¼Œå·²ç»æ˜¯ 2023 å¹´ 9 æœˆ 18 æ—¥ï¼Œå­¦é™¢å…¬å¸ƒæ¨å…æŒ‡æ ‡åˆ†é…æ–¹æ¡ˆçš„æ—¶å€™ï¼Œå…¶ä¸­æˆ‘çš„ä¸“ä¸šçš„æ¨å…æŒ‡æ ‡ä»…ä¸ºåŒå­¦é™¢å…¶ä½™ä¸¤ä¸ªä¸“ä¸šçš„äºŒåˆ†ä¹‹ä¸€ä¸ä¸‰åˆ†ä¹‹ä¸€ï¼ˆæ€»äººæ•°ç›¸è¿‘ï¼‰ï¼Œè¿œä½äºæˆ‘çš„é¢„æœŸã€‚ ä»¥å…¬å¸ƒçš„åé¢æ•°é‡æ¥ç®—ï¼Œæ¨å…åé¢è½®ä¸åˆ°æˆ‘ï¼Œè¿™æ—¶æˆ‘æ‰æ¸…é†’â€”â€”ä¿ç ”è¿™æ¡è·¯æˆ‘è‚¯å®šæ˜¯èµ°ä¸é€šäº†ã€‚\nè€ƒç ”æ˜¯12æœˆ23æ—¥ï¼Œå½“æ—¶å·²ç»æ˜¯9æœˆ18æ—¥ï¼Œä¹Ÿå°±æ˜¯è¯´ç•™ç»™æˆ‘çš„å¤ä¹ æ—¶é—´ä»…æœ‰ä¸‰ä¸ªæœˆï¼Œå¦‚ä½•åˆç†å®‰æ’å¤ä¹ æ—¶é—´ï¼Œæœ€å¤§åŒ–æˆ‘çš„è€ƒç ”åˆ†æ•°ï¼Œä¾¿æ˜¯æˆ‘å½“æ—¶éœ€è¦è§£å†³çš„é—®é¢˜ã€‚\nè°ƒæŸ¥é˜¶æ®µ è°ƒæ•´å¿ƒæ€ æ— æ³•ä¿ç ”çš„ä¿¡æ¯è®©å½“æ—¶çš„æˆ‘é™·å…¥äº†ç»æœ›ï¼Œæ„Ÿè§‰å·²ç»æ— è·¯å¯èµ°äº†â€”â€”å› ä¸ºåœ¨å½“æ—¶çš„æˆ‘çœ‹æ¥è€ƒç ”çœŸçš„å¥½éš¾ï¼Œè€Œæˆ‘åˆæ²¡æœ‰è¿›å…¥å·¥ä½œçš„å¿ƒç†å‡†å¤‡ï¼ˆæ›´ä½•å†µè¿˜æ˜¯åœ¨äº’è”ç½‘å¯’å†¬çš„å½“ä¸‹ï¼‰ï¼Œå‡ºå›½å¯¹å®¶é‡Œé€ æˆçš„ç»æµè´Ÿæ‹…åˆå¤ªå¤§äº†ã€‚ æˆ‘å½“æ—¶ä¸€åº¦æœ‰è¿‡è½»ç”Ÿçš„å¿µå¤´ï¼Œå¥½åœ¨æˆ‘æ²¡æœ‰ä»»ä½•å®æ–½å®ƒçš„å‹‡æ°”ï¼Œè¿™æ—¶è°ƒæ•´å¥½å¿ƒæ€ï¼Œé‡æ–°æŒ¯ä½œèµ·æ¥æ˜¯æœ€é‡è¦çš„ã€‚ åœ¨å®¶äººå’Œæœ‹å‹ä»¬çš„å¸®åŠ©ä¸‹ï¼Œæˆ‘é€æ¸çœ‹å¼€äº†ï¼Œæ„è¯†åˆ°è€ƒç ”å¯èƒ½æ²¡æœ‰æƒ³è±¡ä¸­çš„é‚£æ ·è‰°éš¾ï¼Œäºæ˜¯ç¡®ç«‹äº†è€ƒç ”çš„ç›®æ ‡ã€‚\nç¡®å®šç›®æ ‡ åœ¨åŠªåŠ›å¤ä¹ çš„åŒæ—¶ï¼Œé€‰æ‹©ä¸€ä¸ªå¥½çš„ç›®æ ‡é™¢æ ¡åŒæ ·é‡è¦ï¼Œå› ä¸º 10 æœˆåˆå°±è¦æŠ¥åäº†ã€‚ åˆ«çš„è€ƒç ”åŒå­¦å¯ä»¥é€šè¿‡ä¹‹å‰å‡ ä¸ªæœˆçš„å¤ä¹ æ—¶é—´æ‰¾å‡†è‡ªå·±çš„å®šä½ï¼Œä»è€Œå†³å®šå¥½ä¸€ä¸ªåŒ¹é…è‡ªå·±æ°´å¹³çš„å­¦æ ¡ã€‚ ç›¸è¾ƒäºä»–ä»¬ï¼Œæˆ‘åªèƒ½åœ¨ä¸¤å‘¨çš„æ—¶é—´å†…ç¡®å®šä¸€ä¸ªæˆ‘é€šè¿‡ä»…ä»…ä¸‰ä¸ªæœˆçš„å¤ä¹ æ—¶é—´æœ‰è¾ƒå¤§æŠŠæ¡è€ƒä¸Šçš„å­¦æ ¡å’Œä¸“ä¸šã€‚\né¦–å…ˆæ’é™¤æœ¬æ ¡ï¼Œç»è¿‡ä¿ç ”è¿™äº‹æˆ‘å·²ç»ä¸æƒ³åœ¨æœ¬æ ¡å¾…ç€äº†ï¼ˆæ›´ä½•å†µå­¦æ ¡æŒºçƒ­é—¨çš„â€¦â€¦ä¸å¥½è€ƒï¼‰ã€‚ åœ¨ç”¨çˆ¬è™«æŠ“å–äº†ç ”æ‹›ç½‘çš„ä¸“ä¸šç›®å½•å¹¶åœ¨æœ¬åœ°ç­›é€‰åï¼Œæˆ‘ç­›é€‰å‡ºäº†å‡ ä¸ªç›®æ ‡ï¼ŒåŒ…æ‹¬åŒ—äº¬é‚®ç”µå¤§å­¦ã€ä¸œå—å¤§å­¦ï¼ˆç®€ç§°ä¸œå¤§ï¼‰ç­‰ã€‚ è€ƒè™‘åˆ°æˆ‘çš„å¤ä¹ æ—¶é—´å’Œä¹‹å‰é¢„æ¨å…çš„æƒ…å†µï¼Œåœ¨ä¸å®¶äººæ²Ÿé€šã€å‚è€ƒäº†ç½‘ç»œä¸Šä¸€äº›åœ¨è¯»æˆ–æ¯•ä¸šå­¦é•¿å­¦å§çš„ç»éªŒå¸–åï¼Œæˆ‘æœ€ç»ˆé€‰æ‹©äº†ç›¸å¯¹æ¯”è¾ƒå¥½è€ƒçš„ä¸œå—å¤§å­¦-è’™çº³å£«å¤§å­¦è‹å·è”åˆç ”ç©¶ç”Ÿé™¢ï¼ˆç®€ç§°ä¸œè’™ï¼‰ã€‚\nå¥½è€ƒæ˜¯æœ‰åŸå› çš„â€”â€”å› ä¸ºæ˜¯ä¸­å¤–åˆåŠçš„å­¦é™¢ï¼Œå­¦è´¹ç›¸è¾ƒäºåˆ«çš„å­¦æ ¡å’Œå­¦é™¢è´µå¾ˆå¤š[1]ï¼Œæ‰€ä»¥ç«äº‰å¯¹æ‰‹ç›¸å¯¹è¾ƒå°‘ï¼Œå¾€å¹´çš„åˆ†æ•°çº¿ä½[2]ï¼ŒæŠ¥è€ƒ-å½•å–æ¯”ä¹Ÿè¾ƒä½[3]ã€‚\nåˆ†æç°çŠ¶ ä¸œè’™ç”µå­ä¿¡æ¯ä¸“ç¡•çš„è€ƒè¯•ç§‘ç›®æ˜¯ 101 æ€æƒ³æ”¿æ²»ç†è®ºã€201 è‹±è¯­ï¼ˆä¸€ï¼‰ã€301 æ•°å­¦ï¼ˆä¸€ï¼‰å’Œ 935 è®¡ç®—æœºä¸“ä¸šåŸºç¡€ï¼ˆä¸œå—å¤§å­¦è‡ªå‘½é¢˜ï¼‰ã€‚ 935çš„è€ƒçº²ä¼šåœ¨ä¸œå¤§è®¡ç®—æœºå­¦é™¢å®˜ç½‘å‘å¸ƒ[4]ï¼ŒåŒ…æ‹¬æ“ä½œç³»ç»Ÿã€è®¡ç®—æœºç»„æˆåŸç†ã€æ•°æ®ç»“æ„ï¼Œå…¶ä¸­æ“ä½œç³»ç»Ÿå æ¯”æœ€å¤§ã€‚\nçŸ¥é“äº†è¦è€ƒä»€ä¹ˆï¼Œæ¥ä¸‹æ¥å°±è¦åˆ†æç°çŠ¶äº†ï¼Œä¾æ­¤åˆ†é…å¤ä¹ æ—¶é—´ã€‚\næˆ‘å½“æ—¶çš„çŠ¶å†µæ˜¯ï¼šé«˜æ•°åªçœ‹å®Œæé™å’Œä¸€å…ƒå‡½æ•°çš„å¾®åˆ†å­¦ï¼Œå…¶ä½™å­¦ç§‘å®Œå…¨æ²¡å¤ä¹ ã€‚ æˆ‘çš„ä¼˜åŠ¿æ˜¯è‹±è¯­ä¸é”™ï¼šå…­çº§åˆ†æ•° 605ï¼Œè‹±è¯­ä¸€çœŸé¢˜çš„é€‰æ‹©é¢˜å¤§å¤šèƒ½åœ¨ä¸€ä¸ªå°æ—¶å†…åšå®Œï¼Œä¸”æ‰£åˆ†åœ¨ 8 åˆ†ä»¥å†…ï¼Œæ‰€ä»¥å‡ ä¹ä¸ç”¨å¤ªå¤šæ—¶é—´å¤ä¹ è‹±è¯­ã€‚ 935 è¦è€ƒçš„ä¸‰é—¨æˆ‘æŒæ¡çš„ä¹Ÿä¸é”™ï¼Œåªéœ€è¦å›é¡¾ä¸€ä¸‹çŸ¥è¯†ç‚¹ï¼Œåšä¸€äº›é¢˜å³å¯ã€‚ æˆ‘çš„åŠ£åŠ¿æ˜¯æˆ‘èƒŒä¹¦å¾ˆéš¾èƒŒä¸‹æ¥ï¼Œå› æ­¤ä»¥èƒŒä¹¦ä¸ºä¸»çš„æ”¿æ²»äºæˆ‘è€Œè¨€è¾ƒä¸ºå›°éš¾ã€‚\nå¤ä¹  æˆ‘çš„åŸºç¡€å¤ä¹ é˜¶æ®µå¤§æ¦‚æ˜¯ 9 æœˆ 20 æ—¥- 11 æœˆä¸­æ—¬ï¼Œå¤§çº¦ä¸¤ä¸ªæœˆæ—¶é—´ã€‚å› ä¸ºå¤ä¹ çš„æ—¶é—´æœ‰é™ï¼Œå„ç§‘çš„å¤ä¹ æ˜¯åŒæ—¶è¿›è¡Œçš„ã€‚ å¼ºåŒ–å’Œå†²åˆºé˜¶æ®µæ˜¯ 11 æœˆä¸­æ—¬ä¸€ç›´åˆ°è€ƒè¯•å‰ã€‚\næ•°å­¦ï¼ˆä¸€ï¼‰ æ•°å­¦ä¸€åˆ†ä¸ºä¸‰ä¸ªå­ç§‘ç›®ï¼šé«˜ç­‰æ•°å­¦ã€çº¿æ€§ä»£æ•°ã€æ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡ï¼Œå æ¯”æœ€å¤§çš„æ˜¯é«˜ç­‰æ•°å­¦ï¼Œå› æ­¤åœ¨å¤ä¹ æ•°å­¦æ—¶è¦ç€é‡å‡†å¤‡é«˜ç­‰æ•°å­¦ã€‚\nåœ¨åŒå­¦çš„æ¨èä¸‹ï¼Œæˆ‘é«˜æ•°éƒ¨åˆ†è·Ÿçš„æ˜¯å¼ å®‡çš„è¯¾ï¼Œå¼ å®‡çš„ä¼˜ç‚¹æ˜¯åœ¨åŸºç¡€é˜¶æ®µè®²çš„å¾ˆå…¨é¢ï¼Œä¹Ÿä¼šé¡ºå¸¦ç€è®²ä¸€äº›æŠ€å·§ï¼Œé€‚åˆæˆ‘è¿™ç§æ—¶é—´ç´§å¼ çš„äººï¼›çº¿æ€§ä»£æ•°éƒ¨åˆ†æœ€å¼€å§‹è·Ÿçš„æ˜¯ææ°¸ä¹ï¼Œä½†æ˜¯æ²¡å¬ä¸‹å»ï¼Œåæ¥å°±è½¬æ±¤å®¶å‡¤äº†ï¼›æ¦‚ç‡è®ºéƒ¨åˆ†æ²¡æœ‰çœ‹è¯¾ï¼Œåªæ˜¯çœ‹ä¹¦å›å¿†è‡ªå·±å¤§ä¸€å­¦çš„ä¸œè¥¿ã€‚åœ¨çœ‹è¯¾çš„åŒæ—¶ï¼Œåšé¢˜å·©å›ºä¹Ÿå¾ˆé‡è¦ï¼Œæˆ‘çš„èŠ‚å¥æ˜¯çœ‹å®Œä¸€ç« çš„è¯¾å°±æŠŠã€Šå¼ å®‡ 1000 é¢˜ã€‹å¯¹åº”çš„ç« èŠ‚çš„ Aã€Bã€C éƒ¨åˆ†åšå®Œï¼ŒC éƒ¨åˆ†çš„é¢˜åšä¸å‡ºæ¥çš„æš‚æ—¶ä¹Ÿä¸ç”¨æ·±ç©¶ã€‚\nåœ¨å¼ºåŒ–é˜¶æ®µä¸»è¦å†™ä¹‹å‰ä¸ä¼šå†™çš„C ç»„é¢˜ï¼ŒC ç»„é¢˜åšå®Œäº†å°±åšçœŸé¢˜ï¼ŒåŒæ—¶çœ‹é‡ç‚¹/å¸¸è€ƒçŸ¥è¯†ç‚¹çš„å¼ºåŒ–è¯¾ç¨‹ï¼ˆæ¥ä¸åŠå…¨çœ‹å®Œäº†ï¼‰ï¼Œä¾‹å¦‚é«˜ç­‰æ•°å­¦çš„ä¸­å€¼å®šç†ã€æ— ç©·çº§æ•°ã€çº¿æ€§ä»£æ•°çš„äºŒæ¬¡å‹ç­‰ã€‚\nå†²åˆºé˜¶æ®µæ¥ç€åšçœŸé¢˜ï¼Œä»¥åŠå¼ å®‡çš„ 8 å¥—é¢„æµ‹å·å’Œ 4 å¥—ç»ˆæé¢„æµ‹å·ã€‚\nå‚è€ƒä¹¦ç›®ï¼šå¼ å®‡åŸºç¡€ 30 è®²ã€å¼ å®‡ 1000 é¢˜ã€æ•°å­¦ä¸€çœŸé¢˜ã€å¼ å®‡ 8 å¥—é¢„æµ‹å·ã€å¼ å®‡ 4 å¥—ç»ˆæé¢„æµ‹å· è‹±è¯­ï¼ˆä¸€ï¼‰ å¦‚ä¸Šæ–‡æ‰€è¿°ï¼Œæˆ‘åªè¦åšçœŸé¢˜çš„é€‰æ‹©é¢˜å°±å¯ä»¥äº†ï¼Œå¹³æ—¶å¯ä»¥å¸¦ç€ç”¨ app èƒŒè€ƒç ”è¯æ±‡ã€‚ å†²åˆºé˜¶æ®µå†è¡¥ä¸€è¡¥å°ä½œæ–‡çš„æ ¼å¼å’Œå¤§ä½œæ–‡çš„å†™æ³•ã€‚\nå‚è€ƒä¹¦ç›®ï¼šè‹±è¯­ä¸€çœŸé¢˜é›† è®¡ç®—æœºä¸“ä¸šåŸºç¡€ï¼ˆè‡ªå‘½é¢˜ï¼‰ 935 æ˜¯ä¸œå—å¤§å­¦çš„è‡ªå‘½é¢˜ç§‘ç›®ï¼ŒåŒ…æ‹¬æ“ä½œç³»ç»Ÿã€è®¡ç®—æœºç»„æˆåŸç†ã€æ•°æ®ç»“æ„ä¸‰ä¸ªéƒ¨åˆ†ã€‚ å‡†å¤‡è‡ªå‘½é¢˜ç§‘ç›®çš„éš¾ç‚¹æ˜¯èµ„æ–™å¾ˆå°‘ï¼Œå¹¶ä¸”ç›¸æ¯”äºç»Ÿè€ƒç§‘ç›®ï¼Œè€å¸ˆå‡ºé¢˜ä¹Ÿæ¯”è¾ƒéšå¿ƒã€‚ æ ¹æ®å¾€å¹´ä¸Šå²¸çš„å­¦é•¿å­¦å§çš„ç»éªŒå¸–ï¼Œå¤ä¹  935 å¯ä»¥çœ‹ 408 çš„ç›¸å…³èµ„æ–™ï¼Œè¯¾ä¹Ÿå¯ä»¥ç›´æ¥è·Ÿç‹é“çš„ 408 è¯¾ç¨‹ã€‚ å› æ­¤æˆ‘å¤ä¹ ç”¨çš„èµ„æ–™ä¸»è¦æ˜¯ç‹é“è€ƒç ”çš„ç³»åˆ—ä¹¦ç±ã€‚\nä¸œå—å¤§å­¦ç»™å‡ºäº†ä¸‹é¢å››æœ¬ä¹¦ä½œä¸ºå‚è€ƒä¹¦ç›®ï¼š\nã€Šæ“ä½œç³»ç»Ÿæ¦‚å¿µ(ç¬¬7ç‰ˆ)ã€‹(ç¿»è¯‘ç‰ˆ) è¥¿å°”ä¼¯æŸ¥èŒ¨(Abraham Silberschatz)ã€éƒ‘æ‰£æ ¹ç­‰ï¼Œé«˜ç­‰æ•™è‚²å‡ºç‰ˆç¤¾ 2010-01 ã€Šæ•°æ®ç»“æ„(Cè¯­è¨€ç‰ˆ)ã€‹ ä½œè€…ï¼šä¸¥è”šæ•ã€å´ä¼Ÿæ°‘ å‡ºç‰ˆç¤¾ï¼šæ¸…åå¤§å­¦ æ—¶é—´ï¼š2011-07-01 ã€Šæ•°æ®ç»“æ„(ç”¨é¢å‘å¯¹è±¡æ–¹æ³•ä¸C++è¯­è¨€æè¿°ï¼Œç¬¬2ç‰ˆ)ã€‹ä½œè€…ï¼šæ®·äººæ˜† å‡ºç‰ˆç¤¾ï¼šæ¸…åå¤§å­¦ æ—¶é—´ï¼š2014-9-23 ã€Šè®¡ç®—æœºç»„æˆåŸç†ï¼ˆç¬¬2ç‰ˆï¼‰ã€‹ï¼Œä»»å›½æ—ï¼ŒISBN 978-7-121-33462-7ï¼Œ2018.1 å‰ä¸‰æœ¬æˆ‘è§‰å¾—ç”¨å¤„ä¸å¤§ï¼Œè€Œè®¡ç®—æœºç»„æˆåŸç†è¿™éƒ¨åˆ†æ®è¯´æ˜¯ç”±ä»»å›½æ—è€å¸ˆäº²è‡ªå‘½é¢˜ï¼Œæ‰€ä»¥ä»–å†™çš„æ•™ææ˜¯å¾ˆæœ‰å¿…è¦çœ‹çš„ã€‚\nåˆ°äº†å¼ºåŒ–å’Œå†²åˆºé˜¶æ®µæˆ‘åšäº† 408 çš„çœŸé¢˜ï¼Œè‡³äº 935 çš„çœŸé¢˜æˆ‘æ²¡æ‰¾åˆ°èµ„æºå°±æ²¡åšã€‚\nå‚è€ƒä¹¦ç›®ï¼šç‹é“è€ƒç ”ç³»åˆ— æ“ä½œç³»ç»Ÿ/æ•°æ®ç»“æ„ã€è®¡ç®—æœºç»„æˆåŸç†ï¼ˆä»»å›½æ— è‘—ï¼‰ã€408 çœŸé¢˜ã€935 çœŸé¢˜ï¼ˆå¦‚æœèƒ½æ‰¾åˆ°çš„è¯ï¼‰ è§†é¢‘è¯¾ï¼š ç‹é“è®¡ç®—æœºè€ƒç ” è®¡ç®—æœºç»„æˆåŸç† ã€ ç‹é“è®¡ç®—æœºè€ƒç ” æ“ä½œç³»ç»Ÿ ã€ ç‹é“è®¡ç®—æœºè€ƒç ” æ•°æ®ç»“æ„ æ€æƒ³æ”¿æ²»ç†è®º æ”¿æ²»è¿™é—¨è¯¾æˆ‘è·Ÿçš„æ˜¯å¾æ¶›çš„è¯¾ï¼Œåœ¨åŸºç¡€é˜¶æ®µä¸€è¾¹çœ‹è¯¾ä¸€è¾¹åˆ·é€‰æ‹©é¢˜ã€‚\nåˆ°äº†å†²åˆºé˜¶æ®µï¼Œç­‰è‚–å…«å‡ºæ¥å°±å†™è‚–å…«çš„é€‰æ‹©é¢˜ï¼Œè‚–å››å‡ºæ¥åç‹‚èƒŒå®¢è§‚é¢˜ï¼Œä»Šå¹´è‚–ç§€è£è€å¸ˆå‡ ä¹å…¨æŠ¼ä¸­äº†ï¼ˆè€ƒå‰è¿˜ä¸ä¿¡ï¼Œæ²¡æƒ³åˆ°è‚–è€å¸ˆçœŸçš„è¿™ä¹ˆå‰å®³ï¼‰ã€‚\nå‚è€ƒä¹¦ç›®ï¼šè€ƒç ”æ”¿æ²»æ ¸å¿ƒè€ƒæ¡ˆï¼ˆå¾æ¶›ï¼‰ã€è‚– 1000ã€è‚–å…«ã€è‚–å›› ç›¸å…³èµ„æ–™ [1] ä¸œå¤§ç ”æ‹›ç½‘ - ä¸œå—å¤§å­¦â€”è’™çº³å£«å¤§å­¦è‹å·è”åˆç ”ç©¶ç”Ÿé™¢2024å¹´ç¡•å£«ç ”ç©¶ç”Ÿæ‹›ç”Ÿç®€ç« â¤¶ [2] ä¸œå¤§ç ”æ‹›ç½‘ - 2023å¹´ä¸œå—å¤§å­¦å„é™¢ç³»æ‰€å¤è¯•åˆ†æ•°çº¿â¤¶ [3] ä¸œå¤§ç ”æ‹›ç½‘ - 2023å¹´ç¡•å£«ç ”ç©¶ç”Ÿè€ƒè¯•å½•å–æƒ…å†µæ±‡æ€»â¤¶ [4] ä¸œå—å¤§å­¦è®¡ç®—æœºç§‘å­¦ä¸å·¥ç¨‹å­¦é™¢ - 2024å¹´è®¡ç®—æœºç§‘å­¦ä¸å·¥ç¨‹å­¦é™¢ç¡•å£«ç ”ç©¶ç”Ÿå…¥å­¦è€ƒè¯•930ã€935è€ƒè¯•å¤§çº²â¤¶ ","date":"2023-12-25T11:02:45+08:00","image":"https://files.furffisite.link/blogimg/20231226003721-76bafcf83bb54ee4b8d8524cc179b790-e34bc.jpg","permalink":"https://blog.furffisite.link/p/kaoyan-stage1/","title":"è€ƒç ”ç»å† - å‡†å¤‡åˆè¯•"},{"content":"æ·±åº¦Qå­¦ä¹ ç®—æ³• ç†è®º æ·±åº¦Qå­¦ä¹ ç®—æ³•ï¼ˆDeep Q-Learning Algorithmï¼‰æ˜¯å°† Q è¡¨æ ¼æ›¿æ¢ä¸ºç¥ç»ç½‘ç»œçš„ Q å­¦ä¹ ç®—æ³•ï¼Œç”± DeepMind çš„ Mnih et al. [1][2]æå‡ºã€‚ Qè¡¨æ ¼æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•° $f: S\\times A \\rightarrow \\mathbb{R}$ï¼Œæˆ‘ä»¬è‡ªç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ç¥ç»ç½‘ç»œæ„é€ è¿™ä¸ªå‡½æ•°ï¼Œè®©å®ƒå¯ä»¥å¤„ç†è¿ç»­çš„çŠ¶æ€å’ŒåŠ¨ä½œã€‚æ­¤å¤–ï¼Œä½¿ç”¨ç¥ç»ç½‘ç»œè¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼šæˆ‘ä»¬å¯ä»¥å‘ç¥ç»ç½‘ç»œè¾“å…¥å®ä¾‹ä¿¡æ¯ $m\\in M$ ï¼Œä½¿ä¹‹å¯ä»¥è·¨å®ä¾‹å­¦ä¹ å‡½æ•° $f: M\\times S\\times A\\rightarrow \\mathbb{R}$ ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒAgentå¯ä»¥å°†å…¶åœ¨å®ä¾‹ $m_1,m_2,\\ldots~m_n$ä¸Š å­¦ä¹ åˆ°çš„ç»éªŒè¿ç§»åˆ°æœªæ›¾è§è¿‡çš„å®ä¾‹ $m_{n+1}$ ä¸Šï¼Œå¢å¼ºæ¨¡å‹çš„æ³›åŒ–æ€§èƒ½ï¼Œå‡å°‘å…¶æ¢ç´¢æ–°å®ä¾‹æ‰€éœ€çš„æ—¶é—´ã€‚\nç½‘ç»œæ›´æ–°æ–¹ç¨‹çš„è®¾è®¡ ï¼ˆä»¥ Bellman æ–¹ç¨‹ ä¸ºåŸºç¡€ï¼‰ï¼š $$Q(s_t, a_t) \\leftarrow (1-\\eta) Q(s_t, a_t) + \\eta(\\gamma\\max_{j\\in A} Q(s_{t+1}, j) + r_t)$$\næ±‚æ›´æ–°å‰ä¸æ›´æ–°åçš„å·®åˆ†ï¼š $$\\Delta Q(s_t, a_t) = -\\eta Q(s_t, a_t) + \\eta(\\gamma\\max_{j\\in A} Q(s_{t+1},j) + r_t)$$\nå³ï¼š $$\\Delta Q(s_t, a_t) = \\eta(\\gamma\\max_{j\\in A} Q(s_{t+1},j) + r_t - Q(s_t, a_t))$$\nåœ¨ç†æƒ³æƒ…å†µä¸‹å……åˆ†è®­ç»ƒæ—¶ï¼Œåº”å½“æœ‰ $$\\lim_{t\\rightarrow \\infty}\\Delta Q(s_t, a_t) = 0$$\nä¹Ÿå°±æ˜¯è¯´ï¼Œè®­ç»ƒçš„ç›®æ ‡åº”å½“æ˜¯æœ€å°åŒ– $\\Delta Q(s_t, a_t)$ï¼Œå³ç›®æ ‡å‡½æ•°ä¸ºï¼š $$L(\\theta) = \\mathrm{MSE}(Q(s_t, a_t),~\\gamma\\max_{j\\in A} Q(s_{t+1},j) + r_t)$$ å…¶ä¸­çš„ $\\mathrm{MSE}$ ä¹Ÿå¯ä»¥æ›¿æ¢ä¸ºå…¶å®ƒçš„æŸå¤±å‡½æ•°ã€‚\nå®ç° ä¸‹é¢ä»¥CartPole-v1ç¯å¢ƒä¸ºä¾‹ç¼–å†™è®­ç»ƒç¨‹åºã€‚\nå¼•å…¥ç›¸å…³çš„åº“ä»¥åŠå®šä¹‰ä¸€äº›è¶…å‚æ•°ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 from random import random, randint import gymnasium as gym import torch import torch.nn as nn from tqdm import tqdm n_actions = 2 n_states = 4 lr = 3e-4 discount = 0.95 batch_size = 128 epochs = 5000 å®šä¹‰ç¥ç»ç½‘ç»œï¼Œè¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªç®€å•çš„ä¸‰å±‚ç¥ç»ç½‘ç»œï¼Œå…¶ä¸­è¾“å‡ºå±‚æ²¡æœ‰æ·»åŠ æ¿€æ´»å‡½æ•°æ˜¯å› ä¸ºæ¿€æ´»å‡½æ•°ä¼šé™åˆ¶ç½‘ç»œçš„å€¼åŸŸè‡³ $R_{act}$ ï¼Œè®¾Qå‡½æ•°çš„å€¼åŸŸæ˜¯ $R_Q$ï¼Œ$R_Q\\nsubseteq R_{act}$ æ—¶æŸå¤±å‡½æ•°éš¾ä»¥æ”¶æ•›ï¼Œå½±å“è®­ç»ƒæ•ˆæœï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 class Net(nn.Sequential): norm_vector = torch.tensor([0.5, 1.0, 0.21, 0.5]) def __init__(self, in_feats = n_states, out_feats = n_actions, hidden = 32): super().__init__( nn.Linear(in_feats, hidden), nn.SiLU(), nn.Linear(hidden, hidden), nn.SiLU(), nn.Linear(hidden, out_feats), ) def forward(self, state): x = state/self.norm_vector # å½’ä¸€åŒ– y = super().forward(x) return y å®šä¹‰ç½‘ç»œã€ä¼˜åŒ–å™¨ä¸æŸå¤±å‡½æ•°ï¼š\n1 2 3 net = Net() optimizer = torch.optim.AdamW(net.parameters(), lr=lr, amsgrad=True) criterion = nn.SmoothL1Loss() # å‘ç°L1çš„æ•ˆæœæ¯”L2è¦å¥½ è®­ç»ƒè¿‡ç¨‹ï¼ˆåŸç¯å¢ƒæä¾›çš„ reward æ’ä¸º 1ï¼Œä¿¡æ¯å¤ªå°‘ï¼Œå› æ­¤è¿™é‡Œæ”¹ç”¨è‡ªå®šä¹‰çš„ rewardï¼Œåœ¨å€¾è§’è¿‡å¤§æˆ–ä½ç½®è¿‡è¿œæ—¶è¿›è¡Œæƒ©ç½šï¼‰ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 env = gym.make(\u0026#34;CartPole-v1\u0026#34;) state, info = env.reset() for t in tqdm(range(epochs)): # å‰å‘ä¼ æ’­ loss = 0.0 epsilon = 1 - t / epochs # åŠ¨æ€è°ƒæ•´epsilon for _ in range(batch_size): # é€‰æ‹©action ========================= row = net(state) if random() \u0026lt; epsilon: # exploration action = randint(0, n_actions-1) else: action = row.squeeze().argmax().item() # æ‰§è¡Œaction ========================= state, reward, terminated, truncated, info = env.step(action) # ä½¿ç”¨è‡ªå®šä¹‰çš„reward reward = -20.0 if terminated else 0 if abs(state[2]) \u0026gt; 0.1: # é™åˆ¶å€¾è§’ reward += -1.0 if abs(state[0]) \u0026gt; 0.3: # é™åˆ¶ä½ç½® reward += -2.0 if reward \u0026gt;= 0: reward = 1.0 # è®¡ç®—loss ========================= with torch.no_grad(): if terminated: curr_q = torch.tensor(reward) else: curr_q = net(state).max() * discount + reward loss += criterion(row[action], curr_q) if terminated or truncated: state, info = env.reset() # åå‘ä¼ æ’­ optimizer.zero_grad() (loss/batch_size).backward() torch.nn.utils.clip_grad_value_(net.parameters(), 1) optimizer.step() env.close() # ä¿å­˜checkpoint torch.save(net.state_dict(), \u0026#34;cartpole.ckpt\u0026#34;) æ¨ç†ï¼š\n1 2 3 4 5 6 7 8 9 10 11 env = gym.make(\u0026#34;CartPole-v1\u0026#34;, render_mode=\u0026#34;human\u0026#34;) state, info = env.reset() with torch.no_grad(): for t in range(2000): row = net(state) action = row.squeeze().argmax(0).item() print(row) state, reward, terminated, truncated, info = env.step(action) if terminated or truncated: state, info = env.reset() env.close() ä¸å‡ºæ„å¤–çš„è¯ï¼Œè¿è¡Œç¨‹åºåå¯ä»¥çœ‹åˆ°ç±»ä¼¼äºè¿™æ ·çš„åŠ¨ç”»ï¼Œè¯´æ˜è¿™ä¸ªç®—æ³•ä»¥åŠæˆ‘ä»¬ç¼–å†™çš„ç¨‹åºéƒ½æ˜¯æœ‰æ•ˆçš„ï¼š å®Œæ•´çš„ç¨‹åºè§Github Gistï¼Œæ¨¡å‹æƒé‡å¯ä»¥ä»è¿™é‡Œä¸‹è½½ï¼ˆè™½ç„¶è‡ªå·±è®­ç»ƒä¸€ä¸ªä¹Ÿä¸è´¹äº‹ï¼‰ã€‚\nç»éªŒå›æ”¾ ç†è®º ä¸Šé¢çš„è®­ç»ƒ Q ç½‘ç»œçš„æ–¹å¼å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œä¾‹å¦‚\næ ·æœ¬çš„åˆ©ç”¨ç‡ä½ï¼šæ¯æ¬¡é‡‡æ ·åªå¯¹åº”ä¸€æ¬¡å‰å‘ä¼ æ’­ï¼Œé‡‡æ ·å¾—åˆ°çš„æ ·æœ¬æœªè¢«å……åˆ†åˆ©ç”¨ï¼› æ ·æœ¬çš„æ—¶åºå…³è”æ€§å¤§ï¼šæ¯æ¬¡é‡‡æ ·åœ¨æ—¶é—´ä¸Šæ˜¯é«˜åº¦ç›¸å…³çš„ï¼Œä¸Šä¸€æ¬¡é‡‡æ ·çš„æœ«çŠ¶æ€å°±æ˜¯ä¸‹ä¸€æ¬¡é‡‡æ ·çš„åˆå§‹çŠ¶æ€ï¼Œå½±å“è®­ç»ƒæ•ˆæœï¼› è®­ç»ƒé€Ÿåº¦æ…¢ï¼šæ¯æ¬¡å‰å‘ä¼ æ’­åªä¼ æ’­ä¸€ç»„æ•°æ®ï¼Œé€Ÿåº¦è¾ƒæ…¢ã€‚ ä¸ºäº†ç¼“è§£ä¸Šè¿°é—®é¢˜ï¼ŒMnih et al.[2] åœ¨æå‡ºæ·±åº¦ Q å­¦ä¹ çš„åŒæ—¶ä¹Ÿæå‡ºäº†ç»éªŒå›æ”¾ï¼ˆExperience Replayï¼‰ç­–ç•¥ã€‚ å…¶ä¸»è¦æ€æƒ³æ˜¯å°†é‡‡æ ·ä¸è®­ç»ƒåˆ†ç¦»ï¼Œé‡‡æ ·æ—¶åœ¨è®°å¿†ä¸­ä¿å­˜é‡‡æ ·çš„è®°å½•ï¼Œè®­ç»ƒæ—¶éšæœºä»è®°å¿†ä¸­é€‰å–æ ·æœ¬è¿›è¡Œå‰å‘ä¸åå‘ä¼ æ’­ï¼Œä»è€Œé™ä½æ ·æœ¬é—´çš„æ—¶åºå…³è”æ€§ä¸æé«˜æ ·æœ¬åˆ©ç”¨ç‡ã€‚\næ³¨æ„åˆ°åœ¨ç®—æ³•ä¸­ï¼Œæ¯ä¸€æ­¥è®­ç»ƒéœ€è¦å››ä¸ªå€¼ï¼šå½“å‰çŠ¶æ€ $s_t$ã€åŠ¨ä½œ $a_t$ã€å›æŠ¥ $r_t$ ä»¥åŠé‡‡å–åŠ¨ä½œåçš„çŠ¶æ€ $s_{t+1}$ï¼Œå› æ­¤æ¯ä¸€æ¬¡é‡‡æ ·ååªéœ€è¦åœ¨è®°å¿†ä¸­ä¿å­˜è¿™å››ä¸ªå€¼ï¼Œç§°ä¸º experience å››å…ƒç»„ $e_t=(s_t,~a_t,~r_t,~s_{t+1})$ã€‚\nå®ç° åº“ã€è¶…å‚æ•°ã€ç½‘ç»œç»“æ„ä»¥åŠæ¨ç†éƒ¨åˆ†å‡æ²¿ç”¨ä¸Šé¢çš„ä»£ç ä»¥ä¾¿æ¯”è¾ƒï¼Œåªæ›¿æ¢è®­ç»ƒéƒ¨åˆ†ï¼Œç„¶åæ–°å¢ Experience ç±»ä¸ Memory ç±»ç”¨äºå­˜å‚¨å’Œç®¡ç†æ ·æœ¬ã€‚ ä»¥ä¸‹æ˜¯ Experience ç±»ä¸ Memory ç±»çš„ä»£ç ï¼Œè¿™é‡Œä½¿ç”¨é˜Ÿåˆ—å­˜å‚¨æœ€æ–°çš„ batch_size*10 æ¡è®°å½•ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 from typing import NamedTuple, Union class Experience(NamedTuple): \u0026#39;\u0026#39;\u0026#39;experienceå››å…ƒç»„\u0026#39;\u0026#39;\u0026#39; state: np.ndarray action: int reward: float next_state: np.ndarray class Memory(object): \u0026#39;\u0026#39;\u0026#39;å­˜å‚¨å›ºå®šæ•°é‡è®°å½•çš„é˜Ÿåˆ—\u0026#39;\u0026#39;\u0026#39; def __init__(self, buffer_size: int): self.buffer_size = buffer_size self.buffer: list[Union[Experience, None]] = [None for _ in range(self.buffer_size)] self.count = 0 def append(self, exp: Experience): \u0026#39;\u0026#39;\u0026#39;å¢åŠ è®°å½•ï¼Œå¦‚æœbufferå·²æ»¡åˆ™æ›¿æ¢æœ€æ—©çš„è®°å½•\u0026#39;\u0026#39;\u0026#39; self.buffer[self.count%self.buffer_size] = exp self.count += 1 def sample(self, k: int): \u0026#39;\u0026#39;\u0026#39;éšæœºé€‰å–kä¸ªexperienceï¼Œæ‰“åŒ…å¥½è¿”å›\u0026#39;\u0026#39;\u0026#39; if self.count \u0026lt; self.buffer_size: pool = self.buffer[:self.count] else: pool = self.buffer exp: list[Experience] = random.choices(pool, k=k) # type: ignore # æ‰“åŒ…æˆ Tensor states = torch.from_numpy(np.array([e.state for e in exp])) actions = torch.tensor([e.action for e in exp]) rewards = torch.tensor([e.reward for e in exp]) next_states = torch.from_numpy(np.array([e.next_state for e in exp])) return states, actions, rewards, next_states memory = Memory(batch_size*10) é‡‡æ ·çš„éƒ¨åˆ†ä¸åŸæ¥ç›¸åŒï¼Œè€Œåœ¨è®­ç»ƒçš„éƒ¨åˆ†ï¼Œå› ä¸ºè¿™é‡Œè®­ç»ƒæ—¶å‰å‘å’Œåå‘ä¼ æ’­éƒ½åªæœ‰ä¸€æ­¥ï¼Œæ‰€ä»¥åœ¨è®¡ç®—target_qæ—¶ä¸éœ€è¦åƒåŸæ–‡æ‰€è¿°å†»ç»“æƒé‡ï¼Œåªè¦åœ¨å…¶åå¢åŠ .detach()ç¡®ä¿åå‘ä¼ æ’­æ—¶target_qçš„æ¢¯åº¦ä¸è¢«ä¼ æ’­å°±è¡Œã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 env = gym.make(\u0026#34;CartPole-v1\u0026#34;) state, info = env.reset() batch_index = torch.arange(batch_size) for t in tqdm(range(epochs)): # é‡‡æ · ========================================= epsilon = 1 - t / epochs # åŠ¨æ€è°ƒæ•´epsilon for _ in range(batch_size//4 if t \u0026gt;= 1 else batch_size): if random.random() \u0026lt; epsilon: # exploration action = random.randint(0, n_actions-1) else: action = net(state).squeeze().argmax().item() org_state = state state, reward, terminated, truncated, info = env.step(action) # ä½¿ç”¨è‡ªå®šä¹‰çš„reward reward = -20.0 if terminated else 0 if abs(state[2]) \u0026gt; 0.1: # é™åˆ¶å€¾è§’ reward += -1.0 if abs(state[0]) \u0026gt; 0.3: # é™åˆ¶ä½ç½® reward += -2.0 if reward \u0026gt;= 0: reward = 1.0 # åŠ å…¥è®°å¿† memory.append(Experience(org_state, action, reward, state)) if terminated or truncated: state, info = env.reset() # è®­ç»ƒ ========================================= states, actions, rewards, next_states = memory.sample(batch_size) # å‰å‘ä¼ æ’­ pred_q = net(states)[batch_index, actions] target_q = (net(next_states).max(dim=-1).values * discount + rewards).detach() loss = criterion(pred_q, target_q) # åå‘ä¼ æ’­ optimizer.zero_grad() loss.backward() torch.nn.utils.clip_grad_value_(net.parameters(), 1) optimizer.step() env.close() # ä¿å­˜checkpoint torch.save(net.state_dict(), \u0026#34;cartpole-replay.ckpt\u0026#34;) å®Œæ•´ç¨‹åºè§ Github Gistï¼Œè¿è¡Œç¨‹åºï¼Œå‘ç°ä¸¤ä¸ªç¨‹åºåœ¨batch_size=128å’Œepochs=5000çš„æƒ…å†µä¸‹ï¼ŒåŸæ¥çš„ç¨‹åºåœ¨æˆ‘çš„è½»è–„æœ¬ä¸Šéœ€è¦è®­ç»ƒ 3 åˆ†é’Ÿï¼Œè€Œå¾—ç›Šäºæ‰¹å¤„ç†çš„è®­ç»ƒè¿‡ç¨‹ä»¥åŠé‡‡æ ·æ•°çš„å‡å°‘ï¼Œæœ‰ç»éªŒå›æ”¾çš„è®­ç»ƒåªè¦ 15 ç§’å°±èƒ½è¾¾åˆ°æ›´å¥½çš„æ•ˆæœã€‚\nç»§ç»­å¢åŠ batch_sizeæˆ–epochsï¼Œæ•ˆæœæ›´ä½³ã€‚ä»¥ä¸‹æ˜¯batch_size=256ã€epochs=5000çš„ç»“æœï¼Œè®­ç»ƒåªèŠ±äº† 28 ç§’ã€‚\nå‚è€ƒæ–‡çŒ® [1] Mnih, V., Kavukcuoglu, K., Silver, D., Graves, A., Antonoglou, I., Wierstra, D., \u0026amp; Riedmiller, M. (2013). Playing Atari with Deep Reinforcement Learning (arXiv:1312.5602). arXiv. https://doi.org/10.48550/arXiv.1312.5602â¤¶ [2] Mnih, V., Kavukcuoglu, K., Silver, D., Rusu, A. A., Veness, J., Bellemare, M. G., Graves, A., Riedmiller, M., Fidjeland, A. K., Ostrovski, G., Petersen, S., Beattie, C., Sadik, A., Antonoglou, I., King, H., Kumaran, D., Wierstra, D., Legg, S., \u0026amp; Hassabis, D. (2015). Human-level control through deep reinforcement learning. Nature, 518(7540), Article 7540. https://doi.org/10.1038/nature14236â¤¶â¤¶ ","date":"2023-08-22T10:51:10+08:00","image":"https://files.furffisite.link/blogimg/20230822110113-5ef18ab6cfb63d5a730bbd8e077231e7-6ba69.jpg","permalink":"https://blog.furffisite.link/p/deep-q-learning/","title":"ã€RLå­¦ä¹ ç¬”è®°ã€‘æ·±åº¦Qå­¦ä¹ ç®—æ³•ä¸ç»éªŒå›æ”¾"},{"content":"æˆ‘å¼€å§‹æŠ˜è…¾NASçš„åŸå› å¾ˆç®€å•â€”â€”ç¬”è®°æœ¬çš„å­˜å‚¨ç©ºé—´ä¸å¤Ÿäº†ï¼Œå½“æ—¶å›ºæ€ç¡¬ç›˜çš„ä»·æ ¼è¿œæ²¡æœ‰ç°åœ¨è¿™ä¹ˆä¾¿å®œï¼Œç§»åŠ¨ç¡¬ç›˜éšèº«æºå¸¦æœ‰ç‚¹éº»çƒ¦ï¼Œæ‰€ä»¥å°±æƒ³ç»™ç¡¬ç›˜è¿ä¸Šç½‘ï¼Œè¿™æ ·åªè¦æœ‰ç½‘å°±èƒ½è®¿é—®ã€‚\nå½“æ—¶æ˜¯2021å¹´3æœˆï¼Œæˆ‘æ‰‹è¾¹æœ‰é—²ç½®çš„æ ‘è“æ´¾ 3B+ï¼ˆ19 å¹´èŠ± ï¿¥279 ä¹°çš„ï¼‰ï¼Œäºæ˜¯ä¸€ä¸ªå¾ˆæœ´ç´ çš„æƒ³æ³•å°±å½¢æˆäº†â€”â€”ä¹°ä¸€ä¸ª SATA-USB çš„ç¡¬ç›˜ç›’è¿æ¥æœºæ¢°ç¡¬ç›˜ï¼Œå†ç»™æ ‘è“æ´¾è¿ä¸Šç½‘çº¿ï¼Œåšæˆä¸€ä¸ªç®€é™‹çš„ NASï¼ˆåæ¥æ‰çŸ¥é“æœ‰ NAS è¿™ä¸ªåå­—ï¼‰ã€‚æˆ‘åæ¥ä¹Ÿçš„ç¡®æ˜¯è¿™ä¹ˆæ“ä½œçš„ï¼Œç¡¬ç›˜ç›’ä¹°çš„ç»¿è”çš„ï¼ŒèŠ±äº†ï¿¥99ã€‚ä½¿ç”¨åå‘ç°æ ‘è“æ´¾ 3B+ çš„ USB2.0 æ¥å£å¤ªæ…¢äº†ï¼Œäºæ˜¯åŠå¹´åï¼ˆ2021.9ï¼‰ä¹°äº†å¸¦ USB3 çš„æ ‘è“æ´¾4Bï¼ŒèŠ±äº†ï¿¥578ï¼ˆå½“æ—¶è¿™ä¸ªä»·æ ¼å·²ç»å¾ˆè´µäº†ï¼Œæƒ³ä¸é€šä¸ºä»€ä¹ˆè‡ªå·±é‚£ä¸ªæ—¶å€™å†³å®šè¦ä¹°ï¼‰ï¼Œæ‰€ä»¥è¿™ä¸€å¥—ä¸ç®—ç¡¬ç›˜çš„ä»·æ ¼æ˜¯ï¿¥677ã€‚\næˆ‘ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿæ˜¯æ ‘è“æ´¾å®˜æ–¹æä¾›çš„ Raspbianï¼Œåœ¨ä¸Šé¢å®‰è£…äº†\nsambaï¼ˆæ–‡ä»¶æœåŠ¡ï¼‰ã€ è‡ªå·±å†™çš„å½•æ’­å§¬ã€ aria2ï¼ˆBT ä¸‹è½½ï¼‰ã€ Corednsï¼ˆå› ä¸ºå­¦æ ¡çš„DNSæœåŠ¡å™¨æŒ‚è¿‡ä¸€æ¬¡ï¼‰ã€‚ æˆ‘è®¤ä¸ºæ ‘è“æ´¾ä½œä¸º NAS ä¸»è¦çš„ä¼˜ç‚¹æ˜¯ï¼š\nç»“æ„ç®€å•ï¼Œæ’ç”µå°±èƒ½ç”¨ï¼Œä¸”æ˜“äºæºå¸¦ï¼› è€—ç”µé‡å¾ˆä½ï¼› è‡ªå¸¦ GPIO æ¥å£ï¼Œå¯ä»¥å¤–æ¥ä¸€äº› LED æˆ– LCD 1602 æ˜¾ç¤ºæœåŠ¡å™¨çŠ¶æ€ç­‰ï¼Œæˆ–æ˜¯å¢åŠ ä¼ æ„Ÿå™¨ä»¥æ”¶é›†æ•°æ®ï¼Œè¿™å¯¹äºâ€œæŠ˜è…¾ç±»â€ç©å®¶åˆæ˜¯ä¸€ä¸ªå¯æŠ˜è…¾çš„ç‚¹ã€‚ ç¼ºç‚¹æ˜¯ï¼š\nç¬¬ä¸€ï¼Œå®ƒçš„ CPU æ˜¯ 32 ä½ arm æ¶æ„çš„ï¼Œè¿™å¯¼è‡´è®¸å¤šæ²¡æœ‰æä¾› 32 ä½ arm ç‰ˆæœ¬çš„ç¨‹åºå®ƒéƒ½æ— æ³•è¿è¡Œï¼Œä¾‹å¦‚ qbittorrentã€æ•°æ®åº“ã€jellyfin ç­‰ï¼Œè€Œå—é™äºå…¶æ€§èƒ½ï¼Œä»æºä»£ç ç¼–è¯‘è¿™æ¡è·¯ä¹Ÿä¸ç®€å•ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ docker buildx è·¨å¹³å°ç¼–è¯‘ï¼Œä½†æ˜¯å½“æ—¶çš„æˆ‘è¿˜ä¸ä¼šæè¿™äº›ï¼‰ï¼› ç¬¬äºŒï¼Œæ€§èƒ½å¤ªå¼±ï¼› ç¬¬ä¸‰ï¼Œæ€§ä»·æ¯”ä¸é«˜ã€‚ ç›¸è¾ƒäºå…¶ä¼˜ç‚¹ï¼Œå®ƒçš„ç¼ºç‚¹è¿˜æ˜¯å¤ªçªå‡ºäº†ï¼Œäºæ˜¯æˆ‘åœ¨ä¸€å¹´åï¼ˆ2022.10ï¼‰æ¢äº†amd64æ¶æ„çš„NASã€‚\n","date":"2023-08-21T14:46:05+08:00","image":"https://files.furffisite.link/blogimg/20230821143533-8f90300e7a87f5103e8c13359c0ce9a7-a82cd.jpg","permalink":"https://blog.furffisite.link/p/nas-1/","title":"æˆ‘æŠ˜è…¾ NAS çš„å†ç¨‹ï¼ˆä¸€ï¼‰ï¼šæ ‘è“æ´¾"},{"content":"æ—¶å€¼ 2022 å¹´å›½åº†èŠ‚ï¼Œæˆ‘åœ¨æ·˜å®ç¿»äº†å¾ˆä¹…ï¼Œæ‰¾ x86/amd64 çš„ NAS æ–¹æ¡ˆï¼Œæœ€ç»ˆç›¸ä¸­äº†æ·˜å®æŸå®¶åº—å–çš„â€œé’æ˜¥ç‰ˆé»‘ç¾¤æ™–â€ï¼ŒCPU+ä¸»æ¿+é£æ‰‡+4GB å†…å­˜+äºšå…‹åŠ›å¤–å£³ä¸€å…±åªè¦ ï¿¥285ï¼Œå¤–å¸¦é»‘ç¾¤æ™–çš„å¼•å¯¼ç›˜ã€‚è¿™ä¸ªä»·æ ¼å¾ˆå¸å¼•æˆ‘ï¼Œäºæ˜¯æˆ‘æ²¡è¿‡å¤šè€ƒè™‘å°±ä¸‹å•äº†ã€‚\nè´§åˆ°ä¹‹åå‘ç°è¿™ä¸ªä¸»æ¿ä¼¼ä¹æ˜¯å·¥æ§æœºé‡Œæ‹†å‡ºæ¥çš„ï¼ŒCPU æ˜¯ 12 å¹´ Q1 å‡ºçš„ Atom D2550ã€‚ä¸»æ¿ä¸Šåªæœ‰ä¸€ä¸ª SATA å£ï¼Œå…¶ä½™çš„è¢«æ‹†æ‰äº†ï¼Œäºæ˜¯å•†å®¶å¢åŠ äº†ä¸€ä¸ª SATA è½¬ M.2 æ¥å£çš„æ¿å­æ’åœ¨ï¼ˆç–‘ä¼¼ï¼‰M.2 å£ä¸Šï¼Œè¿™æ ·å°±èƒ½æ”¯æŒåŒç¡¬ç›˜äº†ã€‚å› ä¸ºæˆ‘æƒ³è®©ç¡¬ç›˜å®Œå…¨ç”¨æ¥å­˜å‚¨æ•°æ®ï¼Œæ‰€ä»¥æˆ‘åˆèŠ± ï¿¥56.9 ä¹°äº†ä¸€ä¸ª 64GB çš„å° U ç›˜ç”¨æ¥å­˜å‚¨æ“ä½œç³»ç»Ÿã€‚\næ“ä½œç³»ç»Ÿé€‰çš„æ˜¯ Ubuntu Server 16.04ï¼Œç†ç”±æ˜¯ç›¸è¾ƒäºå•†å®¶æä¾›çš„é»‘ç¾¤æ™–ï¼Œæˆ‘æ›´ç†Ÿæ‚‰ Ubuntuã€‚è½¯ä»¶å’ŒæœåŠ¡æ–¹é¢å®‰è£…äº† sambaã€jellyfinã€qbittorrentã€coredns ç­‰ã€‚\nè¿™ä¸ªä»·æ ¼æˆ‘å¾ˆæ˜¯æ»¡æ„ï¼Œä½†æ˜¯è¿™å° NAS çš„æ€§èƒ½ä¸æ¯”æ ‘è“æ´¾é«˜å¤šå°‘ï¼Œæ¯•ç«Ÿæ˜¯åå¹´å‰çš„å¤„ç†å™¨ï¼Œå¯¼è‡´å®ƒåœ¨ä¸€äº›é«˜è´Ÿè½½çš„æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚ Jellyfin ä½¿ç”¨ ffmpeg è½¬ç æ’­æ”¾è§†é¢‘ï¼‰æœ‰äº›åŠ›ä¸ä»å¿ƒï¼Œæ’­æ”¾æ—¶å¼‚å¸¸å¡é¡¿ï¼Œæ‰€ä»¥åœ¨ä»Šå¹´å…­æœˆçš„æ—¶å€™è¶è´­ç‰©èŠ‚è‡ªå·±ç»„äº†ä¸€å°ã€‚æ¢äº†æ–°çš„ä¹‹åå‘ç°ï¼Œæ€§èƒ½ä¸Šå»äº†ï¼Œèƒ½åŒæ—¶è·‘çš„æœåŠ¡å°±å¤šäº†å¾ˆå¤šï¼Œå¯ä»¥çœŸçš„æŠŠå®ƒå½“ä½œä¸€å°æœåŠ¡å™¨æ¥ç”¨äº†ã€‚\n","date":"2023-08-20T10:22:44+08:00","image":"https://files.furffisite.link/blogimg/20230821152623-0e0e9fdf80c6f1c9ffeee0f80f808e1e-60da9.jpg","permalink":"https://blog.furffisite.link/p/nas-2/","title":"æˆ‘æŠ˜è…¾ NAS çš„å†ç¨‹ï¼ˆäºŒï¼‰ï¼šæ·˜å®å·¥æ§æœº"},{"content":"ç»„è¿™å° NAS å‰çš„äº‹æƒ…ï¼š\næˆ‘æŠ˜è…¾NASçš„å†ç¨‹ï¼ˆä¸€ï¼‰ æˆ‘æŠ˜è…¾NASçš„å†ç¨‹ï¼ˆäºŒï¼‰ ç†è®º è£…æœºé…ç½®å• å“ç‰Œ å‹å· å‚æ•° è´­ä¹°ä»· è´­ä¹°é“¾æ¥ CPU Intel E5-2660 v4 14 æ ¸ 2.0GHz è§„æ ¼è¡¨ Â¥52ï¼ˆæ´‹åƒåœ¾ï¼‰ link å†…å­˜ Samsung M393A2G40DB0-CPB DDR4 2133MHz 16GB è§„æ ¼è¡¨ Â¥92ï¼ˆæ´‹åƒåœ¾ï¼‰ link ä¸»æ¿ åå—é‡‘ç‰Œ X99-4MF ITX DDR4x4 SATAx3 è§„æ ¼è¡¨ Â¥268 link ç³»ç»Ÿç›˜ SKHynix HFS512GDE9X084N 512GB NVME Â¥0* æ˜¾å¡ NVIDIA GeForce 605 è§„æ ¼è¡¨ Â¥16ï¼ˆäº®æœºå¡ï¼‰ link ç”µæº èˆªå˜‰ GX500 500W ATX ç™½ç‰Œ Â¥191.92 link æœºç®± invasion invasion X1 4ç›˜ä½ ITX Â¥244 link CPU æ•£çƒ­å™¨ é›¶ä¸‹30åº¦ - - Â¥38.7 link æœºç®±é£æ‰‡ èˆªå˜‰ MVP120 1500 RPMï¼Œæ”¯æŒ PWM Â¥75.95ï¼ˆä¸‰åªè£…ï¼‰ link æ€»è®¡ Â¥978.57 *ç¬”è®°æœ¬ä¸Šæ‹†ä¸‹æ¥çš„\næ”’æœºç†å¿µ ç›®æ ‡ï¼šçœé’±ã€æ€§èƒ½è¿˜è¡Œã€ä½“ç§¯å°ã€é™éŸ³ã€ä¿ç•™ä¸€å®šçš„å¯å‡çº§æ€§ã€å°½é‡ä¸€æ‰‹ã€‚\nå…³äº CPUï¼Œæˆ‘åœ¨CPUbenchmarkä¸ŠæŒ‰ç…§è·‘åˆ†ç»“æœåœ¨E5çš„ä¸€ç³»åˆ—æ´‹åƒåœ¾å‹å·ä¸­ä»é«˜åˆ°ä½ç¿»ï¼Œæœ€åçœ‹ä¸­äº† E5-2660 v4ã€‚é€‰æ‹©å®ƒæœ‰ä»¥ä¸‹å‡ ç‚¹ç†ç”±ï¼š\nå…¶åŠŸè€—ç›¸æ¯”ä¸åŒç³»åˆ—å…¶å®ƒå‹å·è¾ƒä½ï¼› E5-2660 v4 ä¸º 2016 Q4 æ¨å‡ºçš„ï¼Œç›¸å¯¹ v3 å’Œ v2 è¦æ–°ä¸€ç‚¹ï¼› å…¶æ€§ä»·æ¯”åœ¨åŒå‹å·ä¸­è¾ƒé«˜ï¼Œ52 å…ƒ 16005 åˆ†ï¼Œç›¸è¾ƒäº2690 v3 çš„ 68 å…ƒ 16505 åˆ†æ›´å®æƒ ã€‚ CPU å®šä¸‹æ¥äº†ä¹‹åï¼Œä¸»æ¿å’Œå†…å­˜ä¹Ÿå°±ç›¸åº”çš„å†³å®šäº†ã€‚ä¹‹æ‰€ä»¥ä¸»æ¿ä¸é€‰äºŒæ‰‹æ˜¯å› ä¸ºæˆ‘æƒ³çœç‚¹äº‹ï¼Œå¯¹äºäºŒæ‰‹å¸‚åœºä¸Šå¯èƒ½é‡åˆ°çš„ä¼—å¤šé—®é¢˜æˆ‘ç›®å‰æ²¡æœ‰ä»»ä½•åº”å¯¹ç»éªŒã€‚è€Œé€‰æ‹© ITX æ˜¯ä¸ºäº†æ»¡è¶³ä½“ç§¯å°çš„è¦æ±‚ï¼Œæ¯•ç«Ÿå®¿èˆé‡Œæ”¾ä¸ä¸‹å¤ªå¤šä¸œè¥¿ã€‚\nå…³äºç³»ç»Ÿç›˜ï¼Œä¹‹å‰ç»™ç¬”è®°æœ¬å‡çº§å¤–å­˜çš„æ—¶å€™æ‹†ä¸‹æ¥çš„åŸè£… SSD å¯ä»¥ç›´æ¥ç»™å®ƒç”¨ã€‚å°±ç®—æ˜¯ä¹°ä¸€ä¸ªå…¨æ–°çš„ä¹Ÿä¸ä¼šå¤ªè´µï¼Œ256GB ä¹°ä¸ªäºŒçº¿å‚çš„ SSD åº”è¯¥ä¹Ÿå¤Ÿç”¨äº†ã€‚ åœ¨è£…ç³»ç»Ÿã€è¿› BIOS æ—¶æ˜¾å¡æ˜¯å¿…è¦çš„ï¼Œä½œä¸ºæœåŠ¡å™¨ CPU çš„ E5-2660 v4 æ²¡æœ‰æ ¸å¿ƒæ˜¾å¡ï¼Œå› æ­¤è¿™é‡Œä¾ç„¶éœ€è¦ä¸€å¼ æ˜¾å¡ã€‚ä¸Šæ·˜å®ä¸€æœæœç„¶æœ‰å–äº®æœºå¡çš„ï¼Œ16 å…ƒçš„ä»·æ ¼ä¹Ÿå°±ä¸ç”¨çº ç»“å€¼ä¸å€¼äº†ï¼Œèƒ½äº®å°±è¡Œã€‚ä¸ºäº†èƒ½çœ‹åˆ°è§†é¢‘è¾“å‡ºæˆ‘è¿˜ä¹°äº†ä¸€ä¸ªäºŒåå¤šçš„ HDMI é‡‡é›†å¡ä»¥ä»£æ›¿æ˜¾ç¤ºå™¨ï¼Œäº‹å®è¯æ˜äºŒåå—çš„ç”»è´¨æœç„¶ä¸è¡Œã€‚ ç”µæºä¸æ•¢ä¹°äºŒæ‰‹çš„ï¼Œæ€•å‡ºé—®é¢˜ã€‚500W çš„ç”µæºç›¸å¯¹äºç›®å‰çš„æ•´æœºåŠŸè€—æ˜æ˜¾æ˜¯è¿‡å‰©çš„ï¼Œä½†è¿™ä¹Ÿä¸ºä»¥åçš„å‡çº§ä¿ç•™äº†ä½™é‡ã€‚ æœ€åæ˜¯æœºç®±ï¼Œç»¼åˆä»¥ä¸Šè¦æ±‚ï¼Œæœºç®±åº”è¯¥æ˜¯ä½“ç§¯å°ã€è½»ä¾¿ã€ä¾¿å®œçš„å¤šç›˜ä½ ITX æœºç®±ï¼Œåœ¨æ·˜å®ä¸Šç¿»äº†ä¸€å¤§åœˆåªçœ‹åˆ°è¿™ä¸€æ¬¾åŒæ—¶æ»¡è¶³è¿™å‡ ç‚¹çš„ã€‚åˆ«çš„å‹å·ï¼Œä¾‹å¦‚èœ—ç‰›æ˜Ÿé™…ã€å¾¡å¤«åº§ã€å¤©ç®­åº§ç­‰éƒ½å¤ªè´µäº†æˆ–è€…æ•£çƒ­å®¹é‡å¤ªå°ã€‚ä¸¤ç™¾å¤šçš„æœºç®±æˆ‘è§‰å¾—è¿˜æ˜¯è´µäº†ç‚¹ï¼Œå¯æ˜¯ä¹Ÿæ²¡æ‰¾åˆ°æ›´å¥½çš„é€‰æ‹©ã€‚\nå…³äºå¯å‡çº§æ€§ï¼Œè¿™å¥—é…ç½®ä¸­ï¼ŒCPU å¯ä»¥å‡çº§ä¸º 24686 åˆ†çš„ E5-2699 v4ï¼ˆåœ¨ä»·æ ¼é™ä¸‹æ¥ä¹‹åï¼‰ï¼Œè¿˜æœ‰ä¸‰ä¸ªä½ç½®å¯ä»¥åŠ å†…å­˜æ¡ï¼Œæ˜¾å¡å¯ä»¥å‡çº§ï¼Œæœºç®±å’Œç”µæºä»¥åä¹Ÿèƒ½ç”¨äºè£…æ¸¸æˆç”µè„‘ã€‚\nå®è·µ è£…æœºè¿‡ç¨‹ è£…æœºè¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜æœ‰å››ï¼š\nCPU æ•£çƒ­å™¨çš„èºä¸æ˜¯å¼¯çš„ï¼ˆå¯èƒ½æ˜¯åˆ¶é€ é—®é¢˜ï¼‰ï¼Œè¦ç”¨é’³å­æ‰³ç›´äº†æ‰èƒ½å®‰è£…ï¼› æœºç®±è‡ªå¸¦çš„ç¡¬ç›˜ç¬¼å’Œä¸»æ¿ç”µæºæ’æ§½æœ‰ 2mm å·¦å³çš„ overlapï¼Œè£…å®Œä¹‹åç¡¬ç›˜ç¬¼æœ‰ä¸€ç‚¹ç‚¹å˜å½¢ã€‚å¾—ç›Šäºç¡¬ç›˜æ¶çš„å‡éœ‡æœºæ„ï¼Œè¿™ä¸ªå˜å½¢äº§ç”Ÿçš„å½±å“ä¸å¤§ï¼› ä¸»æ¿ä¸‹éƒ¨çš„æ’æ§½å’Œæœºç®±é£æ‰‡æœ‰å†²çªï¼Œå‰é¢æ¿ USB-3 çš„çº¿æ’ä¸è¿›å»ï¼Œä½†å¯¹äº NAS è€Œè¨€è¿™æ ¹çº¿ä¸æ’é—®é¢˜ä¹Ÿä¸å¤§ï¼› åå—é‡‘ç‰Œçš„è¿™æ¬¾ä¸»æ¿çš„ä¸»æ¿é£æ‰‡æ’æ§½åªæœ‰ 3 é’ˆï¼Œä¸æ”¯æŒ PWMï¼Œç›´æ¥æ’ MVP120 çš„è¯æ»¡è½¬é€Ÿå™ªéŸ³éå¸¸å¤§ã€‚æˆ‘æœ€åç”¨ä¸€æ‹–ä¸‰çš„çº¿æŠŠæ‰€æœ‰é£æ‰‡éƒ½æ¥åˆ°äº†æ”¯æŒ PWM çš„ CPU é£æ‰‡æ’æ§½ä¸Šï¼Œè¿™æ ·å°±å®‰é™äº†å¾ˆå¤šï¼ˆä¹‹ååˆè¿›BIOS è°ƒæ•´äº†ä¸€ä¸‹æ¸©åº¦-è½¬é€Ÿæ›²çº¿ï¼‰ã€‚ æ“ä½œç³»ç»Ÿ å› ä¸ºæˆ‘æœ€ç†Ÿæ‚‰çš„ Linux å‘è¡Œç‰ˆæ˜¯ Ubuntuï¼Œæ‰€ä»¥æˆ‘å®‰è£…äº† Ubuntu 22.04.2 LTSï¼ˆæœåŠ¡å™¨ç‰ˆï¼‰ã€‚\nç³»ç»Ÿç›˜åˆ†åŒºå¦‚ä¸‹ï¼š\n1 2 3 4 5 6 Mountpoint Start End Sectors Size Type /boot/efi 2048 2203647 2201600 1G EFI System / 2203648 107061247 104857600 50G Linux filesystem /home 107061248 211918847 104857600 50G Linux filesystem /srv 211918848 958271487 746352640 355.9G Linux filesystem swap 958271488 1000214527 41943040 20G Linux swap æµ‹è¯• æ•´æœºå¾…æœºæ—¶ CPU æ ¸å¿ƒå¹³å‡æ¸©åº¦ä¸º 30Â°Cï¼Œæ»¡è½½æ—¶ä¸º 55Â°Cï¼Œè¯´æ˜æ•£çƒ­è¿˜æ˜¯æœ‰å¾ˆå¤§çš„ä½™é‡çš„ã€‚æœåŠ¡æ­£å¸¸è¿è¡Œæ—¶æ’åº§ä¸Šæµ‹é‡åˆ°çš„åŠŸç‡åœ¨ 68W å·¦å³ï¼ŒCPUæ»¡è½½æ—¶çº¦ 140Wã€‚\nä½¿ç”¨ sysbench çš„æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼Œå’Œæˆ‘ç°å½¹çš„æ¸¸æˆæœ¬ç›¸æ¯”æˆ‘è§‰å¾—è¿™ä¸ªæˆç»©è¿˜ç®—å¯ä»¥æ¥å—ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 sysbench 1.0.20 (using system LuaJIT 2.1.0-beta3) Running the test with following options: Number of threads: 28 Initializing random number generator from current time Prime numbers limit: 10000 Initializing worker threads... Threads started! CPU speed: events per second: 17251.86 General statistics: total time: 600.0017s total number of events: 10351174 Latency (ms): min: 1.22 avg: 1.62 max: 82.58 95th percentile: 1.64 sum: 16797418.36 Threads fairness: events (avg/stddev): 369684.7857/436.76 execution time (avg/stddev): 599.9078/0.00 è½¯ä»¶éƒ¨åˆ† Docker æœ€å…ˆå®‰è£…çš„æ˜¯ Dockerï¼Œå› ä¸ºæœ‰äº† Docker ä¹‹ååˆ«çš„åº”ç”¨éƒ½å¯ä»¥ä½¿ç”¨ Docker é•œåƒå®‰è£…å’Œç®¡ç†ã€‚\nåœ¨ Ubuntu ä¸Šå®‰è£…Dockeråªéœ€ä½¿ç”¨å®˜æ–¹æä¾›çš„å®‰è£…è„šæœ¬[1]ï¼š\n1 2 $ curl -fsSL https://get.docker.com -o get-docker.sh $ sudo sh get-docker.sh ä¿®æ”¹Dockeræ•°æ®ä½ç½® Docker çš„æ•°æ®é»˜è®¤å‚¨å­˜åœ¨ /var/lib/docker å†…ï¼Œæˆ‘æƒ³å°†å…¶ç§»åˆ° /srv æ–‡ä»¶ç³»ç»Ÿå†…ï¼Œæ“ä½œå¦‚ä¸‹ï¼š\nå…³é—­dockeræœåŠ¡ï¼šsystemctl stop docker ç§»åŠ¨æ–‡ä»¶ï¼šsudo mv /var/lib/docker /srv/ åˆ›å»ºç¬¦å·é“¾æ¥ï¼ˆä»¥é˜²ä¸‡ä¸€ï¼‰ï¼šsudo ln -s /srv/docker /var/lib/docker ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œåœ¨/etc/docker/daemon.jsonå†…æ·»åŠ é…ç½®ï¼š{\u0026quot;data-root\u0026quot;: \u0026quot;/srv/docker\u0026quot;} å¯åŠ¨dockeræœåŠ¡ï¼šsystemctl start docker ä½¿ç”¨Dockerå›½å†…é•œåƒæº é˜¿é‡Œäº‘æä¾›äº†å…è´¹çš„Dockeré•œåƒæºçš„åŠ é€ŸæœåŠ¡ã€‚ä¸ºäº†ä½¿ç”¨è¯¥æœåŠ¡ï¼Œéœ€è¦åœ¨ https://aliyun.com ç™»å½•é˜¿é‡Œäº‘å¸å·ï¼Œç„¶ååœ¨ æ§åˆ¶å° \u0026gt; å®¹å™¨é•œåƒæœåŠ¡ \u0026gt; é•œåƒå·¥å…· \u0026gt; é•œåƒåŠ é€Ÿå™¨ å¤„å¯ä»¥è·å–åŠ é€Ÿå™¨çš„åœ°å€åŠä¿®æ”¹é•œåƒæºçš„æ–¹æ³•ã€‚\næ­¤å¤–ä¹Ÿæœ‰ä¸€äº›å¼€æ”¾çš„é•œåƒæºï¼Œåœ¨/etc/docker/daemon.jsonå†…æ·»åŠ å¦‚ä¸‹å±æ€§ [2]ï¼š\n1 2 3 4 5 6 7 8 { \u0026#34;registry-mirrors\u0026#34;: [ \u0026#34;https://hub-mirror.c.163.com\u0026#34;, \u0026#34;https://ustc-edu-cn.mirror.aliyuncs.com\u0026#34;, \u0026#34;https://ghcr.io\u0026#34;, \u0026#34;https://mirror.baidubce.com\u0026#34; ] } ä¿®æ”¹åä½¿ç”¨ systemctl restart docker é‡å¯dockeræœåŠ¡å³å¯ã€‚\næ‰‹åŠ¨ä¸‹è½½é•œåƒ å¦‚æœæ›¿æ¢äº†é•œåƒæºä¹‹åä¹Ÿæ‹‰ä¸åŠ¨é•œåƒçš„è¯ï¼Œå¯ä»¥è¯•è¯• Moby Project æä¾›çš„é•œåƒä¸‹è½½è„šæœ¬ä¸‹è½½é•œåƒï¼šlink\nä½¿ç”¨ä¾‹ï¼š\n1 2 3 4 5 6 7 8 9 $ wget https://raw.githubusercontent.com/moby/moby/master/contrib/download-frozen-image-v2.sh $ bash ./download-frozen-image-v2.sh ./alpine-linux alpine:latest Downloading \u0026#39;library/alpine:latest@latest\u0026#39; (1 layers)... -#O=-# # # ############################################## 100.0% Download of images into \u0026#39;./alpine-linux\u0026#39; complete. Use something like the following to load the result into a Docker daemon: tar -cC \u0026#39;./alpine-linux\u0026#39; . | docker load è¿™æ—¶é•œåƒå°±å·²ç»ä¿å­˜åˆ°./alpine-linuxå†…äº†ï¼Œç„¶åä½¿ç”¨\n1 2 3 $ tar -cC \u0026#39;./alpine-linux\u0026#39; . | docker load ...... Loaded image: alpine:latest å³å¯è®© docker å¯¼å…¥é•œåƒã€‚\nsamba 1 $ sudo apt install samba å®‰è£…åä½¿ç”¨smbpasswd -a \u0026lt;username\u0026gt;ä¸ºç”¨æˆ·æ·»åŠ  samba çš„è®¿é—®å¯†ç ï¼Œå…¶ä¸­\u0026lt;username\u0026gt;å¿…é¡»ä¸ºå·²ç»åœ¨ Linux å†…æ³¨å†Œçš„ç”¨æˆ·ã€‚\né…ç½®æ–‡ä»¶ä¸º/etc/samba/smb.confï¼Œé…ç½®é¡¹å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚\n1 2 3 4 5 6 [\u0026lt;share name\u0026gt;] path = /path/to/folder read only = no browsable = yes guest ok = no valid users = \u0026lt;users\u0026gt; jellyfin jellyfin æ˜¯æ•°å­—åª’ä½“ç®¡ç†ä¸ä¸²æµè½¯ä»¶ï¼Œå®ƒæ”¯æŒæµè§ˆå™¨ã€Androidã€iOSã€Android TV ç­‰è®¸å¤šå®¢æˆ·ç«¯ï¼Œå¯ä»¥åœ¨è¿™äº›å®¢æˆ·ç«¯ä¸Šä¾¿æ·åœ°è§‚çœ‹æœåŠ¡ç«¯å­˜å‚¨çš„å†…å®¹ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘æ”’è¿™å° NAS çš„ä¸»è¦ç›®çš„ã€‚E5-2660 v4 çš„æ€§èƒ½è¶³ä»¥æ”¯æŒ jellyfin æµç•…ç¼–è§£ç è¶…é«˜æ¸…èµ„æºï¼ˆè½¯è§£ï¼Œä¸è¿‡ç›®å‰çœ‹æ¥ä¹Ÿæ²¡æœ‰ä¸“é—¨ä¸ºè¿™ä¸ªä¹° GPU çš„å¿…è¦äº†ï¼‰ã€‚\nå¯ä»¥ä½¿ç”¨å®˜æ–¹çš„ docker é•œåƒæˆ–è€…linuxserver.io åˆ¶ä½œçš„é•œåƒæ¥å®‰è£… jellyfinã€‚\nä¸ºäº†ä¾¿äºæˆ‘ç®¡ç†å’Œé…ç½®ï¼Œæ‰€æœ‰çš„ Docker å®¹å™¨éƒ½å°†ä½¿ç”¨ docker compose å¯åŠ¨ã€‚è¿™æ˜¯ jellyfin çš„docker-compose.yamlï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 version: \u0026#34;2.1\u0026#34; services: jellyfin: image: lscr.io/linuxserver/jellyfin:latest container_name: jellyfin environment: - PUID=1000 - PGID=1000 - TZ=Asia/Shanghai volumes: - ./config:/config - /path/to/media:/data ports: - 8096:8096 - 8920:8920 #optional - 7359:7359/udp #optional - 1900:1900/udp #optional restart: unless-stopped deploy: mode: global resources: limits: cpus: \u0026#39;20\u0026#39; memory: 8G qbittorrent qbittorrent æ˜¯ç”¨äº bt ä¸‹è½½çš„è½¯ä»¶ã€‚linuxserver.io ä¹Ÿæ‰“åŒ…äº† qbittorrent çš„é•œåƒï¼Œä½¿ç”¨è¿™ä¸ªé•œåƒè¿è¡Œå³å¯ã€‚æˆ‘çš„docker-compose.yamlå¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 services: qbittorrent: image: lscr.io/linuxserver/qbittorrent:latest container_name: qbittorrent environment: - PUID=1000 - PGID=1000 - TZ=Asia/Shanghai - WEBUI_PORT=4823 volumes: - ./config:/config - ./torrents:/torrents - ./cache:/cache - /path/to/downloads:/downloads ports: - 4823:4823 # WebUI - 6881:6881 # ç›‘å¬ç«¯å£ - 6881:6881/udp - 14560-14580:14560-14580 # ä¼ å‡ºç«¯å£ - 14560-14580:14560-14580/udp restart: unless-stopped deploy: mode: global resources: limits: cpus: \u0026#39;2.0\u0026#39; memory: 1G frpc å†…ç½‘ç©¿é€å·¥å…·çš„å®¢æˆ·ç«¯ï¼Œæˆ‘ç”¨çš„æ˜¯ä¸‹è½½é‡æœ€é«˜çš„é•œåƒã€‚\ncoredns DNS æœåŠ¡å™¨ï¼Œå› ä¸ºå­¦æ ¡çš„ DNS ä»¥å‰å´©è¿‡ï¼Œæ‰€ä»¥è£…ä¸€ä¸ªå¤‡ç”¨ã€‚å®˜æ–¹é•œåƒå³å¯ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 services: coredns: image: coredns/coredns:latest container_name: coredns volumes: - ./config:/config command: [\u0026#34;-conf\u0026#34;, \u0026#34;/config/Corefile\u0026#34;] restart: always ports: - 0.0.0.0:53:53 - 0.0.0.0:53:53/udp deploy: mode: global resources: limits: cpus: \u0026#39;0.5\u0026#39; memory: 100M 53 ç«¯å£å¯èƒ½å’Œ ubuntu çš„ systemd-resolved æœåŠ¡å†²çªï¼Œåœ¨å¯åŠ¨å®¹å™¨å‰éœ€è¦å…ˆå…³é—­è¿™ä¸ªæœåŠ¡ï¼š\n1 2 $ sudo systemctl disable systemd-resolved $ sudo systemctl stop systemd-resolved coredns ç»“åˆ nginx/Apache è½¬å‘ä¸ä¸€äº›è·¯ç”±å™¨çš„è®¾ç½®å°±å¯ä»¥å®ç°å†…ç½‘åŸŸåï¼ˆä¸ç”¨è®°ç«¯å£å·äº†ï¼‰ï¼Œä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 ### Corefile: ...... server.local { hosts { 192.168.0.xx jellyfin.server.local } log errors prometheus } ### nginx config: server { listen 80; server_name jellyfin.server.local; location / { proxy_pass http://127.0.0.1:8096; } } è¿™æ ·åœ¨å±€åŸŸç½‘ç›´æ¥è®¿é—® http://jellyfin.server.local å°±å¯ä»¥è¿›å…¥ jellyfin çš„ç•Œé¢äº†ã€‚\næ³¨ï¼šå…³é—­ systemd-resolved æœåŠ¡ä¹‹ååœ¨ä½¿ç”¨ KVM æ—¶å¯èƒ½ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ã€‚\nGrafana \u0026amp; Prometheus Grafana å’Œ Prometheus è¿™ä¸¤ä¸ªå¼€æºè½¯ä»¶ç»„åˆåœ¨ä¸€èµ·å¯ä»¥ç”¨æ¥ç›‘æ§æœåŠ¡å™¨çŠ¶æ€ï¼ˆä¸è¿‡åœ¨è‡ªç”¨çš„ NAS ä¸Šæè¿™ä¸ªå¯èƒ½æ„ä¹‰ä¸å¤§ï¼‰ã€‚ä¹‹å‰æ²¡äº†è§£è¿‡è¿™äº›è½¯ä»¶ï¼Œå› æ­¤è¿™éƒ¨åˆ†å®Œå…¨æ˜¯æŒ‰ç…§æ•™ç¨‹å®‰è£…çš„ï¼Œå…¶ä¸­ Grafana ä¸æ¶‰åŠæ•°æ®æ”¶é›†ï¼Œå¯ä»¥åœ¨ Docker å®¹å™¨ä¸­è¿è¡Œã€‚\né™¤äº†è¿™ä¸¤ä¸ªè½¯ä»¶ï¼Œæˆ‘è¿˜å®‰è£…äº† node exporter å’Œ cadvisorï¼Œåˆ†åˆ«æ”¶é›†æœåŠ¡å™¨ç³»ç»Ÿä¸ Docker å®¹å™¨çš„ç»Ÿè®¡ä¿¡æ¯ã€‚\nè£…å¥½ä¹‹åï¼Œæˆ‘ä»¥ node exporter ä¸ºåŸºç¡€æ”¹å‡ºäº†è¿™æ ·çš„ dashboardï¼š æ•°æ®åº“ æœ‰ä¸€äº›æœåŠ¡ï¼ˆä¾‹å¦‚ gitea å’Œè‡ªå·±å†™çš„çˆ¬è™«ï¼‰çš„æ•°æ®æ˜¯å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„ï¼Œæˆ‘æ¯”è¾ƒå–œæ¬¢å°†è¿™äº›æ•°æ®æ”¾åœ¨åŒä¸€ä¸ªæ•°æ®åº“æœåŠ¡ç«¯å†…ï¼ˆè€Œéç»™æ¯ä¸ªæœ‰éœ€è¦çš„åº”ç”¨éƒ½è¿è¡Œä¸€ä¸ªæ•°æ®åº“ï¼‰ï¼Œä»¥ä¾¿äºæ•°æ®çš„ç®¡ç†ï¼ŒåŒæ—¶å‡å°‘ç³»ç»Ÿå ç”¨ã€‚\nå…³äºå…³ç³»å‹æ•°æ®åº“ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ mariadbï¼ˆMySQLçš„ä¸€ä¸ªè¡ç”Ÿç‰ˆæœ¬ï¼‰ã€‚å…³äºé•œåƒçš„ç‰ˆæœ¬ï¼Œå»ºè®®ä½¿ç”¨ä¸€ä¸ªå›ºå®šçš„ç‰ˆæœ¬å·ï¼ˆè€Œé latestï¼‰ï¼Œå› ä¸ºåœ¨ä¸åŒç‰ˆæœ¬çš„ mariadb ä¹‹é—´è¿ç§»æ•°æ®è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ã€‚\nå…³äºæ•°æ®åº“çš„ç®¡ç†ç«¯ï¼Œæˆ‘ä»¥å‰å¸¸ç”¨çš„æ˜¯ phpmyadminï¼Œè¿™æ¬¡æƒ³è¯•è¯•åˆ«çš„ï¼Œæ‰€ä»¥ä½¿ç”¨äº† å®˜æ–¹dockeré•œåƒé¡µ é‡Œæåˆ°çš„ adminerã€‚å…¶åŠŸèƒ½è™½ä¸å¦‚ phpmyadmin ä¸°å¯Œï¼Œç•Œé¢ä¹Ÿä¸å¦‚å®ƒç¾è§‚ï¼Œä½†æ˜¯æˆ‘å¹³æ—¶ä¼šç”¨åˆ°çš„åŸºç¡€æ“ä½œï¼ˆå»ºè¡¨ã€æŸ¥çœ‹æ•°æ®ã€SQL æŸ¥è¯¢ã€å¯¼å‡ºæ•°æ®ï¼‰å®ƒéƒ½æœ‰ï¼Œç¼ºå°‘çš„åŠŸèƒ½å¯ä»¥ç›´æ¥ç”¨ SQL è¯­å¥å‡‘å˜›~\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 services: db: image: mariadb:10.11.4 container_name: mariadb restart: always environment: MARIADB_ROOT_PASSWORD: ... volumes: - ./mariadb:/var/lib/mysql ports: - 3306:3306 adminer: image: adminer container_name: adminer restart: always ports: - 8080:8080 å¦‚æœæœåŠ¡éœ€è¦ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ docker è¿è¡Œéå…³ç³»å‹æ•°æ®åº“ MongoDB å’Œ redisã€‚\nMinecraft æœåŠ¡å™¨ ï¼ˆpapermcï¼‰ é€‰äº† docker hub é‡Œæœç´¢æ’åé å‰çš„ marctv/minecraft-papermc-serverã€‚\nç”¨äº†ä¹‹åæ‰å‘ç°ï¼Œpapermc æ˜¯ SpigotMC çš„åˆ†æ”¯ï¼Œæ—¨åœ¨æä¾›åŸç”Ÿ Minecraft çš„ä½“éªŒã€‚ä¹Ÿå°±æ˜¯è¯´å®ƒä¸æ”¯æŒä»¥å‰æˆ‘åœ¨ç© Minecraft æ—¶è€³ç†Ÿèƒ½è¯¦çš„é‚£äº› Forge ç‰ˆ modï¼Œåªæ”¯æŒæœåŠ¡å™¨ç«¯çš„ bukkit æ’ä»¶ï¼ˆpluginï¼‰ã€‚å¥½å¤„æ˜¯ç›¸æ¯”ä¸ Forge æœåŠ¡å™¨å ç”¨æ›´å°ï¼Œå¹¶ä¸”ä¸æŒ‘å®¢æˆ·ç«¯ï¼Œåªè¦å®¢æˆ·ç«¯ Minecraft ç‰ˆæœ¬å’ŒæœåŠ¡å™¨ä¸€è‡´å°±èƒ½è¿ä¸Šã€‚ é…ç½®å¥½ä¹‹åï¼Œä½¿ç”¨ frpc è½¬å‘ 25565 ç«¯å£åˆ°å…¬ç½‘ï¼Œå°±å¯ä»¥æ„‰å¿«åœ°å’Œæœ‹å‹ä»¬ä¸€èµ·ç©å•¦ã€‚\nåå°ç®¡ç† åœ¨ docker-compose.yaml ä¸­å¯¹åº”çš„ service é…ç½®é‡ŒåŠ ä¸Š\n1 2 3 stdin_open: true tty: true container_name: mcserver ç„¶å\n1 $ docker compose up -d ä¹‹åä¾¿å¯ä»¥é€šè¿‡\n1 $ docker attach mcserver è¿›å…¥æœåŠ¡å™¨åå°ï¼Œä½¿ç”¨æŒ‡ä»¤ç®¡ç†æœåŠ¡å™¨ã€‚\né…ç½® papermc ç›¸æ¯”äºåŸç‰ˆæœåŠ¡ç«¯ä¿®å¤äº†æ´»å¡ç›¸å…³çš„ä¸€äº›â€œç‰¹æ€§â€ï¼Œä¾‹å¦‚ä½¿ç”¨æ´»å¡å¤åˆ¶ç‰©å“ç­‰ï¼Œå¹¶åœ¨é…ç½®æ–‡ä»¶ä¸­é»˜è®¤é™åˆ¶è¿™äº›è¡Œä¸ºï¼Œå¯¼è‡´åˆ·åœ°æ¯¯æœº/ç ´åŸºå²©ç­‰åŸç‰ˆå¯è¡Œçš„æ“ä½œåœ¨ papermc æœåŠ¡ç«¯å†…ä¸å¯ç”¨ã€‚å½“ç„¶è¿™æ ·å¯¹äºæœä¸»è€Œè¨€ç¡®å®å¯ä»¥é˜²æ­¢ç©å®¶åšå‡ºè¶Šç•Œçš„è¡Œä¸ºï¼Œä½†æ˜¯å¯¹äºæˆ‘è¿™ç§åªæœ‰å‡ ä¸ªæœ‹å‹åœ¨ä¸€èµ·ç©çš„æœåŠ¡å™¨ï¼Œå°±ä¸éœ€è¦é™åˆ¶è¿™äº›äº†ã€‚å…³é—­é™åˆ¶çš„æ–¹å¼å¾ˆç®€å•ï¼Œä¿®æ”¹æ•°æ®ç›®å½•ä¸‹çš„paper.ymlï¼Œå°†allow-headless-pistonsã€allow-permanent-block-break-exploitså’Œallow-piston-duplicationä¸‰é¡¹è®¾ç½®ä¸ºtrueå³å¯ã€‚\nå®‰è£…æ’ä»¶ Papermc æ”¯æŒçš„æ’ä»¶å¯ä»¥åœ¨ Hangerã€bukkitæˆ–SpigotMCä¸‹è½½ã€‚ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„ jar æ–‡ä»¶æ”¾åˆ° /data/plugins æ–‡ä»¶å¤¹ä¸‹ï¼ˆæˆ–è€…ç›´æ¥ä½¿ç”¨ wget/curl ä¸‹è½½ï¼‰ï¼Œç„¶åé‡å¯æœåŠ¡å™¨ï¼Œåœ¨å¯åŠ¨æ—¶å¦‚æœæ–°å¢çš„æ’ä»¶æ²¡æœ‰æŠ¥é”™è¯¯ä¿¡æ¯ï¼Œé‚£å¤§æ¦‚ç‡æ˜¯æ²¡é—®é¢˜çš„ã€‚\nç›®å‰åŠ äº†è¿™äº›æ’ä»¶ï¼š\nMinepacksï¼šèƒŒåŒ…æ’ä»¶ï¼› TreeFellerï¼šè¿é”ç æ ‘ï¼› worldeditï¼šåˆ›ä¸–ç¥æ’ä»¶ï¼› worldguard EssentialsXï¼šæ­£å¦‚å…¶åï¼Œæä¾›ä¸€äº›æœåŠ¡å™¨çš„å¿…å¤‡åŠŸèƒ½ï¼› StackableItemsï¼šå¢åŠ ç‰©å“å †å ä¸Šé™ï¼› Multiverse-Coreï¼šå¤šä¸–ç•ŒåŸºç¡€æ’ä»¶ã€‚ Multiverse-signportalsï¼šä½¿ç”¨å‘Šç¤ºç‰Œåœ¨å¤šä¸–ç•Œé—´ä¼ é€ï¼› OpenTerrainGeneratorï¼šåˆ›å»ºä¸åŒç±»å‹ä¸–ç•Œçš„åŸºç¡€æ’ä»¶ä¹‹ä¸€ã€‚ Skylands FarFromHome ViaVersionï¼šæ”¾å®½å®¢æˆ·ç«¯ç‰ˆæœ¬é™åˆ¶ï¼› LaggRemoverï¼šå‡å°‘æœåŠ¡å™¨å¡é¡¿ï¼› BlueMap: åœ°å›¾æ’ä»¶ï¼Œæä¾›äº†ç¾è§‚çš„åœ¨çº¿3Dåœ°å›¾ï¼› UnifiedMetricsï¼šæ•°æ®æ”¶é›†æ’ä»¶ï¼Œæ”¯æŒå‰è¿°çš„ Prometheusã€‚ å‚è€ƒèµ„æ–™ [1] Install Docker Engine on Ubuntu - Docker Docs | https://docs.docker.com/engine/install/ubuntu/#install-using-the-convenience-scriptâ¤¶ [2] Docker æ¢æº - è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº | https://cloud.tencent.com/developer/article/1769231â¤¶ ","date":"2023-06-18T13:58:40+08:00","image":"https://files.furffisite.link/blogimg/20230618181015-7e414fb06bb70924b269f0ca2a5ba8f6-28296.jpg","permalink":"https://blog.furffisite.link/p/nas-3/","title":"æˆ‘æŠ˜è…¾ NAS çš„å†ç¨‹ï¼ˆä¸‰ï¼‰ï¼šæ¡åƒåœ¾è‡ªç»„"},{"content":"ç®—æ³• Q å­¦ä¹ ç®—æ³•ï¼ˆQ-Learning Algorithmï¼‰çš„æ€è·¯æ¯”è¾ƒç®€å•ï¼šä½¿ç”¨ Q å‡½æ•°è®°å½•æ¯ä¸€ä¸ªçŠ¶æ€ä¸‹æ¯ä¸€ä¸ªåŠ¨ä½œï¼ˆactionï¼‰çš„æœŸæœ›æœ€å¤§æ€»å›æŠ¥ï¼ˆrewardï¼‰ï¼Œå³ Q å€¼ã€‚åœ¨æ¨ç†æ—¶è´ªå¿ƒåœ°é€‰æ‹©å½“å‰çŠ¶æ€ Q å€¼æœ€å¤§çš„åŠ¨ä½œï¼Œä»è€Œè¾¾åˆ°æœ€å¤§åŒ–æœŸæœ›æ€»å›æŠ¥çš„ç›®çš„ã€‚å½“é—®é¢˜çš„çŠ¶æ€ä¸åŠ¨ä½œå‡ä¸ºç¦»æ•£æ—¶ï¼ŒQ å‡½æ•°å¯ä»¥ä½¿ç”¨è¡¨æ ¼è®°å½•ï¼Œè¿™ä¸ªè¡¨æ ¼ä¹Ÿç§°ä¸º Q è¡¨æ ¼ï¼ˆQ-Tableï¼‰ã€‚\nè®¾ï¼š\né—®é¢˜çš„çŠ¶æ€ç©ºé—´ä¸º $S = {1,2,\\ldots, m}$ï¼› é—®é¢˜çš„åŠ¨ä½œç©ºé—´ä¸º $A = {1,2,\\ldots, n}$ï¼› æ¢ç´¢é˜ˆå€¼ä¸º $\\epsilon\\in [0,1]$ï¼ˆæ¨ç†æ—¶ $\\epsilon = 0$ï¼‰ï¼› å­¦ä¹ ç‡ $\\eta\\in [0,1]$ï¼› å›æŠ¥è¡°å‡ç‡ $\\gamma\\in [0,1]$ã€‚ åˆ™ Q å­¦ä¹ ç®—æ³•çš„æµç¨‹å¦‚ä¸‹ï¼š\nåˆå§‹åŒ– Q è¡¨æ ¼ä¸ºé›¶çŸ©é˜µ $Q=O_{m\\times n}$ï¼› è®¾åˆå§‹æ—¶é—´ $t = 0$ï¼ŒçŠ¶æ€ä¸º $s_t = s_0$ï¼› é€‰æ‹©åŠ¨ä½œ $a_t$ï¼šå–éšæœºæ•° $r\\in[0,1]$ï¼Œè‹¥ $r\u0026lt;\\epsilon$ï¼Œåˆ™å½“å‰ä¸ºæ¢ç´¢é˜¶æ®µï¼Œä» $A$ éšæœºé€‰å–ä¸€ä¸ªåŠ¨ä½œï¼›å¦åˆ™ $a_t = \\argmax_{j\\in A} Q_{s_t, j}$ï¼› ä¸ç¯å¢ƒäº¤äº’ï¼Œæ‰§è¡ŒåŠ¨ä½œ $a_t$ï¼Œå¹¶è·å¾—çŠ¶æ€ $s_{t+1}$ã€å›æŠ¥ $r_t$ï¼› æŒ‰ç…§ Bellman æ–¹ç¨‹ æ›´æ–°Qè¡¨æ ¼ï¼š $$Q_{s_t, a_t} \\leftarrow (1-\\eta) Q_{s_t, a_t} + \\eta(\\gamma\\max_{j\\in A} Q_{s_{t+1},j} + r_t),$$ å…¶ä¸­ $\\max Q_{s_{t+1},j}$ ä¸º è½¬ç§»åçš„çŠ¶æ€ $s_{t+1}$ ä¸‹æœ€å¤§çš„Qå€¼ï¼ŒåŠ ä¸Š $r_t$ï¼Œç»„æˆè½¬ç§»å‰çŠ¶æ€ $s_t$ ä¸‹ $a_t$ æ“ä½œçš„Qå€¼ã€‚å°†å…¶ä¸åŸæ¥çš„ $Q_{s_t, a_t}$ åŠ æƒå¹³å‡å°±å¾—åˆ°äº†æ›´æ–°åçš„Qå€¼ã€‚ æ—¶é—´ $t\\leftarrow t+1$ï¼Œå›åˆ°ç¬¬ 3 æ­¥ã€‚ å®ç° Frozen Lake ä»¥ Gym çš„ Frozen Lake ç¯å¢ƒä¸ºä¾‹ï¼Œå…¶çŠ¶æ€ç©ºé—´ä¸åŠ¨ä½œç©ºé—´éƒ½æ˜¯ç¦»æ•£çš„ï¼Œå› æ­¤é€‚åˆä½¿ç”¨ Q è¡¨æ ¼ã€‚è¿™ä¸ªç¯å¢ƒå…±æœ‰ $4^2=16$ ç§çŠ¶æ€ï¼Œ4 ç§åŠ¨ä½œï¼Œåˆ†åˆ«å¯¹åº”ä¸Šä¸‹å·¦å³å››ä¸ªç§»åŠ¨æ–¹å‘ã€‚ç¯å¢ƒä¸­slipperyå¼•å…¥çš„ä¸ç¡®å®šæ€§å¤ªå¤§ï¼ˆæ¯æ¬¡è¡ŒåŠ¨åªæœ‰$1/3$çš„æ¦‚ç‡èƒ½çœŸæ­£å‰å¾€æŒ‡å®šçš„æ–¹å‘ï¼‰ï¼Œå› æ­¤è¿™é‡Œåˆ›å»ºç¯å¢ƒæ—¶is_slipperyä¸€é¡¹è®¾ä¸ºFalseã€‚\nå®ç°å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 import gymnasium as gym import numpy as np from random import random env = gym.make(\u0026#39;FrozenLake-v1\u0026#39;, map_name=\u0026#34;4x4\u0026#34;, is_slippery = False) n_actions, n_states = env.action_space.n, env.observation_space.n lr, gamma = 0.2, 0.6 total = 1000 Q_table = np.zeros((n_states, n_actions)) state, info = env.reset() for t in range(total): # é€‰æ‹©åŠ¨ä½œ epsilon = 1 - t / total if random() \u0026lt; epsilon: # æ¢ç´¢ action = env.action_space.sample() else: action = Q_table[state].argmax(0) org_state = state state, reward, terminated, truncated, info = env.step(action) if state == n_states-1: # æŠµè¾¾ç»ˆç‚¹ï¼Œè·å¾—å¥–åŠ± reward = 20 elif terminated: # æ‰è¿›æ´é‡Œï¼Œç»™äºˆæƒ©ç½š reward = -5 else: # è®©agentå°½å¿«æŠµè¾¾ç»ˆç‚¹ reward = -1 # æ›´æ–°Qå€¼ Q_table[org_state, action] = ((1 - lr) * Q_table[org_state, action] + lr * (reward + gamma * Q_table[state].max())) if terminated or truncated: state, info = env.reset() åŸç¯å¢ƒæä¾›çš„å›æŠ¥å‡½æ•°æ‰€å«çš„ä¿¡æ¯è¾ƒå°‘ï¼ˆä»…åœ¨æŠµè¾¾ç»ˆç‚¹æ—¶ä¸º 1ï¼Œå…¶ä½™æƒ…å†µå‡ä¸º 0ï¼‰ï¼Œä¸åˆ©äºç®—æ³•çš„æ”¶æ•›ï¼Œå› æ­¤æˆ‘åœ¨å®ç°ä¸­é‡æ–°è®¾è®¡äº†å›æŠ¥å‡½æ•°ã€‚ æ­¤å¤–ï¼Œè®­ç»ƒæ—¶é‡‡ç”¨çº¿æ€§è¡°å‡çš„æ¢ç´¢é˜ˆå€¼ $\\epsilon$ ï¼Œå³è®­ç»ƒåˆæœŸå€¾å‘äºæ¢ç´¢ï¼ˆexplorationï¼‰ï¼ŒåæœŸå€¾å‘äºå¼€å‘ï¼ˆexploitationï¼‰ã€‚\nè®­ç»ƒæ—¶æ¯è½®çš„ t ä¸è¯¥è½®è·å¾—çš„æ€» reward çš„æŠ˜çº¿å›¾å¦‚ä¸‹ï¼š\næ¨ç†æ—¶ç®—æ³•é€‰æ‹©çš„è·¯çº¿å¦‚ä¸‹å›¾ï¼Œç¡®å®æ˜¯æœ€ä¼˜è·¯çº¿ä¹‹ä¸€ã€‚\né™¤äº† Frozen Lakeï¼Œè¿™ä¸ªæ–¹æ³•ä¹Ÿå¯ä»¥ç”¨æ¥æ±‚è§£ Gym æä¾›çš„ Cliff Walkingã€Taxi ä¸ Blackjackã€‚ä½†æ˜¯ï¼Œéšç€é—®é¢˜è§„æ¨¡çš„å¢å¤§ï¼Œè®­ç»ƒæ­¥æ•°ä¹Ÿéœ€è¦ç›¸åº”åœ°å¢åŠ ã€‚\nCliff Walking è¿™ä¸ªç¯å¢ƒæœ‰ 48 ç§çŠ¶æ€å’Œ 4 ç§åŠ¨ä½œï¼Œå› æ­¤ Q è¡¨æ ¼å†…å…±æœ‰192é¡¹ã€‚ä»¥ä¸‹æ˜¯è®­ç»ƒäº† 10,000 æ­¥çš„ç»“æœï¼ˆå¹³å‡æ¯é¡¹ 52 æ­¥ï¼‰ï¼š\nTaxi è¿™ä¸ªç¯å¢ƒæœ‰ 500 ç§çŠ¶æ€å’Œ 6 ç§åŠ¨ä½œï¼Œå¯¹åº” Q è¡¨æ ¼çš„ 3000 é¡¹ã€‚ä»¥ä¸‹æ˜¯è®­ç»ƒäº† 200,000 æ­¥çš„ç»“æœï¼ˆå¹³å‡æ¯é¡¹ 67 æ­¥ï¼‰ï¼š\nBlackjack Blackjack æœ‰ $32\\times 11\\times 2=704$ ç§çŠ¶æ€å’Œ $2$ ç§åŠ¨ä½œï¼Œåœ¨å¤„ç†æ—¶éœ€è¦å°†ç¦»æ•£çš„çŠ¶æ€å‘é‡æ˜ å°„åˆ°éè´Ÿæ•´æ•°åŸŸå†…ã€‚ è¿™ä¸ªæ¸¸æˆçš„çŠ¶æ€è½¬ç§»å­˜åœ¨ä¸ç¡®å®šæ€§ï¼Œå³ä½¿æ˜¯å……åˆ†è®­ç»ƒï¼ˆ$5\\times 10^6$ æ­¥ï¼‰çš„Qè¡¨æ ¼ä¹Ÿåªèƒ½å°†èƒœç‡ä»å®Œå…¨éšæœºæ—¶çš„ 28.2% æå‡åˆ° 39.3%ã€‚\nåˆ†æ ä¼˜ç‚¹ ç®—æ³•ç®€å•ï¼Œæ˜“äºç†è§£å’Œå®ç°ã€‚ å±€é™æ€§ åŸºäº Q è¡¨æ ¼çš„ Q å­¦ä¹ ç®—æ³•åªèƒ½å¤„ç†è¾“å…¥è¾“å‡ºéƒ½æ˜¯ç¦»æ•£çš„é—®é¢˜ï¼› åŸºäº Q è¡¨æ ¼çš„ Q å­¦ä¹ ç®—æ³•ä¸èƒ½è·¨å®ä¾‹å­¦ä¹ ï¼Œå³åœ¨é‡åˆ°æ–°çš„é—®é¢˜å®ä¾‹æ—¶ï¼Œéœ€è¦ä» 0 å¼€å§‹é‡æ–°æ¢ç´¢ï¼› åŸºäº Q è¡¨æ ¼çš„ Q å­¦ä¹ ç®—æ³•éš¾ä»¥å¤„ç†è®­ç»ƒè¿‡ç¨‹ä¸­æ²¡æœ‰è§è¿‡çš„çŠ¶æ€ï¼› å½“çŠ¶æ€ç©ºé—´æˆ–åŠ¨ä½œç©ºé—´å¾ˆå¤§æ—¶ï¼ŒQ è¡¨æ ¼çš„è§„æ¨¡ä¹Ÿä¼šå¾ˆå¤§ï¼Œä»è€Œéœ€è¦æ›´é•¿çš„å­¦ä¹ æ—¶é—´ã€‚ ä¸Šè¿°é—®é¢˜å¯ä»¥é€šè¿‡å¼•å…¥ç¥ç»ç½‘ç»œç¼“è§£ï¼Œå³æ·±åº¦ Q å­¦ä¹ ç®—æ³•ï¼ˆDeep Q-Learning Algorithmï¼‰ã€‚\n","date":"2023-05-18T15:05:05+08:00","image":"https://files.furffisite.link/blogimg/20230518191643-b6c8849bfb006d40abef7203bb5e15a0-18b9a.jpg","permalink":"https://blog.furffisite.link/p/q-learning/","title":"ã€RLå­¦ä¹ ç¬”è®°ã€‘Qå­¦ä¹ ç®—æ³•"},{"content":"å› ä¸º Linux ç«¯çš„ Zoteroï¼ˆAURï¼‰ä¸­æœ‰ä¸€éƒ¨åˆ†å…ƒç´ çš„æ ·å¼æ˜¯ç”± GTK æ§åˆ¶çš„ï¼Œå› æ­¤å½“ç³»ç»Ÿçš„ GTK ä¸»é¢˜ä¸ºæ·±è‰²ä¸»é¢˜æ—¶ï¼ŒZotero çš„ç•Œé¢ä¼šå‘ˆç°ä¸ºè¿™ä¸ªæ ·å­ï¼š è¿™ä¸æ˜¯å¾ˆå¥½çœ‹ï¼Œå¹¶ä¸”éƒ¨åˆ†åŒºåŸŸå†…æ–‡å­—å’ŒèƒŒæ™¯è‰²çš„å¯¹æ¯”åº¦å¾ˆä½ï¼Œå¯¼è‡´æ–‡å­—éš¾ä»¥é˜…è¯»ã€‚\næ ¹æ®è¿™ä¸ªå¸–å­ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯é€šè¿‡ç¯å¢ƒå˜é‡åœ¨ç¨‹åºå¯åŠ¨æ—¶æŒ‡å®šå…¶ä½¿ç”¨çš„ GTK ä¸»é¢˜ï¼Œä¹Ÿå°±æ˜¯ï¼š\n1 $ GTK_THEME=Pop-light zotero åæ˜ åˆ° Desktop æ–‡ä»¶ä¸Šï¼ˆé€šå¸¸ä½äº/usr/share/applications/å’Œ~/.local/share/applications/ï¼‰ï¼Œå°±æ˜¯åœ¨å¯åŠ¨æŒ‡ä»¤ï¼ˆExec é¡¹ï¼‰å‰åŠ å…¥env GTK_THEME=Pop-lightã€‚\n1 2 3 4 5 [Desktop Entry] Type=Application Name=Zotero Exec=env GTK_THEME=Pop-light /usr/bin/zotero -url %U ... è¿™æ ·æ“ä½œåï¼Œé€šè¿‡åº”ç”¨å¯åŠ¨å™¨æ‰“å¼€çš„ Zotero å°±ä¸ä¼šæœ‰é—®é¢˜äº†ã€‚\n","date":"2023-05-13T13:12:27+08:00","image":"https://files.furffisite.link/blogimg/20240527150719-58fa3bf91a709e8e208c96720f0aeca2-547a4.jpg","permalink":"https://blog.furffisite.link/p/linux-darkmode-zotero-gui-issue/","title":"è§£å†³ Linux ç³»ç»Ÿæ·±è‰²æ¨¡å¼ä¸‹çš„ Zotero æ˜¾ç¤ºé—®é¢˜"},{"content":"é—®é¢˜èƒŒæ™¯ åœ¨ä½¿ç”¨ Python çš„ Flask æ¡†æ¶å¼€å‘ Web åº”ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªåŸºæœ¬çš„æœåŠ¡ç«¯ç¨‹åºç»“æ„å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 from flask import Flask app = Flask(__name__) @app.route(\u0026#39;/handler1\u0026#39;) def handler1(): ... @app.route(\u0026#39;/handler2\u0026#39;) def handler2(): ... @app.route(\u0026#39;/handler3\u0026#39;) def handler3(): ... å¯ä»¥æŒ‰ç…§è¿™ç§æ¨¡å¼æ— é™æ·»åŠ å¤„ç†è§†å›¾ï¼ˆhandlerï¼‰ï¼Œä½†æ˜¯éšç€é¡¹ç›®å¢å¤§ï¼Œè¿™ç§å°†æ‰€æœ‰ handler éƒ½æ”¾åœ¨ä¸€ä¸ª py æ–‡ä»¶é‡Œçš„æ¨¡å¼æ˜¾ç„¶æ˜¯ä¸åˆé€‚çš„ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨ blueprint å°†æ¯ä¸ª handlerï¼ˆæˆ–ä¸€ç»„ handlerï¼‰æ”¾åœ¨äº’ç›¸ç‹¬ç«‹çš„æ–‡ä»¶é‡Œã€‚\né¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 . â”œâ”€â”€ app.py â””â”€â”€ services â”œâ”€â”€ __init__.py â”œâ”€â”€ login.py â”œâ”€â”€ register.py ... ä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 \u0026#34;\u0026#34;\u0026#34; === app.py === \u0026#34;\u0026#34;\u0026#34; from flask import Flask from services import blueprint app = Flask(__name__) app.register_blueprint(blueprint) \u0026#34;\u0026#34;\u0026#34; === services/__init__.py === \u0026#34;\u0026#34;\u0026#34; from flask import Blueprint blueprint = Blueprint(\u0026#39;api\u0026#39;, __name__) # ä¸ºäº†åœ¨ç¨‹åºå¯åŠ¨è¿‡ç¨‹ä¸­èƒ½è¿è¡Œä¸¤ä¸ª handler æ–‡ä»¶ï¼Œéœ€è¦åœ¨è¿™é‡Œ import å®ƒä»¬ from . import login from . import register \u0026#34;\u0026#34;\u0026#34; === services/login.py === \u0026#34;\u0026#34;\u0026#34; from . import blueprint @blueprint.route(\u0026#34;/login\u0026#34;) def handle_login(): # å¤„ç†ç™»å½•é€»è¾‘ ... \u0026#34;\u0026#34;\u0026#34; === services/register.py === \u0026#34;\u0026#34;\u0026#34; from . import blueprint @blueprint.route(\u0026#34;/register\u0026#34;, methods=[\u0026#34;POST\u0026#34;]) def handle_register(): # å¤„ç†æ³¨å†Œé€»è¾‘ ... è¿™æ ·åšå­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼š\næ¯æ¬¡æ–°å¢ä¸€ä¸ªæ–‡ä»¶éƒ½éœ€è¦åœ¨__init__.pyä¸­æ·»åŠ ç›¸åº”çš„ import è¯­å¥ï¼Œè¾ƒä¸ºéº»çƒ¦ï¼› PEP-8 ä¸­è¦æ±‚å°† import è¯­å¥æ”¾åœ¨æ–‡ä»¶çš„é¡¶éƒ¨ï¼Œ__init__.pyæ˜¾ç„¶ä¸ç¬¦åˆï¼ˆä½†å¿…é¡»å¦‚æ­¤ï¼‰ï¼Œå› è€Œé™æ€æ£€æŸ¥å™¨æœ‰å¯èƒ½åœ¨æ­¤å¤„æŠ¥é”™ï¼ˆE402ï¼‰ã€‚ äºæ˜¯å°±è‡ªç„¶è€Œç„¶åœ°æƒ³åˆ°äº†ï¼šå¦‚ä½•åœ¨æ¨¡å—åˆå§‹åŒ–æ—¶è‡ªåŠ¨å¯¼å…¥å½“å‰è·¯å¾„ä¸‹çš„æ‰€æœ‰å­æ¨¡å—å‘¢ï¼Ÿ\nè§£å†³æ–¹æ³• å°†services/__init__.pyæ”¹ä¸ºè¿™æ ·ï¼š\n1 2 3 4 5 6 7 8 import pkgutil import importlib from flask import Blueprint blueprint = Blueprint(\u0026#39;api\u0026#39;, __name__) for spec in pkgutil.iter_modules(path=__path__, prefix=\u0026#39;\u0026#39;): importlib.import_module(\u0026#34;.\u0026#34;+spec.name, __name__) åŸç†æ¢ç©¶ å¯ä»¥é€šè¿‡ pdb æˆ– print è·å¾—è¿™æ®µç¨‹åºæ‰€æ¶‰åŠå˜é‡çš„å€¼ï¼š\n1 2 3 4 __name__ = \u0026#39;services\u0026#39; __path__ = [\u0026#39;/tmp/test/services\u0026#39;] spec = ModuleInfo(module_finder=FileFinder(\u0026#39;/tmp/test/services\u0026#39;), name=\u0026#39;login\u0026#39;, ispkg=False) spec = ModuleInfo(module_finder=FileFinder(\u0026#39;/tmp/test/services\u0026#39;), name=\u0026#39;register\u0026#39;, ispkg=False) å…¶ä¸­__name__ä¸ºå½“å‰åŒ…çš„åå­—ï¼Œ__path__ä¸ºæ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹çš„è·¯å¾„ã€‚ pkgutilæ¨¡å—çš„iter_moduleså‡½æ•°ä¼šæ‰¾åˆ°æä¾›çš„pathä¸‹çš„æ‰€æœ‰å­æ¨¡å—ï¼Œåœ¨è¿™é‡Œå°±æ˜¯loginä¸registerï¼Œå¹¶è¿”å›å®ƒä»¬çš„ ModuleInfoã€‚\nåœ¨ for å¾ªç¯å†…æå– ModuleInfo çš„ nameï¼Œå¾—åˆ°æ¨¡å—çš„åå­—ï¼ŒåŠ ä¸Šå‰ç¼€.ï¼Œå³å½“å‰ç›®å½•ä¸‹çš„å¯¹åº”å­æ¨¡å—ã€‚ æœ€åä½¿ç”¨ importlib çš„ import_module å‡½æ•°å¯¼å…¥å­æ¨¡å—ï¼ˆå³è¿è¡Œå­æ¨¡å—çš„ä»£ç ï¼Œå°† handler æ³¨å†Œåˆ° router ä¸Šï¼‰ã€‚è¿™æ ·æ— è®ºå¢åŠ å¤šå°‘ handler æ–‡ä»¶ï¼Œ__init__.py éƒ½å¯ä»¥æ‰¾åˆ°å¹¶åŠ è½½å®ƒä»¬ã€‚\n","date":"2023-05-11T12:22:54+08:00","image":"https://files.furffisite.link/blogimg/20230511163144-c5d0b19ce502665b1891ef8c78c5b839-32aa3.jpg","permalink":"https://blog.furffisite.link/p/python-import-directory-modules/","title":"åœ¨Pythonä¸­å¯¼å…¥å½“å‰è·¯å¾„ä¸‹çš„æ‰€æœ‰æ¨¡å—"},{"content":"starship æ˜¯ä½¿ç”¨ Rust ç¼–å†™çš„è½»é‡ä¸”è¿…é€Ÿçš„ç»ˆç«¯æç¤ºç¬¦ç¨‹åºï¼Œå…¶åŠŸèƒ½å’Œä½œç”¨ä¸ Oh My Zsh ç›¸ä¼¼ï¼Œä½†æ˜¯ç›¸æ¯”äº Oh My Zshï¼Œstarship å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š\nstarship æ˜¯è·¨å¹³å°è·¨ç»ˆç«¯çš„ï¼Œå…¶æ”¯æŒ Bashã€Zshã€Fish ç­‰åå‡ ç§ç»ˆç«¯ï¼Œç”šè‡³åŒ…æ‹¬ Windows çš„ PowerShell ä¸ cmdï¼› ä½¿ç”¨ç¼–è¯‘å‹è¯­è¨€ Rust ç¼–å†™çš„ starship åœ¨è¿è¡Œé€Ÿåº¦ä¸Šä¼˜äºåŸºäº shell script çš„ Oh My Zshï¼› starship çš„è‡ªå®šä¹‰é…ç½®æ–¹æ³•æ¯” Oh My Zsh ç®€å•ã€‚ å…ˆä¸Šå›¾ï¼Œä»¥ä¸‹æ˜¯æˆ‘æ‰€ä¹ æƒ¯çš„é…ç½®çš„æ•ˆæœå›¾ã€‚é™¤å½“å‰ç”¨æˆ·ã€hostname å’Œå½“å‰å·¥ä½œè·¯å¾„å¤–ï¼Œstarship è¿˜æ˜¾ç¤ºäº† git çŠ¶æ€ã€ç›¸å…³è½¯ä»¶çš„ç‰ˆæœ¬ã€è¿›ç¨‹çš„è¿”å›ç ã€è¿è¡Œæ—¶é—´ã€å·²ç”¨å†…å­˜/è™šæ‹Ÿå†…å­˜å’Œå½“å‰æ—¶é—´ç­‰ä¿¡æ¯ã€‚starfish æ˜¯é€šè¿‡å½“å‰å·¥ä½œç›®å½•ä¸‹çš„æ–‡ä»¶ååˆ¤æ–­åº”å½“å±•ç¤ºå“ªäº›æ¨¡ç»„çš„ï¼Œæ‰€ä»¥å½“æˆ‘åˆ›å»ºæ–‡ä»¶ä¹‹åæç¤ºç¬¦ä¸Šä¹Ÿå°±å¤šå‡ºäº†ç›¸å…³è½¯ä»¶çš„ä¿¡æ¯ã€‚\nä¸‹æ–‡å°†ç®€è¿° starship çš„å®‰è£…æ–¹æ³•ï¼Œå¹¶ç»™å‡ºæˆ‘çš„é…ç½®æ–‡ä»¶ã€‚\nå®‰è£… æœ¬æ–‡ä»…é€‚ç”¨äºåœ¨ Linux ä¸‹çš„ bash å’Œ zsh ç»ˆç«¯å®‰è£… starshipï¼Œåœ¨å…¶å®ƒç»ˆç«¯çš„å®‰è£…æ–¹æ³•è¯·å‚è§ starship çš„å®˜æ–¹æ–‡æ¡£ã€‚\né¦–å…ˆä½¿ç”¨å®˜æ–¹è„šæœ¬åœ¨ Linux ç³»ç»Ÿå†…å®‰è£… starship ç¨‹åºï¼š\n1 $ curl -sS https://starship.rs/install.sh | sh è¿™æ—¶å¦‚æœåœ¨ç»ˆç«¯è¾“å…¥starship -Vèƒ½çœ‹åˆ° starship çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œå°±è¯´æ˜ç¨‹åºå®‰è£…æˆåŠŸäº†ã€‚\nç„¶åéœ€è¦é…ç½®ç»ˆç«¯ç¨‹åºï¼Œä½¿å…¶èƒ½ä½¿ç”¨ starship ä½œä¸ºæç¤ºç¬¦ã€‚åœ¨~/.bashrcï¼ˆbash ç»ˆç«¯ï¼‰æˆ–~/.zshrcï¼ˆzsh ç»ˆç«¯ï¼‰å†…åŠ å…¥è¿™ä¸€è¡Œå³å¯ï¼š\n1 eval \u0026#34;$(starship init bash)\u0026#34; é…ç½® starshipçš„é…ç½®æ–‡ä»¶æ˜¯~/.config/starship.tomlï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡STARSHIP_CONFIGæ”¹å˜æ­¤æ–‡ä»¶çš„ä½ç½®ã€‚åœ¨ç»ˆç«¯è¾“å…¥starship configå¯ä»¥ç›´æ¥æ‰“å¼€è¯¥æ–‡ä»¶ã€‚\nç”±åç¼€åå¯çŸ¥ï¼Œstarship çš„é…ç½®æ–‡ä»¶ä¸º TOML æ–‡ä»¶ï¼Œéµå®ˆ TOML è¯­æ³•ï¼Œå…³äº TOML è¯­æ³•æœ¬æ–‡å°±ä¸èµ˜è¿°äº†ï¼Œè‹¥éœ€è¦äº†è§£è¯¦æƒ…è¯·ç§»æ­¥ TOML å®˜ç½‘ã€‚\nstarship æ˜¯åˆ†æ¨¡å—çš„ç»“æ„ï¼Œstarship ç”Ÿæˆçš„æç¤ºç¬¦ä¸­çš„æ¯ä¸€ä¸ªéƒ¨åˆ†éƒ½å¯¹åº” starship çš„ä¸€ä¸ªæ¨¡å—ï¼Œä½ å¯ä»¥ä½¿ç”¨starship explainæŒ‡ä»¤æŸ¥çœ‹å„æ¨¡å—çš„è¯´æ˜åŠå…¶è¿è¡Œæ—¶é—´ï¼Œä¾‹å¦‚ä»¥æˆ‘å½“å‰çš„é…ç½®è¾“å…¥è¯¥å‘½ä»¤åæ•ˆæœå¦‚ä¸‹ï¼š\nå…³äºå¦‚ä½•è‡ªå®šä¹‰é…ç½®ï¼Œstarship çš„å®˜æ–¹æ–‡æ¡£å·²ç»å†™çš„å¾ˆå®Œå–„äº†ï¼Œå‚è§ https://starship.rs/zh-CN/config/ã€‚\nstarship åœ¨å®˜æ–¹æ–‡æ¡£é‡Œå·²ç»ç»™å‡ºäº†ä¸€äº›é¢„è®¾ï¼Œä½ å¯ä»¥ä»¥ä½ å–œæ¬¢çš„é¢„è®¾ä¸ºåŸºç¡€è¿›è¡Œå®šåˆ¶ï¼Œä¾‹å¦‚æˆ‘çš„é…ç½®å°±æ˜¯åœ¨ Bracketed Segments å’Œ Nerd Font Symbols é¢„è®¾ä¹‹ä¸ŠæŒ‰ç…§è‡ªå·±çš„ä¹ æƒ¯æ‰€åšçš„æ›´æ”¹ã€‚æˆ‘çš„starship.tomlå¦‚ä¸‹ï¼š\nå¦å¤–ï¼Œä½¿ç”¨ Nerd Font Symbols éœ€è¦ Nerd Fontï¼Œè¯·å‰å¾€ https://www.nerdfonts.com/font-downloads ä¸‹è½½ä½ ä¹ æƒ¯çš„å­—ä½“å¯¹åº”çš„å›¾æ ‡å­—ä½“ï¼Œå¹¶åœ¨è™šæ‹Ÿç»ˆç«¯ä¸­å°†å…¶è®¾ä¸ºé»˜è®¤å­—ä½“ã€‚\nç›¸å…³é—®é¢˜ åœ¨ä½¿ç”¨ Anaconda ç®¡ç† Python çš„è™šæ‹Ÿç¯å¢ƒæ—¶ï¼ŒAnaconda ä¼šè‡ªåŠ¨åœ¨æç¤ºç¬¦å‰åŠ ä¸Šå½“å‰è™šæ‹Ÿç¯å¢ƒçš„åç§°ï¼Œå¦‚(base)ï¼Œè¿™ä¸ starship å†²çªäº†ï¼ˆä¸” starship çš„ conda æ¨¡å—æä¾›äº†ç›¸åŒçš„åŠŸèƒ½ï¼‰ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤ç¦ç”¨ Anaconda çš„è¿™ä¸ªåŠŸèƒ½ã€‚\n1 $ conda config --set changeps1 False ","date":"2023-01-06T16:24:31+08:00","image":"https://files.furffisite.link/blogimg/20230109230402-9ec5accbc75f863015a4dca68f9f9870-cc3be.jpg","permalink":"https://blog.furffisite.link/p/use-starship/","title":"ä½¿ç”¨starshipå®šåˆ¶ç»ˆç«¯æç¤ºç¬¦"},{"content":" ä»Šå¤©åœ¨ QQ çœ‹åˆ°ä¸€å¼ å›¾ï¼Œè¿™å¼ å›¾åœ¨é¢„è§ˆä¸‹çœ‹åˆ°çš„å’ŒæŸ¥çœ‹å›¾ç‰‡æ—¶çœ‹åˆ°çš„å†…å®¹ä¸ä¸€æ ·ã€‚è™½ç„¶ä¸æ˜¯ç¬¬ä¸€æ¬¡è§è¿™ç§å›¾äº†ï¼Œä½†æ˜¯ä»Šå¤©åœ¨æ‘¸é±¼çš„æ—¶å€™æ— äº‹å¯åšï¼Œå°±ç ”ç©¶äº†ä¸€ä¸‹å®ƒçš„åŸç†ã€‚\nè¿™å¼ å›¾æ˜¯è¿™æ ·çš„ï¼šå·¦å›¾ä¸ºå®ƒåœ¨èŠå¤©ç•Œé¢çš„æ ·å­ï¼Œå…¸å‹çš„åƒæ¡ƒåœºæ™¯ï¼Œç‚¹å¼€å¤§å›¾ä¹‹åçœ‹åˆ°çš„å´æ˜¯å³å›¾çš„æ ·å­ï¼ˆç¬‘ï¼‰ã€‚ ä¸­é—´çš„å›¾ç‰‡ä¸ºåµŒå…¥çš„åŸå›¾ï¼Œå¦‚æœæ‚¨å¼€å¯äº†æš—è‰²æ¨¡å¼ï¼ˆæ¡Œé¢ç«¯å¯ä»¥åœ¨é¡µé¢å·¦ä¸‹è§’åˆ‡æ¢ï¼‰ï¼Œæ‚¨çœ‹åˆ°ä¸­å›¾çš„åº”è¯¥å’Œå³å›¾ä¸€æ ·ï¼Œåä¹‹åˆ™å’Œå·¦å›¾ä¸€æ ·ã€‚ åŸå›¾å¯ä»¥åœ¨è¿™é‡Œè·å–ã€‚\nåŸç† è¿™ç§å›¾çš„åŸç†å¹¶ä¸éš¾çŒœï¼Œè‚¯å®šåˆ©ç”¨äº† png å›¾ç‰‡çš„é€æ˜åº¦é€šé“ï¼Œä½¿å…¶åœ¨ä¸åŒèƒŒæ™¯è‰²ä¸‹èƒ½å‘ˆç°å‡ºä¸åŒçš„æ•ˆæœã€‚ä¸‹é¢æ±‚è§£ä¸€ä¸‹å®ƒæ˜¯æ€ä¹ˆåˆ¶ä½œå‡ºæ¥çš„ï¼š ï¼ˆå› ä¸ºè¿™é‡Œåªæ¶‰åŠå›¾åƒçš„åƒç´ å˜æ¢ï¼Œä¸ºç®€åŒ–è¡¨ç¤ºï¼Œä»¥ä¸‹çš„æ¯ä¸ªå˜é‡éƒ½è¡¨ç¤ºå•ä¸ªåƒç´ å•ä¸ªé€šé“çš„å€¼ï¼Œä¸”å®šä¹‰åŸŸä¸º$[0,1]$.ï¼‰\nè®¾åœ¨èŠå¤©ç•Œé¢çœ‹åˆ°çš„å›¾åƒï¼ˆè¡¨å›¾ï¼‰ç°åº¦ä¸º$c$ï¼Œç‚¹å¼€å¤§å›¾åçœ‹åˆ°çš„å›¾åƒï¼ˆé‡Œå›¾ï¼‰ä¸º$h$ï¼Œå¾…æ±‚é‡ä¸ºç”Ÿæˆçš„å›¾åƒçš„ç°åº¦$g$ä¸é€æ˜åº¦$a$ã€‚\nåœ¨èŠå¤©ç•Œé¢çš„å›¾åƒæ˜¯ç›®æ ‡å›¾åƒå’Œç™½è‰²èƒŒæ™¯çš„æ··åˆï¼Œä¹Ÿå°±æ˜¯$$(1-a) + g\\cdot a = c.$$ ç‚¹å¼€å¤§å›¾åæ˜¯ç›®æ ‡å›¾åƒå’Œé»‘è‰²èƒŒæ™¯çš„æ··åˆï¼Œå³$$0+g\\cdot a = h.$$\nè§£å‡ºæ¥å°±æ˜¯$$a=1+h-c,~g=h/a.$$\nåˆå› ä¸ºè§£éœ€è¦æ»¡è¶³$a,g\\in(0,1]$ï¼Œæ‰€ä»¥$c$å’Œ$h$éœ€è¦æ»¡è¶³ä¸ç­‰å¼$$h\\le c\u0026lt;1+h$$ å³ä¾§å½“ä¸”ä»…å½“$c=1,~h=0$æ—¶ä¸æˆç«‹ã€‚\nå®ç° è¿™ä¸ªç¨‹åºå®ç°èµ·æ¥æ²¡æœ‰ä»€ä¹ˆéš¾åº¦ï¼Œpython ä»£ç å¦‚ä¸‹ï¼ˆéœ€è¦ Pillow ä¸ numpyï¼‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºäº†æ»¡è¶³ä¸Šé¢çš„ä¸ç­‰å¼ï¼Œåœ¨ç¨‹åºä¸­éœ€è¦é‡æ–°åˆ†é…ä¸¤å¼ åŸå›¾çš„ç°åº¦çš„èŒƒå›´ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 import numpy as np from PIL import Image # è¯»å–å›¾ç‰‡+è½¬ç°åº¦ cover = Image.open(\u0026#34;./cover.png\u0026#34;).convert(\u0026#34;L\u0026#34;) hidden = Image.open(\u0026#34;./hidden.png\u0026#34;).convert(\u0026#34;L\u0026#34;) assert cover.size == hidden.size cover = np.asarray(cover) hidden = np.asarray(hidden) # æŒ‰ç…§çº¦æŸæ¡ä»¶è°ƒæ•´åƒç´ èŒƒå›´ cover_min, cover_max = cover.min(), cover.max() hidden_min, hidden_max = hidden.min(), hidden.max() cd = cover_max - cover_min hd = hidden_max - hidden_min divide_portion = hd/(hd*1.0+cd) cover_f = (cover-cover_min)*1.0/cd * (1-divide_portion-1/255) + divide_portion hidden_f = (hidden-hidden_min)*1.0/hd * divide_portion # è®¡ç®— alpha = 1-cover_f+hidden_f gray = hidden_f/alpha alpha = (alpha*255).astype(np.uint8) gray = (gray*255).astype(np.uint8) result = np.stack([gray,gray,gray,alpha], axis=-1) # ä¿å­˜ç»“æœ img = Image.fromarray(result) img.save(\u0026#34;./output.png\u0026#34;) è¿™æ˜¯éšæ‰‹æŠ“çš„ä¸¤å¼ é»‘ç™½è¡¨æƒ…åŒ…åšå‡ºæ¥çš„æ•ˆæœï¼Œé¡ºåºå’Œä¸Šé¢çš„å±•ç¤ºä¸€æ ·ï¼Œæ‚¨å¯ä»¥é€šè¿‡åˆ‡æ¢æš—è‰²æ¨¡å¼æŸ¥çœ‹æ•ˆæœï¼š\næ³¨ï¼šåœ¨ QQ å‘é€æ­¤ç±»å›¾ç‰‡æ—¶ï¼Œä¸€å®šè¦é€‰æ‹©å‘é€åŸå›¾ï¼Œå¦åˆ™ QQ å¯èƒ½ä¼šåœ¨å‹ç¼©è¿‡ç¨‹ä¸­å»æ‰é€æ˜åº¦é€šé“ï¼Œå¯¼è‡´å…¶å¤±æ•ˆã€‚\n","date":"2023-01-03T23:51:54+08:00","image":"https://files.furffisite.link/blogimg/20230104022542-b692e6e89157626a929575a0b97e5583-3e819.jpg","permalink":"https://blog.furffisite.link/p/qq-duplicity-image/","title":"åˆ©ç”¨é€æ˜åº¦é€šé“åˆ¶ä½œ QQ å†…è¡¨é‡Œä¸ä¸€çš„å›¾ç‰‡"},{"content":"å¦‚ä½•åœ¨$\\LaTeX$ä¸­å°†è¶…å‡ºæ–‡æœ¬å®½åº¦çš„æµ®åŠ¨ä½“ï¼ˆè¡¨æ ¼/å›¾ç‰‡ï¼‰å±…ä¸­ï¼Ÿè¿™ä¸ªé—®é¢˜æˆ‘æ›¾å¤šæ¬¡é‡åˆ°è¿‡ï¼Œä½†æ˜¯æ²¡æœ‰ä¸€æ¬¡è®°å¾—æ€ä¹ˆè§£å†³ï¼Œæ¯æ¬¡éƒ½éœ€è¦è°·æ­Œã€‚ä»Šå¤©ä¹Ÿç¢°åˆ°äº†è¿™ä¸ªæƒ…å†µï¼Œå› æ­¤å°†è§£å†³æ–¹æ¡ˆè®°å½•å¤‡å¿˜ã€‚\næˆ‘çœ‹åˆ°çš„æœ€ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆå‡ºè‡ª $\\TeX$ çš„ StackExchange ä¸­çš„è¿™ç¯‡å›ç­”ã€‚åªè¦åœ¨æµ®åŠ¨ä½“å†…å‡å°‘å·¦å³è¾¹è·å³å¯ï¼Œä¹Ÿå°±æ˜¯ä¸‹åˆ—ç¤ºä¾‹çš„ç¬¬ 3-4 è¡Œï¼š\n1 2 3 4 5 6 7 \\begin{figure}[t] \\centering \\addtolength{\\leftskip}{-2cm} % increase (absolute) value if needed \\addtolength{\\rightskip}{-2cm} \\includegraphics[width=1.2\\textwidth]{image} \\caption{example}\\label{fig:example} \\end{figure} æ•ˆæœå¦‚ä¸‹å›¾ï¼š\n","date":"2022-12-24T12:38:21+08:00","image":"https://files.furffisite.link/blogimg/20230511163659-9e52e93f3d72fae5e3a97613e49e921f-97fa4.jpg","permalink":"https://blog.furffisite.link/p/latex-widefloat-centering/","title":"å¦‚ä½•å°†LaTeXå†…è¶…å‡ºæ–‡æœ¬å®½åº¦çš„æµ®åŠ¨ä½“å±…ä¸­"},{"content":"å‰è¨€ ä»Šå¤©æƒ³ç»™æˆ‘è¿™ä¸ªåšå®¢åŠ ä¸€å¼ å›¾ç‰‡ï¼Œä½†æ˜¯æŠŠå›¾ç‰‡æ–‡ä»¶å’Œåšå®¢çš„æ–‡ç« æ”¾åœ¨ä¸€èµ·ï¼Œå†…å®¹ç®¡ç†æ¯”è¾ƒéº»çƒ¦ï¼Œå¹¶ä¸”ä¼šå¢å¤§ git ä»“åº“çš„ä½“ç§¯ã€‚å› æ­¤æˆ‘å°±æƒ³åˆ°äº†ä½¿ç”¨å›¾åºŠåˆ†æµåšå®¢ä¸­çš„å›¾ç‰‡ã€‚\nåœ¨ç½‘ä¸Šæœç´¢äº†ä¸€äº›å›¾åºŠæœåŠ¡ï¼Œå‘ç°å›½å†…å…è´¹çš„å›¾åºŠæœåŠ¡è¦ä¹ˆè®¿é—®æ…¢ï¼ˆå› ä¸ºæºæœåŠ¡å™¨åœ¨æµ·å¤–ï¼‰ï¼Œè¦ä¹ˆä¸ç¨³å®šï¼ˆå­˜åœ¨å…³ç«™/è¢«å¢™æˆ–è€…è½¬ä¸ºä»˜è´¹çš„å¯èƒ½ï¼‰ï¼Œè€Œå›½å¤–è‘—åçš„å›¾åºŠ imgur åœ¨å›½å†…ä¹Ÿå¤„äºåŠå¢™çš„çŠ¶æ€ã€‚äºæ˜¯å°±æƒ³åˆ°äº†ä½¿ç”¨äº‘è®¡ç®—å‚å•†æä¾›çš„ OSS å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œè™½ç„¶æ”¶è´¹ä½†æ˜¯å¯¹äºæˆ‘è¿™ç§æœ‰è®¡åˆ’é•¿æ—¶é—´è¿è¥ä¸‹å»çš„åšå®¢è€Œè¨€ï¼Œå›¾åºŠçš„å¯é æ€§æ˜¯æœ€é‡è¦çš„ã€‚æˆ‘å¯ä¸æƒ³å› ä¸ºå›¾ç«™æŒ‚æ‰å¯¼è‡´æˆ‘åœ¨æœªæ¥çš„æŸä¸€å¤©è¦é‡æ–°æ‰¾åˆ°å†ä¸Šä¼ è¿™äº›å›¾ç‰‡ã€‚\nåœ¨çœ‹äº†é˜¿é‡Œäº‘ã€è…¾è®¯äº‘å’Œåä¸ºäº‘ä¸‰å®¶ä¹‹åæˆ‘é€‰æ‹©äº†é˜¿é‡Œäº‘ï¼Œå› ä¸ºé˜¿é‡Œäº‘æœ‰æ¯æœˆ 5GB å­˜å‚¨å’Œå¤–ç½‘æµé‡çš„çš„å…è´¹é¢åº¦ï¼Œè¯·æ±‚è´¹ç”¨ä¹Ÿå°±æ¯ä¸‡æ¬¡ä¸€æ¯›é’±ï¼Œå¯¹äºæˆ‘è¿™ç§åˆšå¼€çš„å°ç«™è€Œè¨€ï¼Œå­˜å‚¨ã€æµé‡å’Œè¯·æ±‚éƒ½ä¸ä¼šå¾ˆå¤§ï¼ˆå¦‚æœè¢«æ”»å‡»é‚£å°±æ˜¯å¦ä¸€å›äº‹äº†ï¼Œè¿˜æœ›æ‚¨æ‰‹ä¸‹ç•™æƒ…ï¼‰ã€‚å…³äºé˜¿é‡Œäº‘çš„å®šä»·è¯¦æƒ…å¯ä»¥æŸ¥çœ‹é˜¿é‡Œäº‘çš„ä»·æ ¼è®¡ç®—å™¨ã€‚\nç„¶åæˆ‘å°±æŒ‰ç…§è¿™ç¯‡åšæ–‡çš„æ­¥éª¤æ­å»ºäº†å›¾åºŠï¼Œé€”ä¸­é‡åˆ°äº†åŸæ–‡æ²¡æœ‰æåŠçš„è®¸å¤šé—®é¢˜ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹å®Œæ•´çš„æ­¥éª¤ã€æˆ‘é‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆã€‚\nä¸»è¦æ“ä½œæµç¨‹ åˆ›å»ºBucketï¼šå¼€é€š OSS å¹¶åˆ›å»º Bucketã€‚åˆ›å»º Bucket æ—¶é€‰æ‹©æµ·å¤–çš„åœ°åŸŸï¼ˆå¦‚æœåœ¨åˆ«çš„åœ°åŸŸæ²¡æœ‰æœåŠ¡å™¨çš„è¯ï¼Œå»ºè®®ä½¿ç”¨é¦™æ¸¯ï¼‰ï¼Œå­˜å‚¨ç±»å‹é€‰æ‹©æ ‡å‡†å­˜å‚¨å³å¯ï¼Œè¯»å†™æƒé™ä¸€å®šè¦é€‰æ‹©ç§æœ‰ï¼Œå…¶ä½™çš„é™„åŠ æœåŠ¡æŒ‰éœ€å¯ç”¨ï¼ˆæœ‰çš„å¾—åŠ é’±ï¼‰ã€‚åˆ›å»ºå®Œæˆåå¯ä»¥å‘ Bucket ä¸­ä¸Šä¼ ä¸€å¼ å›¾ç‰‡ä½œä¸ºæµ‹è¯•å›¾ã€‚\né…ç½®è®¿é—®æƒé™ï¼šè¿›å…¥æƒé™æ§åˆ¶ -\u0026gt; Bucket æˆæƒç­–ç•¥é¢æ¿ï¼Œæ·»åŠ æˆæƒï¼Œé…ç½®å¦‚ä¸‹å›¾ã€‚\nIP å­—æ®µå¡«å†™çš„æ˜¯ CloudFlare çš„èŠ‚ç‚¹ IPï¼Œåˆ—è¡¨å¦‚ä¸‹ï¼ˆæ¥è‡ªçŸ¥ä¹ä¸“æ ï¼‰ï¼š\n173.245.48.0/20,103.21.244.0/22,103.22.200.0/22,103.31.4.0/22, 141.101.64.0/18,108.162.192.0/18,190.93.240.0/20,188.114.96.0/20, 197.234.240.0/22,198.41.128.0/17,162.158.0.0/15,104.16.0.0/12, 172.64.0.0/13,131.0.72.0/22,103.21.244.0/22,103.22.200.0/22, 103.31.4.0/22,104.16.0.0/12,108.162.192.0/18,131.0.72.0/22, 141.101.64.0/18,162.158.0.0/15,172.64.0.0/13,173.245.48.0/20, 188.114.96.0/20,190.93.240.0/20,197.234.240.0/22,198.41.128.0/17 é…ç½® CDNï¼šåœ¨ CloudFlare çš„ DNS ç®¡ç†é¢æ¿æ·»åŠ  CNAME è®°å½•ï¼Œç›®æ ‡è®¾ä¸º Bucket çš„åŸŸåï¼ˆå¯ä»¥åœ¨ Bucket çš„æ¦‚è§ˆç•Œé¢æ‰¾åˆ°ï¼‰ï¼Œä»£ç†çŠ¶æ€è®¾ä¸ºå·²ä»£ç†ï¼Œå¦åˆ™ CDN ä¸èµ·ä½œç”¨ã€‚ ç»‘å®šåŸŸåï¼šåœ¨é˜¿é‡Œäº‘çš„ Bucket é…ç½® -\u0026gt; åŸŸåç®¡ç†ç•Œé¢ç»‘å®šä½ åˆšè®¾ç½®çš„åŸŸåï¼Œè¿™æ—¶é˜¿é‡Œäº‘éœ€è¦éªŒè¯åŸŸåçš„æ‰€æœ‰æƒï¼ŒæŒ‰ç…§å…¶æ‰€è¯´çš„åœ¨ CloudFlare çš„ DNS ç®¡ç†å¤„æ·»åŠ æŒ‡å®š TXT è®°å½•å³å¯ã€‚\nåˆ›å»ºå¹¶æ·»åŠ è¯ä¹¦ï¼šåœ¨ CloudFlare çš„é…ç½®é¢æ¿çš„ SSL/TLS -\u0026gt; æºæœåŠ¡å™¨å¤„ï¼Œé€‰æ‹©åˆ›å»ºè¯ä¹¦ã€‚åˆ›å»ºä¹‹åä¼šå‘Šè¯‰ä½ æºè¯ä¹¦ä¸ç§é’¥ï¼Œè¿™ä¸ªç•Œé¢æš‚æ—¶ä¸è¦åŠ¨ã€‚æ‰“å¼€åˆšæ‰åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°ç»‘å®šè¯ä¹¦çš„ç•Œé¢ï¼Œé€‰æ‹©è¯ä¹¦æ‰˜ç®¡ï¼Œå¹¶ä¸Šä¼  SSL è¯ä¹¦ï¼Œè¿™æ—¶ä¼šæ‰“å¼€SSL è¯ä¹¦çš„ç•Œé¢ï¼Œé€‰æ‹©ä¸Šä¼ è¯ä¹¦ï¼Œå¹¶å°† CloudFlare ç»™å‡ºçš„æºè¯ä¹¦å’Œå¯†é’¥å¤åˆ¶åˆ°ä¸Šä¼ è¯ä¹¦çš„å¯¹åº”å­—æ®µå¤„ï¼ˆè¯ä¹¦åå­—éšä¾¿è®¾ï¼‰ï¼Œç„¶åç¡®å®šã€‚è¿™æ—¶åˆ‡æ¢å›ä¸Šä¼  SSL è¯ä¹¦ï¼Œåº”è¯¥å°±èƒ½åœ¨è¯ä¹¦åç§°å¤„çœ‹åˆ°åˆšåˆšè®¾ç½®çš„è¯ä¹¦åå­—äº†ï¼ˆçœ‹ä¸åˆ°çš„è¯é‡å¼€ä¸€ä¸‹è¿™ä¸ªç•Œé¢è¯•è¯•ï¼‰ï¼Œé€‰ä¸­ï¼Œç„¶åç‚¹ä¸‹æ–¹çš„ä¸Šä¼ å³å¯ã€‚\nè¿™æ—¶å°±å·²ç»å¯ä»¥é€šè¿‡ä½ è®¾ç½®çš„åŸŸåè®¿é—®åˆšæ‰ä¸Šä¼ çš„æµ‹è¯•å›¾ç‰‡äº†ã€‚å‡å¦‚æµ‹è¯•å›¾ç‰‡filename.jpgå­˜å‚¨åœ¨ OSS çš„folderæ–‡ä»¶å¤¹ä¸‹ï¼Œä½ è®¾ç½®çš„åŸŸåä¸ºimage.example.orgï¼Œåˆ™è®¿é—®è·¯å¾„ä¸ºhttps://image.example.org/folder/filename.jpgã€‚\nå®‰å…¨æ€§é…ç½® è·¨åŸŸè®¾ç½®ï¼šåœ¨é˜¿é‡Œäº‘ OSS çš„æ•°æ®å®‰å…¨ -\u0026gt; è·¨åŸŸè®¾ç½®ä¸­åˆ›å»ºè·¨åŸŸè§„åˆ™ï¼Œæ¥æºè®¾ç½®ä¸ºä½ çš„ç½‘ç«™çš„åœ°å€ã€‚ä¸ºäº†èƒ½è®©ç½‘ç«™åœ¨æœ¬åœ°æµ‹è¯•æ—¶ä¹Ÿèƒ½æ­£å¸¸å±•ç¤ºå›¾ç‰‡ï¼Œå»ºè®®åŒæ—¶æ·»åŠ localhost:*ä¸127.0.0.1:*ã€‚ é˜²ç›—é“¾è®¾ç½®ï¼šå’Œè·¨åŸŸè®¾ç½®ç±»ä¼¼ã€‚ä¸åŒä¹‹å¤„åœ¨äº Referer æ˜¯åŒ…å«è¯·æ±‚åè®®çš„ï¼Œæ‰€ä»¥ç±»ä¼¼äºexample.orgæˆ–localhost:*ç­‰ä¸åŒ…æ‹¬åè®®çš„é…ç½®æ˜¯æ— æ•ˆçš„ï¼Œéœ€è¦æ”¹ä¸ºhttps://example.comæˆ–*://localhost:*ï¼›éœ€è¦æ³¨æ„çš„æ˜¯*.example.orgè™½ç„¶æ˜¯æœ‰æ•ˆçš„ï¼Œä½†æ˜¯æ²¡æœ‰æŒ‡å®š https åè®®ï¼Œå®‰å…¨èµ·è§æœ€å¥½æ”¹ä¸ºhttps://*.example.orgã€‚ PicGo é…ç½® PicGo æ˜¯ä¸€æ¬¾å¿«é€Ÿä¸Šä¼ å›¾ç‰‡åˆ°å›¾åºŠï¼Œå¹¶è‡ªåŠ¨å¤åˆ¶å›¾ç‰‡URLåˆ°å‰ªè´´æ¿çš„å·¥å…·ï¼Œä½ å¯ä»¥åœ¨ Github çš„ release é¡µè·å–è¯¥ç¨‹åºã€‚\næƒé™è®¾ç½®ï¼šåœ¨é˜¿é‡Œäº‘çš„æƒé™æ§åˆ¶ -\u0026gt; Bucket æˆæƒç­–ç•¥é¢æ¿æ–°å¢æˆæƒï¼Œé…ç½®å¦‚ä¸‹ï¼š å¦‚æœå½“å‰æ²¡æœ‰RAMå­å¸å·ï¼Œè¯·ç‚¹å‡»å³ä¸Šè§’å¤´åƒ -\u0026gt; è®¿é—®æ§åˆ¶ï¼Œç„¶ååœ¨å·¦ä¾§çš„èº«ä»½ç®¡ç† -\u0026gt; ç”¨æˆ·å¤„åˆ›å»ºä¸€ä¸ªå­å¸å·ã€‚åˆ›å»ºå®Œæˆååœ¨å­å¸å·çš„è¯¦æƒ…é¡µåˆ›å»º AccessKeyï¼Œå¾—åˆ° AccessKey çš„ KeyID ä¸KeySecretï¼Œä¿ç•™å¤‡ç”¨ã€‚\nä¸Šä¼ é…ç½®ï¼šæ‰“å¼€ PicGo ä¸»ç•Œé¢ï¼Œåœ¨å›¾åºŠè®¾ç½® -\u0026gt; é˜¿é‡Œäº‘ OSS å†…å¡«å†™å¯¹åº”çš„è¡¨å•é¡¹ã€‚â€œKeyIDâ€ ä¸ â€œKeySecretâ€ å³åˆšæ‰è·å–çš„å­å¸å· AccessKey çš„ KeyID ä¸ KeySecretï¼Œâ€œè®¾å®š Bucketâ€ä¸º Bucket çš„åç§°ï¼Œâ€œå­˜å‚¨åŒºåŸŸâ€ä¸º Bucket æ‰€åœ¨åŒºåŸŸï¼ˆä¸ Bucket åŸŸåå†…çš„å€¼ç»Ÿä¸€ï¼Œä¾‹å¦‚oss-cn-hongkongï¼‰ï¼Œè‡ªå®šä¹‰åŸŸåå¡«å†™ä½ è®¾ç½®çš„åŸŸåï¼Œå…¶ä½™ä¸¤é¡¹æŒ‰éœ€å¡«å†™å³å¯ã€‚é…ç½®å®Œæˆåç‚¹å‡»ç¡®å®šå¹¶è®¾ä¸ºé»˜è®¤å›¾åºŠã€‚\næ³¨ï¼šå¦‚æœä½ ä½¿ç”¨çš„æ¡Œé¢ç¯å¢ƒæ˜¯ KDE Plasmaï¼Œå¯èƒ½éœ€è¦åœ¨ PicGo è®¾ç½®å†…æ‰“å¼€â€œä½¿ç”¨å†…ç½®å‰ªè´´æ¿ä¸Šä¼ â€ä¸€é¡¹ï¼Œå¦åˆ™æ— æ³•æ­£å¸¸ä»å‰ªè´´æ¿ç›´æ¥ä¸Šä¼ å›¾ç‰‡ã€‚æˆ‘ä½¿ç”¨çš„ Linux å‘è¡Œç‰ˆæ˜¯ KDE Neonï¼Œå…¶å®ƒå‘è¡Œç‰ˆ/æ¡Œé¢ç¯å¢ƒ/æ“ä½œç³»ç»Ÿå°šæœªæµ‹è¯•ã€‚\n","date":"2022-12-20T01:48:09+08:00","image":"https://files.furffisite.link/blogimg/202212251307965.jpg","permalink":"https://blog.furffisite.link/p/imagebed-oss-conf/","title":"ä½¿ç”¨é˜¿é‡Œäº‘ OSS å­˜å‚¨æœåŠ¡ + CloudFlare é…ç½®å›¾åºŠ"}]