<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Python on Furffiblog</title><link>https://blog.furffisite.link/tags/python/</link><description>Recent content in Python on Furffiblog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Sun, 20 Oct 2024 17:05:46 +0800</lastBuildDate><atom:link href="https://blog.furffisite.link/tags/python/index.xml" rel="self" type="application/rss+xml"/><item><title>ç”¨ Python å†™ä¸€ä¸ªç®€å•çš„å•é¡µé¢é™æ€ç½‘ç«™ç”Ÿæˆå™¨</title><link>https://blog.furffisite.link/p/liveserver/</link><pubDate>Sun, 20 Oct 2024 17:05:46 +0800</pubDate><guid>https://blog.furffisite.link/p/liveserver/</guid><description>&lt;img src="https://files.furffisite.link/blogimg/20241020234336-67f7ee39e8f8df0b.jpg" alt="Featured image of post ç”¨ Python å†™ä¸€ä¸ªç®€å•çš„å•é¡µé¢é™æ€ç½‘ç«™ç”Ÿæˆå™¨" />&lt;p>æˆ‘æœ€åˆçš„ä»»åŠ¡æ˜¯åŸºäºå·²æœ‰çš„æ¨¡æ¿ç»™æˆ‘ä¹‹å‰å‚ä¸çš„è®ºæ–‡åšä¸€ä¸ª project pageï¼Œé€‰ç”¨çš„æ¨¡æ¿æ˜¯ &lt;a class="link" href="https://github.com/eliahuhorwitz/Academic-project-page-template" target="_blank" rel="noopener"
>eliahuhorwitz/Academic-project-page-template&lt;/a>ã€‚ç„¶è€Œï¼Œè¿™ä¸ªæ¨¡æ¿æ˜¯ä¸€ä¸ª html æ–‡ä»¶ï¼Œåœ¨æ¶‰åŠåˆ°åˆ—è¡¨ï¼ˆä¾‹å¦‚ä½œè€…åˆ—è¡¨ï¼‰æ—¶éœ€è¦æ‰‹åŠ¨å¤åˆ¶ç²˜è´´å¹¶é€ä¸€ä¿®æ”¹å†…å®¹ï¼Œè¿™ä¸ä»…ç¹çï¼Œä¹Ÿä¸ä¾¿äºåç»­çš„ä¿®æ”¹ï¼ˆä¾‹å¦‚æ”¹å±•ç¤ºæ ¼å¼ï¼Œæˆ–æ˜¯è¿ç§»åˆ°åˆ«çš„é¡¹ç›®ï¼‰ã€‚æˆ‘å·æ‡’çš„å¤©æ€§ä¸å…è®¸æˆ‘è¿™æ ·åšï¼ˆå¥½éº»çƒ¦å•ŠğŸ˜«ï¼‰ï¼Œäºæ˜¯æˆ‘èŒç”Ÿäº†ä¸€ä¸ªè‡ªç„¶çš„æƒ³æ³•ï¼šå°† html ä¿®æ”¹ä¸º &lt;a class="link" href="https://jinja.palletsprojects.com/en/3.0.x/" target="_blank" rel="noopener"
>jinja&lt;/a> æ¨¡æ¿ï¼Œä½¿ç”¨ç¨‹åºæ¸²æŸ“æ¨¡æ¿å¾—åˆ°æœ€ç»ˆçš„é™æ€é¡µé¢ã€‚&lt;/p>
&lt;h2 id="ç¬¬ä¸€ç‰ˆåŸºç¡€åŠŸèƒ½">ç¬¬ä¸€ç‰ˆï¼šåŸºç¡€åŠŸèƒ½
&lt;/h2>&lt;p>è¿™æ—¶ï¼Œæˆ‘çš„æƒ³æ³•æ¯”è¾ƒç®€å•ï¼šä½¿ç”¨ Python æ ‡å‡†åº“é‡Œçš„ &lt;a class="link" href="https://docs.python.org/3/library/tomllib.html" target="_blank" rel="noopener"
>&lt;code>tomllib (python&amp;gt;=3.11)&lt;/code>&lt;/a> è¯»å– toml æ–‡ä»¶ä½œä¸º contextï¼Œå¹¶ä½¿ç”¨ &lt;a class="link" href="https://jinja.palletsprojects.com/en/3.0.x/" target="_blank" rel="noopener"
>jinja&lt;/a> è¯»å–æ¨¡æ¿è¿›è¡Œæ¸²æŸ“ï¼Œæœ€åå°†æ¸²æŸ“ç»“æœè¾“å‡ºåˆ° html æ–‡ä»¶é‡Œã€‚ä»£ç å®ç°ä¹Ÿéå¸¸ç®€æ´ï¼Œä»…åŒ…å«å‡ è¡Œä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">tomllib&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">jinja2&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">Environment&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">FileSystemLoader&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">target_folder&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;./dist&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">env&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Environment&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">loader&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">FileSystemLoader&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;./template&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">autoescape&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">False&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">with&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;./config.toml&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;rb&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">config_file&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">config&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">tomllib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">config_file&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">page&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">env&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get_template&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;index.html&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">render&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">with&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">target_folder&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;index.html&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="s1">&amp;#39;w&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">page&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½œä¸ºè¾“å…¥çš„tomlæ–‡ä»¶ç±»ä¼¼äºè¿™æ ·ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">paper&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">title&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">conference&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">abstract&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[[&lt;/span>&lt;span class="nx">paper&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">authors&lt;/span>&lt;span class="p">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">name&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;...&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">......&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šè¿‡ç»“åˆ TOML é…ç½®æ–‡ä»¶ä¸ Jinja æ¨¡æ¿ä¸­çš„å¾ªç¯å’Œåˆ¤æ–­è¯­å¥ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç¼–è¾‘ html çš„å·¥ä½œè½¬æ¢ä¸ºç¼–è¾‘é…ç½®æ–‡ä»¶ã€‚ç›¸è¾ƒäºç›´æ¥ç¼–è¾‘ htmlï¼Œåè€…æ˜¾ç„¶æ›´ä¸ºç®€ä¾¿ã€‚&lt;/p>
&lt;p>ç»™ä»¥ä¸Šçš„ä»£ç åŠ ä¸Šä¸€äº›å¤„ç†é™æ€æ–‡ä»¶çš„é€»è¾‘ï¼Œä¾‹å¦‚ï¼š&lt;/p>
&lt;ol>
&lt;li>æ„å»ºå‰æ¸…é™¤ç›®æ ‡æ–‡ä»¶å¤¹&lt;/li>
&lt;li>æ„å»ºæ—¶ä»æŒ‡å®šæ–‡ä»¶å¤¹å¤åˆ¶æ–‡ä»¶åˆ°ç›®æ ‡æ–‡ä»¶å¤¹&lt;/li>
&lt;/ol>
&lt;p>é‚£æ€ä¹ˆé¢„è§ˆæ„å»ºç»“æœå‘¢ï¼Ÿæˆ‘å½“æ—¶çš„åšæ³•æ˜¯åœ¨ &lt;code>./dist&lt;/code> ä¸­ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤å¯åŠ¨ä¸€ä¸ª Python çš„ç®€æ˜“æ–‡ä»¶æœåŠ¡å™¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ python3 -m http.server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åï¼Œå†ç¼–å†™&lt;a class="link" href="https://github.com/ai4co/reevo/blob/7fcf3878943629c08a38983bbab1b1822f5a924b/docs/publish.sh" target="_blank" rel="noopener"
>ä¸€ç‚¹ bash è„šæœ¬&lt;/a>å®ç°ä¸€é”®éƒ¨ç½²åˆ° GitHub Pagesï¼Œå³å¯å½¢æˆä¸€ä¸ªç®€æ˜“çš„å•é¡µé¢é™æ€ç½‘ç«™ç”Ÿæˆå™¨ï¼Œè¿™ä¾¿æ˜¯&lt;a class="link" href="https://github.com/ai4co/reevo/blob/27f4bcd57034bdf82dff76f91b2cf4c1575f4c6f/docs/build.py" target="_blank" rel="noopener"
>ç¬¬ä¸€ç‰ˆ&lt;/a>ã€‚&lt;/p>
&lt;h2 id="ç¬¬äºŒç‰ˆç›‘æµ‹æ–‡ä»¶æ›´æ”¹å¹¶è‡ªåŠ¨æ„å»º">ç¬¬äºŒç‰ˆï¼šç›‘æµ‹æ–‡ä»¶æ›´æ”¹å¹¶è‡ªåŠ¨æ„å»º
&lt;/h2>&lt;p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘å¾ˆå¿«å‘ç°ç¬¬ä¸€ç‰ˆå­˜åœ¨ä¸€ä¸ªæ˜¾è‘—é—®é¢˜ï¼šæ¯æ¬¡ä¿®æ”¹æ¨¡æ¿æˆ–é…ç½®åï¼Œéƒ½éœ€è¦æ‰‹åŠ¨æ‰§è¡Œæ„å»ºå‘½ä»¤å¹¶åˆ·æ–°é¡µé¢ã€‚
æˆ‘é’ˆå¯¹å‰è€…çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ &lt;code>watch&lt;/code> æŒ‡ä»¤æ¯éš”ä¸€ç§’æ‰§è¡Œä¸€æ¬¡æ„å»ºè„šæœ¬ï¼Œä¾‹å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ watch -d -n1 python3 build.py
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½†æ˜¯ï¼Œæˆ‘è®¤ä¸ºè¿™æ ·çš„è§£å†³æ–¹æ³•ä¸æ˜¯å¾ˆä¼˜é›…ï¼Œäºæ˜¯å°±æƒ³ç€ï¼Œèƒ½ä¸èƒ½ç”±æ„å»ºè„šæœ¬æŒç»­ç›‘æµ‹æ–‡ä»¶æ›´æ”¹ï¼Œå¹¶åœ¨æœ‰éœ€è¦çš„æ—¶å€™è‡ªåŠ¨æ„å»ºå‘¢ï¼Ÿç­”æ¡ˆå½“ç„¶æ˜¯å¯ä»¥çš„ã€‚äº’è”ç½‘å¯¹æ­¤ç»™å‡ºäº†å››ç§æ–¹æ¡ˆï¼š&lt;/p>
&lt;ol>
&lt;li>ä½¿ç”¨ &lt;a class="link" href="https://python-watchdog.readthedocs.io/en/stable/index.html" target="_blank" rel="noopener"
>watchdog åº“&lt;/a>&lt;/li>
&lt;li>ä½¿ç”¨ &lt;a class="link" href="https://pypi.org/project/inotify/" target="_blank" rel="noopener"
>inotify åº“&lt;/a> ï¼ˆä»…é™ Linuxï¼‰&lt;/li>
&lt;li>è®¡ç®—æ–‡ä»¶æ•£åˆ—å€¼ï¼Œåˆ¤æ–­æ˜¯å¦ä¿®æ”¹&lt;/li>
&lt;li>ä½¿ç”¨ os åº“è·å–æ–‡ä»¶ä¿®æ”¹æ—¶é—´ï¼Œåˆ¤æ–­æ˜¯å¦ä¿®æ”¹&lt;/li>
&lt;/ol>
&lt;p>å‰ä¸¤ç§æ–¹æ³•æœ€ä¸ºä¾¿æ·ï¼Œå¯ä»¥ç›´æ¥åˆ©ç”¨å·²æœ‰çš„åº“ï¼›ç¬¬ä¸‰ç§æ–¹æ³•é€šè¿‡è®¡ç®—æ–‡ä»¶æ•£åˆ—å€¼æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦ä¿®æ”¹ï¼Œè™½ç„¶ï¼Œèƒ½å‡†ç¡®è·çŸ¥æ–‡ä»¶å†…å®¹æ˜¯å¦å˜åŒ–ï¼ˆå…¶ä½™ä¸‰ç§åªæ˜¯ç›‘æµ‹æ›´æ”¹æ–‡ä»¶çš„æ“ä½œï¼‰ï¼Œä½†æ˜¯ï¼Œèµ„æºæ¶ˆè€—è¾ƒå¤§ï¼›ç¬¬å››ç§æ–¹æ³•é€šè¿‡è·å–æ–‡ä»¶ä¿®æ”¹æ—¶é—´æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦ä¿®æ”¹ï¼Œæ˜“äºç†è§£ä¸”å®ç°ç®€å•ã€‚æœ€ç»ˆï¼Œæˆ‘é€‰æ‹©äº†ç¬¬å››ç§æ–¹æ³•ï¼š&lt;/p>
&lt;p>é¦–å…ˆï¼Œå®šä¹‰ &lt;code>all_filepaths&lt;/code> å‡½æ•°ï¼ˆgeneratorï¼‰è·å–ç»™å®šæ‰€æœ‰ç›®å½•ä¸‹çš„æ‰€æœ‰è·¯å¾„ï¼Œè¿™é‡Œéœ€è¦è¿”å›æ–‡ä»¶å¤¹æ˜¯å› ä¸ºæ–‡ä»¶å¤¹çš„æœ€åä¿®æ”¹æ—¶é—´å¯ä»¥åæ˜ è¯¥æ–‡ä»¶å¤¹å†…æ˜¯å¦æœ‰æ–‡ä»¶è¢«ç§»åŠ¨æˆ–åˆ é™¤ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">all_filepaths&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">paths&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="c1"># è·å–æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰è·¯å¾„ï¼ŒåŒ…æ‹¬æ–‡ä»¶å’Œæ–‡ä»¶å¤¹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">path&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">paths&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exists&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="c1"># å¦‚æœè·¯å¾„ä¸å­˜åœ¨ï¼Œè·³è¿‡&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">pass&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">isfile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="c1"># å¦‚æœæ˜¯æ–‡ä»¶ï¼Œç›´æ¥è¿”å›æ–‡ä»¶è·¯å¾„&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">yield&lt;/span> &lt;span class="n">path&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="c1"># å¦‚æœæ˜¯æ–‡ä»¶å¤¹ï¼Œéå†æ–‡ä»¶å¤¹å†…çš„æ‰€æœ‰æ–‡ä»¶å’Œå­æ–‡ä»¶å¤¹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">root&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">files&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">walk&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">yield&lt;/span> &lt;span class="n">root&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">yield from&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">files&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ¥ä¸‹æ¥ï¼Œå®šä¹‰ä¸€ä¸ªå‡½æ•° &lt;code>build_on_change&lt;/code>ï¼Œå¾ªç¯è·å–æ–‡ä»¶çš„æœ€åæ›´æ”¹æ—¶é—´ï¼Œå¹¶åˆ¤æ–­æ–‡ä»¶æ˜¯å¦è¢«æ›´æ”¹ã€‚å¦‚æœæ£€æµ‹åˆ°æ–‡ä»¶åœ¨ä¸Šæ¬¡æ„å»ºä¹‹åæœ‰æ›´æ”¹ï¼Œåˆ™æ‰§è¡Œ &lt;code>build&lt;/code> å‡½æ•°é‡æ–°æ„å»ºé¡µé¢ã€‚æ­¤å¤„å°† &lt;code>last_update&lt;/code> åˆå€¼è®¾ä¸ºé›¶,å¯ä»¥ç¡®ä¿ç¨‹åºå¯åŠ¨åä¼šç«‹åˆ»è§¦å‘ä¸€æ¬¡æ„å»ºã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">build_on_change&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">paths&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">**&lt;/span>&lt;span class="n">build_kwargs&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="c1"># ç›‘å¬æ–‡ä»¶æ›´æ”¹å¹¶è‡ªåŠ¨æ„å»ºé¡µé¢&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">last_update&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">0.0&lt;/span> &lt;span class="c1"># åˆå§‹åŒ–æœ€åæ›´æ–°æ—¶é—´ä¸º0ï¼Œç¡®ä¿ç¨‹åºå¯åŠ¨åç«‹å³è§¦å‘ä¸€æ¬¡æ„å»º&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="kc">True&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">filepath&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">all_filepaths&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="n">paths&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">last_modified_at&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">stat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filepath&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">st_mtime&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">last_modified_at&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="n">last_update&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">build&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">**&lt;/span>&lt;span class="n">build_kwargs&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">last_update&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">time&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># æ¯éš”1ç§’æ£€æŸ¥ä¸€æ¬¡æ–‡ä»¶æ›´æ”¹&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é€šè¿‡ä»¥ä¸Šä»£ç ï¼Œä»…éœ€ 20 è¡Œå³å¯å®ç° Python åŸç”Ÿçš„è‡ªåŠ¨ç›‘æµ‹æ–‡ä»¶æ›´æ”¹çš„åŠŸèƒ½ï¼ˆå½“ç„¶ï¼Œè°ƒåº“æ›´å¿«ï¼Œä½†æ˜¯éœ€è¦å®‰è£…ä¾èµ–ï¼‰ã€‚
æœ€åï¼Œåªéœ€å†ç¼–å†™å°‘é‡ä»£ç ï¼Œåˆ©ç”¨ &lt;code>sys.argv&lt;/code> è·å–å‘½ä»¤è¡Œå‚æ•°ï¼Œå¹¶åœ¨ç¨‹åºå…¥å£å¤„åŒºåˆ†&lt;strong>å•æ¬¡æ„å»º&lt;/strong>å’Œ&lt;strong>è‡ªåŠ¨æ›´æ–°&lt;/strong>ï¼ˆé¢„è§ˆï¼‰ä¸¤ç§æ¨¡å¼ï¼Œè¿™ä¾¿æ˜¯ç¬¬äºŒç‰ˆã€‚&lt;/p>
&lt;h2 id="ç¬¬ä¸‰ç‰ˆé›†æˆé™æ€æ–‡ä»¶æœåŠ¡å™¨è‡ªåŠ¨åˆ·æ–°é¡µé¢">ç¬¬ä¸‰ç‰ˆï¼šé›†æˆé™æ€æ–‡ä»¶æœåŠ¡å™¨+è‡ªåŠ¨åˆ·æ–°é¡µé¢
&lt;/h2>&lt;p>å°½ç®¡ç¬¬äºŒç‰ˆè§£å†³äº†â€œæ‰‹åŠ¨æ‰§è¡Œæ„å»ºå‘½ä»¤å¹¶åˆ·æ–°é¡µé¢â€çš„éƒ¨åˆ†é—®é¢˜ï¼Œä½†ä¿å­˜åä»éœ€æ‰‹åŠ¨åˆ·æ–°é¡µé¢ï¼Œè¿™ä¸€ç—›ç‚¹ä¾ç„¶å­˜åœ¨ã€‚ç¬¬ä¸‰ç‰ˆçš„ç›®æ ‡ä¾¿æ˜¯å½»åº•è§£å†³è¿™ä¸€é—®é¢˜ã€‚&lt;/p>
&lt;p>å…ˆæŠŠæ¯æ¬¡éœ€è¦æ‰‹åŠ¨å¯åŠ¨çš„ &lt;code>http.server&lt;/code> é›†æˆåˆ°è„šæœ¬é‡Œæ¥ï¼šç›´æ¥ä¿®æ”¹&lt;a class="link" href="https://docs.python.org/3/library/http.server.html#http.server.SimpleHTTPRequestHandler.do_GET" target="_blank" rel="noopener"
>&lt;code>http.server&lt;/code> å®˜æ–¹æ–‡æ¡£é‡Œçš„ç¤ºä¾‹ä»£ç &lt;/a>ï¼Œç„¶ååŠ ä¸Š &lt;a class="link" href="https://docs.python.org/3/library/threading.html#threading.Thread" target="_blank" rel="noopener"
>Threading æ ‡å‡†åº“&lt;/a>ä½¿å…¶ä»¥å®ˆæŠ¤çº¿ç¨‹çš„æ–¹å¼è¿è¡Œï¼ˆä¸»ç¨‹åºé€€å‡ºæ—¶è‡ªåŠ¨ç»“æŸï¼Œæ— éœ€æ‰‹åŠ¨ç»ˆæ­¢ï¼‰ã€‚è¿™ä»…éœ€ 10 è¡Œä»£ç ï¼ˆä¸åŒ…æ‹¬ç©ºè¡Œï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">start_server_daemon&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ip&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;127.0.0.1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">port&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">8123&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">directory&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;./dist&amp;#34;&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">from&lt;/span> &lt;span class="nn">threading&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">Thread&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">import&lt;/span> &lt;span class="nn">http.server&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="nn">socketserver&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">start_server&lt;/span>&lt;span class="p">():&lt;/span> &lt;span class="c1"># åˆ›å»ºä¸€ä¸ªç®€å•çš„HTTPæœåŠ¡å™¨ï¼Œç»‘å®šåˆ°æŒ‡å®šçš„IPå’Œç«¯å£&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">with&lt;/span> &lt;span class="n">socketserver&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">TCPServer&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">ip&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">port&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">server&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">SimpleHTTPRequestHandler&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">httpd&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;Serving live preview at http://&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">ip&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">:&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">port&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">/&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">httpd&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">serve_forever&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1"># å¯åŠ¨æœåŠ¡å™¨å¹¶ä¿æŒè¿è¡Œ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># åˆ›å»ºä¸€ä¸ªå®ˆæŠ¤çº¿ç¨‹ï¼Œå½“ä¸»çº¿ç¨‹é€€å‡ºæ—¶ï¼Œå®ˆæŠ¤çº¿ç¨‹ä¹Ÿä¼šè‡ªåŠ¨é€€å‡º&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">t&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Thread&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">start_server&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">daemon&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">t&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">start&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>ä¸è¿‡è¿™æ ·çš„å®ç°æœ‰ä¸€ä¸ªé—®é¢˜ï¼šåœ¨ä¸»ç¨‹åºç»ˆæ­¢å¯¼è‡´å®ˆæŠ¤çº¿ç¨‹é€€å‡ºåï¼Œå ç”¨çš„ç«¯å£å¹¶ä¸ä¼šæ­£å¸¸é‡Šæ”¾ã€‚æŒ‰ç†æ¥è¯´ç¬¬å…­è¡Œçš„ &lt;code>with&lt;/code> è¯­å¥ä¼šåœ¨é€€å‡ºæ—¶è‡ªåŠ¨å¤„ç†ç«¯å£çš„é‡Šæ”¾ï¼Œå¯èƒ½åœ¨å®ˆæŠ¤çº¿ç¨‹æ¨¡å¼ä¸‹å°±ä¸è¡Œäº†ï¼Ÿ&lt;/p>
&lt;/blockquote>
&lt;p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¢è®¨å¦‚ä½•å®ç°é¡µé¢çš„è‡ªåŠ¨åˆ·æ–°åŠŸèƒ½ã€‚æ¢è¨€ä¹‹ï¼ŒæœåŠ¡å™¨å¦‚ä½•é€šçŸ¥æµè§ˆå™¨å†…å®¹å·²æ›´æ–°å‘¢ï¼Ÿ
&lt;a class="link" href="https://docs.python.org/3/library/http.server.html#http.server.SimpleHTTPRequestHandler.do_GET" target="_blank" rel="noopener"
>&lt;code>http.server&lt;/code> çš„å®˜æ–¹æ–‡æ¡£&lt;/a>å†…åŒæ ·æä¾›äº†ç­”æ¡ˆï¼šåœ¨å…¶æä¾›æ–‡ä»¶æ—¶ï¼Œä¼šåœ¨ response header ä¸­åŠ å…¥&lt;a class="link" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Last-Modified" target="_blank" rel="noopener"
>&lt;code>Last-Modified&lt;/code> header&lt;/a>ï¼Œè¿™ä¸ªheaderçš„æ—¶é—´æˆ³æ¥æºäºæ–‡ä»¶ç³»ç»Ÿè®°å½•çš„æœ€åæ›´æ”¹æ—¶é—´ã€‚ç”±äºæˆ‘çš„ç¨‹åºåªä¼šå…¨é‡æ„å»ºï¼Œæ‰€ä»¥ &lt;code>dist&lt;/code> ç›®å½•å†…çš„æ‰€æœ‰æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´å¿…å®šä¸æœ€åä¸€æ¬¡æ„å»ºçš„æ—¶é—´ç›¸åŒã€‚&lt;/p>
&lt;p>åŸºäºæ­¤ï¼Œæˆ‘ä»¬åªéœ€åœ¨æµè§ˆå™¨ä¸­ç”¨ JavaScript è½®è¯¢æœåŠ¡å™¨ä¸Šçš„æŸä¸ªæ–‡ä»¶ï¼ˆæˆ‘è¿™é‡Œæ˜¯åœ¨è‡ªåŠ¨æ›´æ–°æ¨¡å¼ä¸‹é¢å¤–åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ï¼‰ï¼Œè·å–å…¶ header å†…çš„ &lt;code>Last-Modified&lt;/code>ï¼Œåˆ¤æ–­é¡µé¢æ˜¯å¦æ›´æ–°ï¼Œå¦‚æœæ›´æ–°äº†å°±è°ƒç”¨ &lt;code>window.location.reload()&lt;/code> åˆ·æ–°é¡µé¢å³å¯ã€‚&lt;/p>
&lt;p>Python éƒ¨åˆ†åªéœ€è¦åˆ›å»ºä¸Šè¿°çš„ç©ºæ–‡ä»¶ï¼Œä»¥åŠåœ¨æ¨¡æ¿çš„ context ä¸­åŠ å…¥æ˜¯å¦å¯ç”¨è‡ªåŠ¨åˆ·æ–°çš„å‚æ•°å³å¯ã€‚æ¨¡æ¿å†…éœ€è¦åŠ å…¥å¦‚ä¸‹ javascript ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kd">function&lt;/span>&lt;span class="p">(){&lt;/span> &lt;span class="c1">// é˜²æ­¢å‘½åå†²çª
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kd">let&lt;/span> &lt;span class="nx">last_updated&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nb">Date&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">// åˆå§‹åŒ–ä¸ºå½“å‰æ—¶é—´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">dummy_file_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/{{preview_mode.dummy_file_path}}&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// æ¨¡æ¿æ¸²æŸ“æ—¶å¡«å……ç©ºæ–‡ä»¶åç§°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">refresh_on_change&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="c1">// å®šä¹‰å‡½æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">dummy_file_path&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">res&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">last_modified&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nb">Date&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">res&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">headers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Last-Modified&amp;#34;&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">last_updated&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">last_modified&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">location&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">reload&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">// åˆ·æ–°é¡µé¢
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">setInterval&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">refresh_on_change&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// æ¯ä¸€ç§’æ£€æŸ¥ä¸€æ¬¡æ˜¯å¦æ›´æ–°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">})();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å½“ç„¶ï¼Œè¿™æ®µ JavaScript ä»£ç éœ€è¦æ”¾åœ¨ &lt;code>&amp;lt;script&amp;gt;&lt;/code> æ ‡ç­¾å†…ï¼ŒåŒæ—¶åœ¨æ¨¡æ¿ä¸­ç¡®ä¿åªæœ‰è‡ªåŠ¨æ›´æ–°å¯ç”¨æ—¶æ‰ä¼šæ¸²æŸ“è¿™ä¸ªæ ‡ç­¾ã€‚è¿™ä¾¿æ˜¯ç¬¬ä¸‰ç‰ˆã€‚&lt;/p>
&lt;h2 id="ç¬¬å››ç‰ˆæœ€å°åŒ–ç”Ÿæˆçš„æ–‡ä»¶">ç¬¬å››ç‰ˆï¼šæœ€å°åŒ–ç”Ÿæˆçš„æ–‡ä»¶
&lt;/h2>&lt;p>é€šè¿‡æ¨¡æ¿å¼•æ“æ¸²æŸ“ç”Ÿæˆçš„ html æ–‡ä»¶ï¼Œå¸¸å¸¸ä¼šåŒ…å«å¤§é‡çš„ç©ºç™½å­—ç¬¦ã€å¼•å·å’Œæ³¨é‡Šç­‰å†—ä½™å…ƒç´ ã€‚è¿™äº›å…ƒç´ è™½ç„¶åœ¨å¼€å‘é˜¶æ®µæœ‰åŠ©äºæå‡ä»£ç çš„å¯è¯»æ€§ä¸ç»´æŠ¤æ€§ï¼Œä½†åœ¨å®é™…ç½‘é¡µåŠ è½½è¿‡ç¨‹ä¸­ï¼Œå®ƒä»¬å´æ˜¾è‘—å¢åŠ äº†æ–‡ä»¶çš„ä½“ç§¯ï¼Œè¿›è€Œæ‹–æ…¢äº†ç½‘é¡µçš„åŠ è½½é€Ÿåº¦ã€‚ä¸ºäº†ä¼˜åŒ–é¡µé¢åŠ è½½æ€§èƒ½ï¼Œæˆ‘ä»¬æœ‰å¿…è¦åœ¨æ„å»ºå®Œæˆåï¼Œå¯¹è¿™äº›å†—ä½™å­—ç¬¦è¿›è¡Œç²¾ç®€å¤„ç†ï¼Œä»¥ç¼©å‡æ–‡ä»¶å¤§å°ã€‚&lt;/p>
&lt;p>è¿™ä¸€ä¼˜åŒ–ç­–ç•¥åŒæ ·é€‚ç”¨äº css æ–‡ä»¶ï¼Œä¸åŒçš„æ˜¯ï¼Œcss æ–‡ä»¶ä¸­çš„å†—ä½™å­—ç¬¦å¾€å¾€éµå¾ªç‰¹å®šçš„æ¨¡å¼ï¼Œå¯ä»¥ç›´æ¥è¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…ä¸å»é™¤ï¼Œæˆ‘çš„ä»£ç å¦‚ä¸‹ï¼ˆè¿™æ®µä»£ç å¹¶ä¸å…¨é¢ï¼Œä½†æ˜¯å®ƒå·²ç»èƒ½æ˜¾è‘—ç¼©å°æ–‡ä»¶çš„ä½“ç§¯ï¼Œäºæˆ‘è€Œè¨€ï¼Œè¿™æ ·å°±å¤Ÿäº†ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">re&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">minify_css&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filepath&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">content&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filepath&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;r&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">minimized&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sub&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39; *\n *|/\*.*?\*/&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">content&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">minimized&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sub&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;; *(?=})|(?&amp;lt;=:) +| +(?={)&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">minimized&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">with&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filepath&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;w&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">minimized&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">filepath&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s1">: reduced from &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s1"> Bytes to &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">minimized&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s1"> Bytes&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è€Œ html çš„è§„åˆ™å¤æ‚ï¼Œæœ‰çš„ç©ºæ ¼å’Œæ¢è¡Œç¬¦çš„ç§»é™¤ä¼šå½±å“é¡µé¢çš„å‘ˆç°æ•ˆæœï¼ˆä¾‹å¦‚ &lt;code>&amp;lt;pre&amp;gt;&lt;/code> æ ‡ç­¾çš„å†…å®¹ï¼‰ã€‚å› æ­¤ï¼Œåœ¨å¤„ç† html æ–‡ä»¶æ—¶ï¼Œç›¸æ¯”äºè‡ªå·±å®ç°ï¼Œæˆ‘å†³å®šä½¿ç”¨ &lt;a class="link" href="https://htmlmin.readthedocs.io/en/latest/" target="_blank" rel="noopener"
>htmlmin åº“&lt;/a>çš„å®ç°ã€‚ä»£ç å¦‚ä¸‹ï¼Œæ³¨æ„å…¶ä¸­çš„ &lt;code>remove_all_empty_space=True&lt;/code> ä¹Ÿä¼šåœ¨ä¸€å®šæƒ…å†µä¸‹å½±å“é¡µé¢çš„å‘ˆç°ï¼Œä¾‹å¦‚ï¼Œä¸¤ä¸ª &lt;code>&amp;lt;span&amp;gt;&lt;/code> æ ‡ç­¾ä¹‹é—´çš„ç©ºæ ¼ä¹Ÿä¼šè¢«ç§»é™¤ï¼Œå¯¹äºè¿™ç§æƒ…å†µéœ€è¦å»æ‰è¿™ä¸ªå‚æ•°ï¼Œæˆ–æ˜¯åœ¨ css æˆ– &lt;code>style&lt;/code> å±æ€§ä¸­åŠ å…¥ &lt;a class="link" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/margin" target="_blank" rel="noopener"
>&lt;code>margin-right&lt;/code>&lt;/a> åˆ›é€ ç©ºéš™ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">htmlmin.main&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">minify&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">minify_html&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filepath&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">content&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filepath&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;r&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">minimized&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">minify&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">remove_comments&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">remove_all_empty_space&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">with&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filepath&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;w&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">minimized&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">filepath&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s1">: reduced from &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">content&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s1"> Bytes to &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">minimized&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s1"> Bytes&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è‡³äº JavaScript æ–‡ä»¶ï¼Œç”±äºåœ¨è¿™ä¸ªé¡¹ç›®ä¸­æˆ‘è‡ªå·±å†™çš„ js ä»£ç å¾ˆå°‘ï¼Œä¸”éƒ½å·²ç»åµŒå…¥ html æ–‡ä»¶ï¼Œè€Œå¤–éƒ¨åº“éƒ½æ˜¯é€šè¿‡ CDN å¼•å…¥çš„ï¼ŒåŠ è½½çš„å¤§å¤šæ˜¯ä¼˜åŒ–è¿‡çš„æ–‡ä»¶ï¼Œå› æ­¤æˆ‘å¹¶æ²¡æœ‰è€ƒè™‘å¯¹ js æ–‡ä»¶åšæœ€å°åŒ–ã€‚&lt;/p>
&lt;p>æœ€åï¼Œåœ¨æ„å»ºååˆ©ç”¨ä¹‹å‰å†™çš„ &lt;code>all_filepaths&lt;/code> å‡½æ•°éå† &lt;code>dist&lt;/code> æ–‡ä»¶å¤¹å†…çš„æ‰€æœ‰æ–‡ä»¶ï¼Œæ ¹æ®æ‰©å±•ååˆ¤æ–­å¯¹åº”çš„æœ€å°åŒ–æ–¹æ³•ï¼Œç„¶åè°ƒç”¨ç›¸åº”çš„å‡½æ•°æœ€å°åŒ–å³å¯ã€‚å› ä¸ºè¿™é‡Œçš„æœ€å°åŒ–æ˜¯ä¸ºäº†éƒ¨ç½²æœåŠ¡çš„ï¼Œæ‰€ä»¥åœ¨é¢„è§ˆæ¨¡å¼ä¸‹ä¸ä¼šæ‰§è¡Œè¿™æ®µä»£ç ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">path&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">all_filepaths&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">target_folder&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">isfile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">extension&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">basename&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rsplit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lower&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1"># è·å–æ–‡ä»¶æ‰©å±•å&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">extension&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;css&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">minify_css&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">extension&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;html&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;svg&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;xml&amp;#39;&lt;/span>&lt;span class="p">}:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">minify_html&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç»¼åˆä¸Šè¿°æ‰€æœ‰åŠŸèƒ½ï¼Œä¾¿å¾—åˆ°äº†ç¬¬å››ç‰ˆï¼Œä¹Ÿæ˜¯&lt;a class="link" href="https://github.com/ai4co/reevo/blob/30e87a43e05bce6a8ccb42b9d453a89f6d4a1740/docs/build.py" target="_blank" rel="noopener"
>ç›®å‰çš„æœ€ç»ˆç‰ˆ&lt;/a>ã€‚&lt;/p>
&lt;h2 id="æ€»ç»“">æ€»ç»“
&lt;/h2>&lt;p>å›é¡¾è¿™ä¸ªæµç¨‹ï¼Œæœ€åˆæˆ‘åªæ˜¯æƒ³å·ä¸ªæ‡’ï¼Œæ²¡æƒ³åˆ°æœ€ç»ˆä»˜å‡ºçš„æ—¶é—´æ¯”åŸæœ¬ä¸å·æ‡’è¿˜è¦å¤šã€‚ç„¶è€Œï¼Œè€ƒè™‘åˆ°åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘çš„æ”¶è·ï¼Œæˆ‘è§‰å¾—è¿™ä¸ªæ—¶é—´èŠ±çš„è¿˜æ˜¯å¾ˆå€¼å¾—çš„ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä¹‹å‰åœ¨ç”¨ç°æˆçš„ live server æ—¶ï¼Œä»æœªæƒ³è¿‡è¿™ä¸ªåŠŸèƒ½çš„å®ç°å¯ä»¥å¦‚æ­¤ç®€å•ï¼ˆå½“ç„¶æˆ‘çš„å®ç°ä¹Ÿæ¯”è¾ƒç³™å°±æ˜¯äº†ï¼‰ã€‚åŒæ—¶ï¼Œè¿™æ¬¡çš„ç»éªŒã€ç¼–å†™çš„è„šæœ¬å’Œæ¨¡æ¿ï¼Œåˆ°ä»¥ååšå•é¡µé¢é™æ€ç½‘ç«™æˆ–è€…æ–°çš„è®ºæ–‡çš„ project page æ—¶ä¹Ÿéƒ½å¯ä»¥æ´¾ä¸Šç”¨åœºã€‚&lt;/p>
&lt;p>å½“ç„¶ï¼Œæˆ‘ä¹ŸçŸ¥é“å¸‚é¢ä¸Šæœ‰å¾ˆå¤šç°æˆçš„é™æ€ç½‘ç«™ç”Ÿæˆå·¥å…·ï¼Œä¾‹å¦‚åŸºäº Python çš„ &lt;a class="link" href="https://docs.getpelican.com/en/latest/" target="_blank" rel="noopener"
>Pelican&lt;/a>ï¼ŒåŸºäº Ruby çš„ &lt;a class="link" href="https://jekyllrb.com/" target="_blank" rel="noopener"
>Jekyll&lt;/a> å’Œæˆ‘æ„å»ºè¿™ä¸ªåšå®¢æ‰€ä½¿ç”¨çš„åŸºäº Golang çš„ &lt;a class="link" href="https://gohugo.io/" target="_blank" rel="noopener"
>hugo&lt;/a>ï¼Œé—®é¢˜æ˜¯å®ƒä»¬éƒ½æ˜¯é’ˆå¯¹å¤šé¡µé¢çš„å†…å®¹å‘ç½‘ç«™ï¼Œå®ƒä»¬çš„é¡¹ç›®ç»“æ„ä¹Ÿæ¯”è¾ƒå¤æ‚ï¼Œå¯¹äºæˆ‘çš„å•é¡µé¢ã€ä»…æœ‰ä¸¤å¼ å›¾ç‰‡çš„ project page è€Œè¨€ï¼Œç¡®å®æ˜¾å¾—æœ‰äº›å¤§æå°ç”¨ã€‚å› æ­¤ï¼Œæˆ‘é€‰æ‹©è‡ªå·±åŠ¨æ‰‹é€ è½®å­ï¼Œè¿‡ç¨‹è™½ç„¶æ›²æŠ˜ï¼Œä½†æ”¶è·é¢‡ä¸°ã€‚&lt;/p></description></item><item><title>åœ¨Pythonä¸­å¯¼å…¥å½“å‰è·¯å¾„ä¸‹çš„æ‰€æœ‰æ¨¡å—</title><link>https://blog.furffisite.link/p/python-import-directory-modules/</link><pubDate>Thu, 11 May 2023 12:22:54 +0800</pubDate><guid>https://blog.furffisite.link/p/python-import-directory-modules/</guid><description>&lt;img src="https://files.furffisite.link/blogimg/20230511163144-c5d0b19ce502665b1891ef8c78c5b839-32aa3.jpg" alt="Featured image of post åœ¨Pythonä¸­å¯¼å…¥å½“å‰è·¯å¾„ä¸‹çš„æ‰€æœ‰æ¨¡å—" />&lt;h2 id="é—®é¢˜èƒŒæ™¯">é—®é¢˜èƒŒæ™¯
&lt;/h2>&lt;p>åœ¨ä½¿ç”¨ Python çš„ Flask æ¡†æ¶å¼€å‘ Web åº”ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªåŸºæœ¬çš„æœåŠ¡ç«¯ç¨‹åºç»“æ„å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">flask&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">Flask&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Flask&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="vm">__name__&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@app.route&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/handler1&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handler1&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@app.route&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/handler2&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handler2&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@app.route&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/handler3&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handler3&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥æŒ‰ç…§è¿™ç§æ¨¡å¼æ— é™æ·»åŠ å¤„ç†è§†å›¾ï¼ˆhandlerï¼‰ï¼Œä½†æ˜¯éšç€é¡¹ç›®å¢å¤§ï¼Œè¿™ç§å°†æ‰€æœ‰ handler éƒ½æ”¾åœ¨ä¸€ä¸ª py æ–‡ä»¶é‡Œçš„æ¨¡å¼æ˜¾ç„¶æ˜¯ä¸åˆé€‚çš„ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨ &lt;a class="link" href="https://dormousehole.readthedocs.io/en/latest/tutorial/views.html" target="_blank" rel="noopener"
>blueprint&lt;/a> å°†æ¯ä¸ª handlerï¼ˆæˆ–ä¸€ç»„ handlerï¼‰æ”¾åœ¨äº’ç›¸ç‹¬ç«‹çš„æ–‡ä»¶é‡Œã€‚&lt;/p>
&lt;p>é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ app.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â””â”€â”€ services
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”œâ”€â”€ __init__.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”œâ”€â”€ login.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”œâ”€â”€ register.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»£ç å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34; === app.py === &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">flask&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">Flask&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">services&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">blueprint&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Flask&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="vm">__name__&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">register_blueprint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">blueprint&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34; === services/__init__.py === &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">flask&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">Blueprint&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">blueprint&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Blueprint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;api&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="vm">__name__&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ä¸ºäº†åœ¨ç¨‹åºå¯åŠ¨è¿‡ç¨‹ä¸­èƒ½è¿è¡Œä¸¤ä¸ª handler æ–‡ä»¶ï¼Œéœ€è¦åœ¨è¿™é‡Œ import å®ƒä»¬&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">.&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">login&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">.&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">register&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34; === services/login.py === &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">.&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">blueprint&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@blueprint.route&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/login&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handle_login&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># å¤„ç†ç™»å½•é€»è¾‘&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34; === services/register.py === &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">.&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">blueprint&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@blueprint.route&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/register&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">methods&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;POST&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handle_register&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># å¤„ç†æ³¨å†Œé€»è¾‘&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿™æ ·åšå­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼š&lt;/p>
&lt;ol>
&lt;li>æ¯æ¬¡æ–°å¢ä¸€ä¸ªæ–‡ä»¶éƒ½éœ€è¦åœ¨&lt;code>__init__.py&lt;/code>ä¸­æ·»åŠ ç›¸åº”çš„ import è¯­å¥ï¼Œè¾ƒä¸ºéº»çƒ¦ï¼›&lt;/li>
&lt;li>&lt;a class="link" href="https://www.python.org/dev/peps/pep-0008/#imports" target="_blank" rel="noopener"
>PEP-8&lt;/a> ä¸­è¦æ±‚å°† import è¯­å¥æ”¾åœ¨æ–‡ä»¶çš„é¡¶éƒ¨ï¼Œ&lt;code>__init__.py&lt;/code>æ˜¾ç„¶ä¸ç¬¦åˆï¼ˆä½†å¿…é¡»å¦‚æ­¤ï¼‰ï¼Œå› è€Œé™æ€æ£€æŸ¥å™¨æœ‰å¯èƒ½åœ¨æ­¤å¤„æŠ¥é”™ï¼ˆ&lt;a class="link" href="https://www.flake8rules.com/rules/E402.html" target="_blank" rel="noopener"
>E402&lt;/a>ï¼‰ã€‚&lt;/li>
&lt;/ol>
&lt;p>äºæ˜¯å°±è‡ªç„¶è€Œç„¶åœ°æƒ³åˆ°äº†ï¼š&lt;strong>å¦‚ä½•åœ¨æ¨¡å—åˆå§‹åŒ–æ—¶è‡ªåŠ¨å¯¼å…¥å½“å‰è·¯å¾„ä¸‹çš„æ‰€æœ‰å­æ¨¡å—å‘¢ï¼Ÿ&lt;/strong>&lt;/p>
&lt;h2 id="è§£å†³æ–¹æ³•">è§£å†³æ–¹æ³•
&lt;/h2>&lt;p>å°†&lt;code>services/__init__.py&lt;/code>æ”¹ä¸ºè¿™æ ·ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">pkgutil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">importlib&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">from&lt;/span> &lt;span class="nn">flask&lt;/span> &lt;span class="kn">import&lt;/span> &lt;span class="n">Blueprint&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">blueprint&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Blueprint&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;api&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="vm">__name__&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">spec&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">pkgutil&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">iter_modules&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">__path__&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">prefix&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">importlib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">import_module&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;.&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">spec&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="vm">__name__&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="åŸç†æ¢ç©¶">åŸç†æ¢ç©¶
&lt;/h2>&lt;p>å¯ä»¥é€šè¿‡ pdb æˆ– &lt;code>print&lt;/code> è·å¾—è¿™æ®µç¨‹åºæ‰€æ¶‰åŠå˜é‡çš„å€¼ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="vm">__name__&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;services&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">__path__&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;/tmp/test/services&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">spec&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ModuleInfo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">module_finder&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">FileFinder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/tmp/test/services&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;login&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ispkg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">False&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">spec&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ModuleInfo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">module_finder&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">FileFinder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/tmp/test/services&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;register&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ispkg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">False&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…¶ä¸­&lt;code>__name__&lt;/code>ä¸ºå½“å‰åŒ…çš„åå­—ï¼Œ&lt;code>__path__&lt;/code>ä¸ºæ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹çš„è·¯å¾„ã€‚
pkgutilæ¨¡å—çš„&lt;a class="link" href="https://docs.python.org/3/library/pkgutil.html#pkgutil.iter_modules" target="_blank" rel="noopener"
>iter_modules&lt;/a>å‡½æ•°ä¼šæ‰¾åˆ°æä¾›çš„pathä¸‹çš„æ‰€æœ‰å­æ¨¡å—ï¼Œåœ¨è¿™é‡Œå°±æ˜¯&lt;code>login&lt;/code>ä¸&lt;code>register&lt;/code>ï¼Œå¹¶è¿”å›å®ƒä»¬çš„ &lt;a class="link" href="https://docs.python.org/3/library/pkgutil.html#pkgutil.ModuleInfo" target="_blank" rel="noopener"
>ModuleInfo&lt;/a>ã€‚&lt;/p>
&lt;p>åœ¨ for å¾ªç¯å†…æå– ModuleInfo çš„ nameï¼Œå¾—åˆ°æ¨¡å—çš„åå­—ï¼ŒåŠ ä¸Šå‰ç¼€&lt;code>.&lt;/code>ï¼Œå³å½“å‰ç›®å½•ä¸‹çš„å¯¹åº”å­æ¨¡å—ã€‚
æœ€åä½¿ç”¨ importlib çš„ &lt;a class="link" href="https://docs.python.org/3/library/importlib.html#importlib.import_module" target="_blank" rel="noopener"
>import_module&lt;/a> å‡½æ•°å¯¼å…¥å­æ¨¡å—ï¼ˆå³è¿è¡Œå­æ¨¡å—çš„ä»£ç ï¼Œå°† handler æ³¨å†Œåˆ° router ä¸Šï¼‰ã€‚è¿™æ ·æ— è®ºå¢åŠ å¤šå°‘ handler æ–‡ä»¶ï¼Œ&lt;code>__init__.py&lt;/code> éƒ½å¯ä»¥æ‰¾åˆ°å¹¶åŠ è½½å®ƒä»¬ã€‚&lt;/p></description></item></channel></rss>