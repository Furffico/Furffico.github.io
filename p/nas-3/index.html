<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="æœ¬æ–‡è®°å½•äº†æˆ‘é€šè¿‡è‡ªè¡Œè´­ä¹°é…ä»¶ï¼ˆæ¡åƒåœ¾ï¼‰DIY å‡ºä¸€å° NAS çš„è¿‡ç¨‹"><title>æˆ‘æŠ˜è…¾ NAS çš„å†ç¨‹ï¼ˆä¸‰ï¼‰ï¼šæ¡åƒåœ¾è‡ªç»„</title>
<link rel=canonical href=https://blog.furffisite.link/p/nas-3/><link rel=stylesheet href=/scss/style.min.1d9acc6d7417da29e26c03e15654a8a97a1eb01eaece9c154c7b2b3721fec799.css><meta property='og:title' content="æˆ‘æŠ˜è…¾ NAS çš„å†ç¨‹ï¼ˆä¸‰ï¼‰ï¼šæ¡åƒåœ¾è‡ªç»„"><meta property='og:description' content="æœ¬æ–‡è®°å½•äº†æˆ‘é€šè¿‡è‡ªè¡Œè´­ä¹°é…ä»¶ï¼ˆæ¡åƒåœ¾ï¼‰DIY å‡ºä¸€å° NAS çš„è¿‡ç¨‹"><meta property='og:url' content='https://blog.furffisite.link/p/nas-3/'><meta property='og:site_name' content='Furffiblog'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='NAS'><meta property='article:tag' content='Linux'><meta property='article:tag' content='æ”’æœº'><meta property='article:published_time' content='2023-06-18T13:58:40+08:00'><meta property='article:modified_time' content='2023-06-18T13:58:40+08:00'><meta property='og:image' content='https://files.furffisite.link/blogimg/20230618181015-7e414fb06bb70924b269f0ca2a5ba8f6-28296.jpg'><meta name=twitter:title content="æˆ‘æŠ˜è…¾ NAS çš„å†ç¨‹ï¼ˆä¸‰ï¼‰ï¼šæ¡åƒåœ¾è‡ªç»„"><meta name=twitter:description content="æœ¬æ–‡è®°å½•äº†æˆ‘é€šè¿‡è‡ªè¡Œè´­ä¹°é…ä»¶ï¼ˆæ¡åƒåœ¾ï¼‰DIY å‡ºä¸€å° NAS çš„è¿‡ç¨‹"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://files.furffisite.link/blogimg/20230618181015-7e414fb06bb70924b269f0ca2a5ba8f6-28296.jpg'><link rel=dns-prefetch href=https://files.furffisite.link><link rel=preconnect href=https://files.furffisite.link crossorigin><script async src=https://analytics.umami.is/script.js data-website-id=b3257363-e219-4eac-b59d-d75b9aba64b5></script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu8a7a5e24c6afd9e1fde1d549095c0023_459346_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ—‘ï¸</span></figure><div class=site-meta><h1 class=site-name><a href=/>Furffiblog</a></h1><h2 class=site-description>éšä¾¿å†™å†™</h2></div></header><ol class=menu-social><li><a href=https://github.com/furffico target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>ä¸»é¡µ</span></a></li><li><a href=/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>å…³äº</span></a></li><li><a href=/gallery/><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32"><g fill="none"><path d="M3 7a4 4 0 014-4h14a4 4 0 014 4v14a4 4 0 01-4 4H7a4 4 0 01-4-4V7zm4-2A2 2 0 005 7v14a2 2 0 00.077.552l7.32-6.914c.9-.85 2.306-.85 3.205.0l7.32 6.914A2 2 0 0023 21V7a2 2 0 00-2-2H7zm0 18h14c.166.0.328-.02.482-.058l-7.253-6.85a.333.333.0 00-.458.0l-7.253 6.85c.155.038.316.058.482.058zm11.5-11a1.5 1.5.0 100-3 1.5 1.5.0 000 3zm-8 16.5a3.998 3.998.0 01-3.465-2H21a5.5 5.5.0 005.5-5.5V7.035c1.196.692 2 1.984 2 3.465V21A7.5 7.5.0 0121 28.5H10.5z" fill="currentcolor"/></g></svg>
<span>ç›¸å†Œ</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>æ–‡ç« å½’æ¡£</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>æœç´¢</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#ç†è®º>ç†è®º</a><ol><li><a href=#è£…æœºé…ç½®å•>è£…æœºé…ç½®å•</a></li><li><a href=#æ”’æœºç†å¿µ>æ”’æœºç†å¿µ</a></li></ol></li><li><a href=#å®è·µ>å®è·µ</a><ol><li><a href=#è£…æœºè¿‡ç¨‹>è£…æœºè¿‡ç¨‹</a></li><li><a href=#æ“ä½œç³»ç»Ÿ>æ“ä½œç³»ç»Ÿ</a></li><li><a href=#æµ‹è¯•>æµ‹è¯•</a></li></ol></li><li><a href=#è½¯ä»¶éƒ¨åˆ†>è½¯ä»¶éƒ¨åˆ†</a><ol><li><a href=#docker>Docker</a><ol><li><a href=#ä¿®æ”¹dockeræ•°æ®ä½ç½®>ä¿®æ”¹Dockeræ•°æ®ä½ç½®</a></li><li><a href=#ä½¿ç”¨dockerå›½å†…é•œåƒæº>ä½¿ç”¨Dockerå›½å†…é•œåƒæº</a></li><li><a href=#æ‰‹åŠ¨ä¸‹è½½é•œåƒ>æ‰‹åŠ¨ä¸‹è½½é•œåƒ</a></li></ol></li><li><a href=#samba>samba</a></li><li><a href=#jellyfin>jellyfin</a></li><li><a href=#qbittorrent>qbittorrent</a></li><li><a href=#frpc>frpc</a></li><li><a href=#coredns>coredns</a></li><li><a href=#grafana--prometheus>Grafana & Prometheus</a></li><li><a href=#æ•°æ®åº“>æ•°æ®åº“</a></li><li><a href=#minecraft-æœåŠ¡å™¨-papermc>Minecraft æœåŠ¡å™¨ ï¼ˆpapermcï¼‰</a><ol><li><a href=#åå°ç®¡ç†>åå°ç®¡ç†</a></li><li><a href=#é…ç½®>é…ç½®</a></li><li><a href=#å®‰è£…æ’ä»¶>å®‰è£…æ’ä»¶</a></li></ol></li></ol></li><li><a href=#å‚è€ƒèµ„æ–™>å‚è€ƒèµ„æ–™</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/nas-3/><img src=https://files.furffisite.link/blogimg/20230618181015-7e414fb06bb70924b269f0ca2a5ba8f6-28296.jpg loading=lazy alt="Featured image of post æˆ‘æŠ˜è…¾ NAS çš„å†ç¨‹ï¼ˆä¸‰ï¼‰ï¼šæ¡åƒåœ¾è‡ªç»„"></a></div><div class=article-details><header class=article-category><a href=/categories/%E7%AC%94%E8%AE%B0/>ç¬”è®°</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/nas-3/>æˆ‘æŠ˜è…¾ NAS çš„å†ç¨‹ï¼ˆä¸‰ï¼‰ï¼šæ¡åƒåœ¾è‡ªç»„</a></h2><h3 class=article-subtitle>æœ¬æ–‡è®°å½•äº†æˆ‘é€šè¿‡è‡ªè¡Œè´­ä¹°é…ä»¶ï¼ˆæ¡åƒåœ¾ï¼‰DIY å‡ºä¸€å° NAS çš„è¿‡ç¨‹</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jun 18, 2023</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é˜…è¯»æ—¶é•¿: 10 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><p>ç»„è¿™å° NAS å‰çš„äº‹æƒ…ï¼š</p><ul><li><a class=link href=/p/nas-1><em>æˆ‘æŠ˜è…¾NASçš„å†ç¨‹ï¼ˆä¸€ï¼‰</em></a></li><li><a class=link href=/p/nas-2><em>æˆ‘æŠ˜è…¾NASçš„å†ç¨‹ï¼ˆäºŒï¼‰</em></a></li></ul><h2 id=ç†è®º>ç†è®º</h2><h3 id=è£…æœºé…ç½®å•>è£…æœºé…ç½®å•</h3><div class=table-wrapper><table><thead><tr><th></th><th>å“ç‰Œ</th><th>å‹å·</th><th>å‚æ•°</th><th>è´­ä¹°ä»·</th><th>è´­ä¹°é“¾æ¥</th></tr></thead><tbody><tr><td>CPU</td><td>Intel</td><td>E5-2660 v4</td><td>14 æ ¸ 2.0GHz <a class=link href=https://www.intel.cn/content/www/cn/zh/products/sku/91772/intel-xeon-processor-e52660-v4-35m-cache-2-00-ghz/specifications.html target=_blank rel=noopener>è§„æ ¼è¡¨</a></td><td>Â¥52ï¼ˆæ´‹åƒåœ¾ï¼‰</td><td><a class=link href="https://item.taobao.com/item.htm?id=653447092309" target=_blank rel=noopener>link</a></td></tr><tr><td>å†…å­˜</td><td>Samsung</td><td>M393A2G40DB0-CPB</td><td>DDR4 2133MHz 16GB <a class=link href=https://semiconductor.samsung.com/dram/module/rdimm/m393a2g40db0-cpb/ target=_blank rel=noopener>è§„æ ¼è¡¨</a></td><td>Â¥92ï¼ˆæ´‹åƒåœ¾ï¼‰</td><td><a class=link href="https://item.taobao.com/item.htm?id=655661217770" target=_blank rel=noopener>link</a></td></tr><tr><td>ä¸»æ¿</td><td>åå—é‡‘ç‰Œ</td><td>X99-4MF</td><td>ITX DDR4x4 SATAx3 <a class=link href="http://www.huananzhi.com/more.php?lm=10&amp;id=784" target=_blank rel=noopener>è§„æ ¼è¡¨</a></td><td>Â¥268</td><td><a class=link href="https://item.taobao.com/item.htm?id=584879880832" target=_blank rel=noopener>link</a></td></tr><tr><td>ç³»ç»Ÿç›˜</td><td>SKHynix</td><td>HFS512GDE9X084N</td><td>512GB NVME</td><td>Â¥0*</td><td></td></tr><tr><td>æ˜¾å¡</td><td>NVIDIA</td><td>GeForce 605</td><td><a class=link href=https://www.nvidia.com/en-us/geforce/graphics-cards/geforce-605-oem/specifications/ target=_blank rel=noopener>è§„æ ¼è¡¨</a></td><td>Â¥16ï¼ˆäº®æœºå¡ï¼‰</td><td><a class=link href="https://item.taobao.com/item.htm?id=704690006685" target=_blank rel=noopener>link</a></td></tr><tr><td>ç”µæº</td><td>èˆªå˜‰</td><td>GX500</td><td>500W ATX ç™½ç‰Œ</td><td>Â¥191.92</td><td><a class=link href="https://detail.tmall.com/item.htm?id=592122962211" target=_blank rel=noopener>link</a></td></tr><tr><td>æœºç®±</td><td>invasion</td><td>invasion X1</td><td>4ç›˜ä½ ITX</td><td>Â¥244</td><td><a class=link href="https://item.taobao.com/item.htm?id=631276021464" target=_blank rel=noopener>link</a></td></tr><tr><td>CPU æ•£çƒ­å™¨</td><td>é›¶ä¸‹30åº¦</td><td>-</td><td>-</td><td>Â¥38.7</td><td><a class=link href="https://item.taobao.com/item.htm?id=543496686865" target=_blank rel=noopener>link</a></td></tr><tr><td>æœºç®±é£æ‰‡</td><td>èˆªå˜‰</td><td>MVP120</td><td>1500 RPMï¼Œæ”¯æŒ PWM</td><td>Â¥75.95ï¼ˆä¸‰åªè£…ï¼‰</td><td><a class=link href="https://detail.tmall.com/item.htm?id=657878805031" target=_blank rel=noopener>link</a></td></tr><tr><td>æ€»è®¡</td><td></td><td></td><td></td><td>Â¥978.57</td><td></td></tr></tbody></table></div><p>*ç¬”è®°æœ¬ä¸Šæ‹†ä¸‹æ¥çš„</p><h3 id=æ”’æœºç†å¿µ>æ”’æœºç†å¿µ</h3><p>ç›®æ ‡ï¼š<strong>çœé’±ã€æ€§èƒ½è¿˜è¡Œã€ä½“ç§¯å°ã€é™éŸ³ã€ä¿ç•™ä¸€å®šçš„å¯å‡çº§æ€§ã€å°½é‡ä¸€æ‰‹</strong>ã€‚</p><p>å…³äº CPUï¼Œæˆ‘åœ¨<a class=link href=https://www.cpubenchmark.net target=_blank rel=noopener>CPUbenchmark</a>ä¸ŠæŒ‰ç…§è·‘åˆ†ç»“æœåœ¨E5çš„ä¸€ç³»åˆ—æ´‹åƒåœ¾å‹å·ä¸­ä»é«˜åˆ°ä½ç¿»ï¼Œæœ€åçœ‹ä¸­äº† E5-2660 v4ã€‚é€‰æ‹©å®ƒæœ‰ä»¥ä¸‹å‡ ç‚¹ç†ç”±ï¼š</p><ol><li>å…¶åŠŸè€—ç›¸æ¯”ä¸åŒç³»åˆ—å…¶å®ƒå‹å·è¾ƒä½ï¼›</li><li>E5-2660 v4 ä¸º 2016 Q4 æ¨å‡ºçš„ï¼Œç›¸å¯¹ v3 å’Œ v2 è¦æ–°ä¸€ç‚¹ï¼›</li><li>å…¶æ€§ä»·æ¯”åœ¨åŒå‹å·ä¸­è¾ƒé«˜ï¼Œ52 å…ƒ 16005 åˆ†ï¼Œç›¸è¾ƒäº2690 v3 çš„ 68 å…ƒ 16505 åˆ†æ›´å®æƒ ã€‚</li></ol><p>CPU å®šä¸‹æ¥äº†ä¹‹åï¼Œä¸»æ¿å’Œå†…å­˜ä¹Ÿå°±ç›¸åº”çš„å†³å®šäº†ã€‚ä¹‹æ‰€ä»¥ä¸»æ¿ä¸é€‰äºŒæ‰‹æ˜¯å› ä¸ºæˆ‘æƒ³çœç‚¹äº‹ï¼Œå¯¹äºäºŒæ‰‹å¸‚åœºä¸Šå¯èƒ½é‡åˆ°çš„ä¼—å¤šé—®é¢˜æˆ‘ç›®å‰æ²¡æœ‰ä»»ä½•åº”å¯¹ç»éªŒã€‚è€Œé€‰æ‹© ITX æ˜¯ä¸ºäº†æ»¡è¶³ä½“ç§¯å°çš„è¦æ±‚ï¼Œæ¯•ç«Ÿå®¿èˆé‡Œæ”¾ä¸ä¸‹å¤ªå¤šä¸œè¥¿ã€‚</p><p>å…³äºç³»ç»Ÿç›˜ï¼Œä¹‹å‰ç»™ç¬”è®°æœ¬å‡çº§å¤–å­˜çš„æ—¶å€™æ‹†ä¸‹æ¥çš„åŸè£… SSD å¯ä»¥ç›´æ¥ç»™å®ƒç”¨ã€‚å°±ç®—æ˜¯ä¹°ä¸€ä¸ªå…¨æ–°çš„ä¹Ÿä¸ä¼šå¤ªè´µï¼Œ256GB ä¹°ä¸ªäºŒçº¿å‚çš„ SSD åº”è¯¥ä¹Ÿå¤Ÿç”¨äº†ã€‚
åœ¨è£…ç³»ç»Ÿã€è¿› BIOS æ—¶æ˜¾å¡æ˜¯å¿…è¦çš„ï¼Œä½œä¸ºæœåŠ¡å™¨ CPU çš„ E5-2660 v4 æ²¡æœ‰æ ¸å¿ƒæ˜¾å¡ï¼Œå› æ­¤è¿™é‡Œä¾ç„¶éœ€è¦ä¸€å¼ æ˜¾å¡ã€‚ä¸Šæ·˜å®ä¸€æœæœç„¶æœ‰å–äº®æœºå¡çš„ï¼Œ16 å…ƒçš„ä»·æ ¼ä¹Ÿå°±ä¸ç”¨çº ç»“å€¼ä¸å€¼äº†ï¼Œèƒ½äº®å°±è¡Œã€‚ä¸ºäº†èƒ½çœ‹åˆ°è§†é¢‘è¾“å‡ºæˆ‘è¿˜ä¹°äº†ä¸€ä¸ªäºŒåå¤šçš„ HDMI é‡‡é›†å¡ä»¥ä»£æ›¿æ˜¾ç¤ºå™¨ï¼Œäº‹å®è¯æ˜äºŒåå—çš„ç”»è´¨æœç„¶ä¸è¡Œã€‚
ç”µæºä¸æ•¢ä¹°äºŒæ‰‹çš„ï¼Œæ€•å‡ºé—®é¢˜ã€‚500W çš„ç”µæºç›¸å¯¹äºç›®å‰çš„æ•´æœºåŠŸè€—æ˜æ˜¾æ˜¯è¿‡å‰©çš„ï¼Œä½†è¿™ä¹Ÿä¸ºä»¥åçš„å‡çº§ä¿ç•™äº†ä½™é‡ã€‚
æœ€åæ˜¯æœºç®±ï¼Œç»¼åˆä»¥ä¸Šè¦æ±‚ï¼Œæœºç®±åº”è¯¥æ˜¯ä½“ç§¯å°ã€è½»ä¾¿ã€ä¾¿å®œçš„å¤šç›˜ä½ ITX æœºç®±ï¼Œåœ¨æ·˜å®ä¸Šç¿»äº†ä¸€å¤§åœˆåªçœ‹åˆ°è¿™ä¸€æ¬¾åŒæ—¶æ»¡è¶³è¿™å‡ ç‚¹çš„ã€‚åˆ«çš„å‹å·ï¼Œä¾‹å¦‚èœ—ç‰›æ˜Ÿé™…ã€å¾¡å¤«åº§ã€å¤©ç®­åº§ç­‰éƒ½å¤ªè´µäº†æˆ–è€…æ•£çƒ­å®¹é‡å¤ªå°ã€‚ä¸¤ç™¾å¤šçš„æœºç®±æˆ‘è§‰å¾—è¿˜æ˜¯è´µäº†ç‚¹ï¼Œå¯æ˜¯ä¹Ÿæ²¡æ‰¾åˆ°æ›´å¥½çš„é€‰æ‹©ã€‚</p><p>å…³äºå¯å‡çº§æ€§ï¼Œè¿™å¥—é…ç½®ä¸­ï¼ŒCPU å¯ä»¥å‡çº§ä¸º 24686 åˆ†çš„ E5-2699 v4ï¼ˆåœ¨ä»·æ ¼é™ä¸‹æ¥ä¹‹åï¼‰ï¼Œè¿˜æœ‰ä¸‰ä¸ªä½ç½®å¯ä»¥åŠ å†…å­˜æ¡ï¼Œæ˜¾å¡å¯ä»¥å‡çº§ï¼Œæœºç®±å’Œç”µæºä»¥åä¹Ÿèƒ½ç”¨äºè£…æ¸¸æˆç”µè„‘ã€‚</p><h2 id=å®è·µ>å®è·µ</h2><h3 id=è£…æœºè¿‡ç¨‹>è£…æœºè¿‡ç¨‹</h3><p>è£…æœºè¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜æœ‰å››ï¼š</p><ol><li>CPU æ•£çƒ­å™¨çš„èºä¸æ˜¯å¼¯çš„ï¼ˆå¯èƒ½æ˜¯åˆ¶é€ é—®é¢˜ï¼‰ï¼Œè¦ç”¨é’³å­æ‰³ç›´äº†æ‰èƒ½å®‰è£…ï¼›</li><li>æœºç®±è‡ªå¸¦çš„ç¡¬ç›˜ç¬¼å’Œä¸»æ¿ç”µæºæ’æ§½æœ‰ 2mm å·¦å³çš„ overlapï¼Œè£…å®Œä¹‹åç¡¬ç›˜ç¬¼æœ‰ä¸€ç‚¹ç‚¹å˜å½¢ã€‚å¾—ç›Šäºç¡¬ç›˜æ¶çš„å‡éœ‡æœºæ„ï¼Œè¿™ä¸ªå˜å½¢äº§ç”Ÿçš„å½±å“ä¸å¤§ï¼›</li><li>ä¸»æ¿ä¸‹éƒ¨çš„æ’æ§½å’Œæœºç®±é£æ‰‡æœ‰å†²çªï¼Œå‰é¢æ¿ USB-3 çš„çº¿æ’ä¸è¿›å»ï¼Œä½†å¯¹äº NAS è€Œè¨€è¿™æ ¹çº¿ä¸æ’é—®é¢˜ä¹Ÿä¸å¤§ï¼›</li><li>åå—é‡‘ç‰Œçš„è¿™æ¬¾ä¸»æ¿çš„ä¸»æ¿é£æ‰‡æ’æ§½åªæœ‰ 3 é’ˆï¼Œä¸æ”¯æŒ PWMï¼Œç›´æ¥æ’ MVP120 çš„è¯æ»¡è½¬é€Ÿå™ªéŸ³éå¸¸å¤§ã€‚æˆ‘æœ€åç”¨ä¸€æ‹–ä¸‰çš„çº¿æŠŠæ‰€æœ‰é£æ‰‡éƒ½æ¥åˆ°äº†æ”¯æŒ PWM çš„ CPU é£æ‰‡æ’æ§½ä¸Šï¼Œè¿™æ ·å°±å®‰é™äº†å¾ˆå¤šï¼ˆä¹‹ååˆè¿›BIOS è°ƒæ•´äº†ä¸€ä¸‹æ¸©åº¦-è½¬é€Ÿæ›²çº¿ï¼‰ã€‚</li></ol><h3 id=æ“ä½œç³»ç»Ÿ>æ“ä½œç³»ç»Ÿ</h3><p>å› ä¸ºæˆ‘æœ€ç†Ÿæ‚‰çš„ Linux å‘è¡Œç‰ˆæ˜¯ Ubuntuï¼Œæ‰€ä»¥æˆ‘å®‰è£…äº† Ubuntu 22.04.2 LTSï¼ˆæœåŠ¡å™¨ç‰ˆï¼‰ã€‚</p><p>ç³»ç»Ÿç›˜åˆ†åŒºå¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Mountpoint      Start        End   Sectors   Size Type
</span></span><span class=line><span class=cl>/boot/efi        2048    2203647   2201600     1G EFI System
</span></span><span class=line><span class=cl>/             2203648  107061247 104857600    50G Linux filesystem
</span></span><span class=line><span class=cl>/home       107061248  211918847 104857600    50G Linux filesystem
</span></span><span class=line><span class=cl>/srv        211918848  958271487 746352640 355.9G Linux filesystem
</span></span><span class=line><span class=cl>swap        958271488 1000214527  41943040    20G Linux swap
</span></span></code></pre></td></tr></table></div></div><h3 id=æµ‹è¯•>æµ‹è¯•</h3><p>æ•´æœºå¾…æœºæ—¶ CPU æ ¸å¿ƒå¹³å‡æ¸©åº¦ä¸º 30Â°Cï¼Œæ»¡è½½æ—¶ä¸º 55Â°Cï¼Œè¯´æ˜æ•£çƒ­è¿˜æ˜¯æœ‰å¾ˆå¤§çš„ä½™é‡çš„ã€‚æœåŠ¡æ­£å¸¸è¿è¡Œæ—¶æ’åº§ä¸Šæµ‹é‡åˆ°çš„åŠŸç‡åœ¨ 68W å·¦å³ï¼ŒCPUæ»¡è½½æ—¶çº¦ 140Wã€‚</p><p>ä½¿ç”¨ sysbench çš„æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼Œå’Œæˆ‘ç°å½¹çš„æ¸¸æˆæœ¬ç›¸æ¯”æˆ‘è§‰å¾—è¿™ä¸ªæˆç»©è¿˜ç®—å¯ä»¥æ¥å—ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sysbench 1.0.20 (using system LuaJIT 2.1.0-beta3)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Running the test with following options:
</span></span><span class=line><span class=cl>Number of threads: 28
</span></span><span class=line><span class=cl>Initializing random number generator from current time
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Prime numbers limit: 10000
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Initializing worker threads...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Threads started!
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>CPU speed:
</span></span><span class=line><span class=cl>    events per second: 17251.86
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>General statistics:
</span></span><span class=line><span class=cl>    total time:                          600.0017s
</span></span><span class=line><span class=cl>    total number of events:              10351174
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Latency (ms):
</span></span><span class=line><span class=cl>         min:                                    1.22
</span></span><span class=line><span class=cl>         avg:                                    1.62
</span></span><span class=line><span class=cl>         max:                                   82.58
</span></span><span class=line><span class=cl>         95th percentile:                        1.64
</span></span><span class=line><span class=cl>         sum:                             16797418.36
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Threads fairness:
</span></span><span class=line><span class=cl>    events (avg/stddev):           369684.7857/436.76
</span></span><span class=line><span class=cl>    execution time (avg/stddev):   599.9078/0.00
</span></span></code></pre></td></tr></table></div></div><h2 id=è½¯ä»¶éƒ¨åˆ†>è½¯ä»¶éƒ¨åˆ†</h2><h3 id=docker>Docker</h3><p>æœ€å…ˆå®‰è£…çš„æ˜¯ Dockerï¼Œå› ä¸ºæœ‰äº† Docker ä¹‹ååˆ«çš„åº”ç”¨éƒ½å¯ä»¥ä½¿ç”¨ Docker é•œåƒå®‰è£…å’Œç®¡ç†ã€‚</p><p>åœ¨ Ubuntu ä¸Šå®‰è£…Dockeråªéœ€ä½¿ç”¨å®˜æ–¹æä¾›çš„å®‰è£…è„šæœ¬<sup><a id=ref-cite1-1 href=#cite1>[1]</a></sup>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ curl -fsSL https://get.docker.com -o get-docker.sh
</span></span><span class=line><span class=cl>$ sudo sh get-docker.sh
</span></span></code></pre></td></tr></table></div></div><h4 id=ä¿®æ”¹dockeræ•°æ®ä½ç½®>ä¿®æ”¹Dockeræ•°æ®ä½ç½®</h4><p>Docker çš„æ•°æ®é»˜è®¤å‚¨å­˜åœ¨ <code>/var/lib/docker</code> å†…ï¼Œæˆ‘æƒ³å°†å…¶ç§»åˆ° <code>/srv</code> æ–‡ä»¶ç³»ç»Ÿå†…ï¼Œæ“ä½œå¦‚ä¸‹ï¼š</p><ol><li>å…³é—­<code>docker</code>æœåŠ¡ï¼š<code>systemctl stop docker</code></li><li>ç§»åŠ¨æ–‡ä»¶ï¼š<code>sudo mv /var/lib/docker /srv/</code></li><li>åˆ›å»ºç¬¦å·é“¾æ¥ï¼ˆä»¥é˜²ä¸‡ä¸€ï¼‰ï¼š<code>sudo ln -s /srv/docker /var/lib/docker</code></li><li>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œåœ¨<code>/etc/docker/daemon.json</code>å†…æ·»åŠ é…ç½®ï¼š<code>{"data-root": "/srv/docker"}</code></li><li>å¯åŠ¨<code>docker</code>æœåŠ¡ï¼š<code>systemctl start docker</code></li></ol><h4 id=ä½¿ç”¨dockerå›½å†…é•œåƒæº>ä½¿ç”¨Dockerå›½å†…é•œåƒæº</h4><p>é˜¿é‡Œäº‘æä¾›äº†å…è´¹çš„Dockeré•œåƒæºçš„åŠ é€ŸæœåŠ¡ã€‚ä¸ºäº†ä½¿ç”¨è¯¥æœåŠ¡ï¼Œéœ€è¦åœ¨ <a class=link href=https://aliyun.com target=_blank rel=noopener>https://aliyun.com</a> ç™»å½•é˜¿é‡Œäº‘å¸å·ï¼Œç„¶ååœ¨ <strong>æ§åˆ¶å° > å®¹å™¨é•œåƒæœåŠ¡ > é•œåƒå·¥å…· > é•œåƒåŠ é€Ÿå™¨</strong> å¤„å¯ä»¥è·å–åŠ é€Ÿå™¨çš„åœ°å€åŠä¿®æ”¹é•œåƒæºçš„æ–¹æ³•ã€‚</p><p>æ­¤å¤–ä¹Ÿæœ‰ä¸€äº›å¼€æ”¾çš„é•œåƒæºï¼Œåœ¨<code>/etc/docker/daemon.json</code>å†…æ·»åŠ å¦‚ä¸‹å±æ€§ <sup><a id=ref-cite2-1 href=#cite2>[2]</a></sup>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;registry-mirrors&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;https://hub-mirror.c.163.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;https://ustc-edu-cn.mirror.aliyuncs.com&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;https://ghcr.io&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;https://mirror.baidubce.com&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¿®æ”¹åä½¿ç”¨ <code>systemctl restart docker</code> é‡å¯dockeræœåŠ¡å³å¯ã€‚</p><h4 id=æ‰‹åŠ¨ä¸‹è½½é•œåƒ>æ‰‹åŠ¨ä¸‹è½½é•œåƒ</h4><p>å¦‚æœæ›¿æ¢äº†é•œåƒæºä¹‹åä¹Ÿæ‹‰ä¸åŠ¨é•œåƒçš„è¯ï¼Œå¯ä»¥è¯•è¯• <a class=link href=https://github.com/moby/moby target=_blank rel=noopener>Moby Project</a> æä¾›çš„é•œåƒä¸‹è½½è„šæœ¬ä¸‹è½½é•œåƒï¼š<a class=link href=https://github.com/moby/moby/blob/master/contrib/download-frozen-image-v2.sh target=_blank rel=noopener>link</a></p><p>ä½¿ç”¨ä¾‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ wget https://raw.githubusercontent.com/moby/moby/master/contrib/download-frozen-image-v2.sh
</span></span><span class=line><span class=cl>$ bash ./download-frozen-image-v2.sh ./alpine-linux alpine:latest
</span></span><span class=line><span class=cl>Downloading <span class=s1>&#39;library/alpine:latest@latest&#39;</span> <span class=o>(</span><span class=m>1</span> layers<span class=o>)</span>...
</span></span><span class=line><span class=cl>-#O<span class=o>=</span>-#      <span class=c1>#        #</span>
</span></span><span class=line><span class=cl><span class=c1>############################################## 100.0%</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Download of images into <span class=s1>&#39;./alpine-linux&#39;</span> complete.
</span></span><span class=line><span class=cl>Use something like the following to load the result into a Docker daemon:
</span></span><span class=line><span class=cl>  tar -cC <span class=s1>&#39;./alpine-linux&#39;</span> . <span class=p>|</span> docker load
</span></span></code></pre></td></tr></table></div></div><p>è¿™æ—¶é•œåƒå°±å·²ç»ä¿å­˜åˆ°<code>./alpine-linux</code>å†…äº†ï¼Œç„¶åä½¿ç”¨</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ tar -cC <span class=s1>&#39;./alpine-linux&#39;</span> . <span class=p>|</span> docker load
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>Loaded image: alpine:latest
</span></span></code></pre></td></tr></table></div></div><p>å³å¯è®© docker å¯¼å…¥é•œåƒã€‚</p><h3 id=samba>samba</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo apt install samba
</span></span></code></pre></td></tr></table></div></div><p>å®‰è£…åä½¿ç”¨<code>smbpasswd -a &lt;username></code>ä¸ºç”¨æˆ·æ·»åŠ  samba çš„è®¿é—®å¯†ç ï¼Œå…¶ä¸­<code>&lt;username></code>å¿…é¡»ä¸ºå·²ç»åœ¨ Linux å†…æ³¨å†Œçš„ç”¨æˆ·ã€‚</p><p>é…ç½®æ–‡ä»¶ä¸º<code>/etc/samba/smb.conf</code>ï¼Œé…ç½®é¡¹å¯å‚è€ƒ<a class=link href=https://www.samba.org/samba/docs/current/man-html/smb.conf.5.html target=_blank rel=noopener>å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[&lt;share name&gt;]
</span></span><span class=line><span class=cl>path = /path/to/folder
</span></span><span class=line><span class=cl>read only = no
</span></span><span class=line><span class=cl>browsable = yes
</span></span><span class=line><span class=cl>guest ok = no
</span></span><span class=line><span class=cl>valid users = &lt;users&gt;
</span></span></code></pre></td></tr></table></div></div><h3 id=jellyfin>jellyfin</h3><p>jellyfin æ˜¯æ•°å­—åª’ä½“ç®¡ç†ä¸ä¸²æµè½¯ä»¶ï¼Œå®ƒæ”¯æŒæµè§ˆå™¨ã€Androidã€iOSã€Android TV ç­‰è®¸å¤šå®¢æˆ·ç«¯ï¼Œå¯ä»¥åœ¨è¿™äº›å®¢æˆ·ç«¯ä¸Šä¾¿æ·åœ°è§‚çœ‹æœåŠ¡ç«¯å­˜å‚¨çš„å†…å®¹ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘æ”’è¿™å° NAS çš„ä¸»è¦ç›®çš„ã€‚E5-2660 v4 çš„æ€§èƒ½è¶³ä»¥æ”¯æŒ jellyfin æµç•…ç¼–è§£ç è¶…é«˜æ¸…èµ„æºï¼ˆè½¯è§£ï¼Œä¸è¿‡ç›®å‰çœ‹æ¥ä¹Ÿæ²¡æœ‰ä¸“é—¨ä¸ºè¿™ä¸ªä¹° GPU çš„å¿…è¦äº†ï¼‰ã€‚</p><p>å¯ä»¥ä½¿ç”¨<a class=link href=https://hub.docker.com/r/jellyfin/jellyfin target=_blank rel=noopener>å®˜æ–¹çš„ docker é•œåƒ</a>æˆ–è€…<a class=link href=https://hub.docker.com/r/linuxserver/jellyfin target=_blank rel=noopener>linuxserver.io åˆ¶ä½œçš„é•œåƒ</a>æ¥å®‰è£… jellyfinã€‚</p><p>ä¸ºäº†ä¾¿äºæˆ‘ç®¡ç†å’Œé…ç½®ï¼Œæ‰€æœ‰çš„ Docker å®¹å™¨éƒ½å°†ä½¿ç”¨ docker compose å¯åŠ¨ã€‚è¿™æ˜¯ jellyfin çš„<code>docker-compose.yaml</code>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;2.1&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jellyfin</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>lscr.io/linuxserver/jellyfin:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>jellyfin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PUID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PGID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>TZ=Asia/Shanghai</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./config:/config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>/path/to/media:/data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>8096</span><span class=p>:</span><span class=m>8096</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>8920</span><span class=p>:</span><span class=m>8920</span><span class=w> </span><span class=c>#optional</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>7359</span><span class=p>:</span><span class=m>7359</span><span class=l>/udp</span><span class=w> </span><span class=c>#optional</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>1900</span><span class=p>:</span><span class=m>1900</span><span class=l>/udp</span><span class=w> </span><span class=c>#optional</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>mode</span><span class=p>:</span><span class=w> </span><span class=l>global</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>limits</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>cpus</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;20&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>8G</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=qbittorrent>qbittorrent</h3><p>qbittorrent æ˜¯ç”¨äº bt ä¸‹è½½çš„è½¯ä»¶ã€‚linuxserver.io ä¹Ÿæ‰“åŒ…äº† qbittorrent çš„é•œåƒï¼Œä½¿ç”¨è¿™ä¸ªé•œåƒè¿è¡Œå³å¯ã€‚æˆ‘çš„<code>docker-compose.yaml</code>å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>qbittorrent</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>lscr.io/linuxserver/qbittorrent:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>qbittorrent</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PUID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>PGID=1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>TZ=Asia/Shanghai</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>WEBUI_PORT=4823</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./config:/config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./torrents:/torrents</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./cache:/cache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>/path/to/downloads:/downloads</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>4823</span><span class=p>:</span><span class=m>4823</span><span class=w> </span><span class=c># WebUI</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>6881</span><span class=p>:</span><span class=m>6881</span><span class=w> </span><span class=c># ç›‘å¬ç«¯å£</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>6881</span><span class=p>:</span><span class=m>6881</span><span class=l>/udp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>14560-14580</span><span class=p>:</span><span class=m>14560-14580</span><span class=w> </span><span class=c># ä¼ å‡ºç«¯å£</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>14560-14580</span><span class=p>:</span><span class=m>14560-14580</span><span class=l>/udp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>unless-stopped</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>mode</span><span class=p>:</span><span class=w> </span><span class=l>global</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>limits</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>cpus</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;2.0&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>1G</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=frpc>frpc</h3><p>å†…ç½‘ç©¿é€å·¥å…·çš„å®¢æˆ·ç«¯ï¼Œæˆ‘ç”¨çš„æ˜¯<a class=link href=https://hub.docker.com/r/snowdreamtech/frpc target=_blank rel=noopener>ä¸‹è½½é‡æœ€é«˜çš„é•œåƒ</a>ã€‚</p><h3 id=coredns>coredns</h3><p>DNS æœåŠ¡å™¨ï¼Œå› ä¸ºå­¦æ ¡çš„ DNS ä»¥å‰å´©è¿‡ï¼Œæ‰€ä»¥è£…ä¸€ä¸ªå¤‡ç”¨ã€‚<a class=link href=https://hub.docker.com/r/coredns/coredns target=_blank rel=noopener>å®˜æ–¹é•œåƒ</a>å³å¯ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>coredns</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>coredns/coredns:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>coredns</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./config:/config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;-conf&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;/config/Corefile&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>always</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>0.0.0.0</span><span class=p>:</span><span class=m>53</span><span class=p>:</span><span class=m>53</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>0.0.0.0</span><span class=p>:</span><span class=m>53</span><span class=p>:</span><span class=m>53</span><span class=l>/udp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>mode</span><span class=p>:</span><span class=w> </span><span class=l>global</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>limits</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>cpus</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;0.5&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>100M</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>53 ç«¯å£å¯èƒ½å’Œ ubuntu çš„ systemd-resolved æœåŠ¡å†²çªï¼Œåœ¨å¯åŠ¨å®¹å™¨å‰éœ€è¦å…ˆå…³é—­è¿™ä¸ªæœåŠ¡ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo systemctl disable systemd-resolved
</span></span><span class=line><span class=cl>$ sudo systemctl stop systemd-resolved
</span></span></code></pre></td></tr></table></div></div><p>coredns ç»“åˆ nginx/Apache è½¬å‘ä¸ä¸€äº›è·¯ç”±å™¨çš„è®¾ç½®å°±å¯ä»¥å®ç°å†…ç½‘åŸŸåï¼ˆä¸ç”¨è®°ç«¯å£å·äº†ï¼‰ï¼Œä¾‹å¦‚ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>### Corefile:
</span></span><span class=line><span class=cl>......
</span></span><span class=line><span class=cl>server.local {
</span></span><span class=line><span class=cl>  hosts {
</span></span><span class=line><span class=cl>    192.168.0.xx jellyfin.server.local
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>  log
</span></span><span class=line><span class=cl>  errors
</span></span><span class=line><span class=cl>  prometheus
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>### nginx config:
</span></span><span class=line><span class=cl>server {
</span></span><span class=line><span class=cl>       listen 80;
</span></span><span class=line><span class=cl>       server_name jellyfin.server.local;
</span></span><span class=line><span class=cl>       location / {
</span></span><span class=line><span class=cl>           proxy_pass http://127.0.0.1:8096;
</span></span><span class=line><span class=cl>       }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><p>è¿™æ ·åœ¨å±€åŸŸç½‘ç›´æ¥è®¿é—® <code>http://jellyfin.server.local</code> å°±å¯ä»¥è¿›å…¥ jellyfin çš„ç•Œé¢äº†ã€‚</p><p><em>æ³¨ï¼šå…³é—­ systemd-resolved æœåŠ¡ä¹‹ååœ¨ä½¿ç”¨ KVM æ—¶å¯èƒ½ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ã€‚</em></p><h3 id=grafana--prometheus>Grafana & Prometheus</h3><p><a class=link href=https://grafana.com/ target=_blank rel=noopener>Grafana</a> å’Œ <a class=link href=https://prometheus.io/ target=_blank rel=noopener>Prometheus</a> è¿™ä¸¤ä¸ªå¼€æºè½¯ä»¶ç»„åˆåœ¨ä¸€èµ·å¯ä»¥ç”¨æ¥ç›‘æ§æœåŠ¡å™¨çŠ¶æ€ï¼ˆä¸è¿‡åœ¨è‡ªç”¨çš„ NAS ä¸Šæè¿™ä¸ªå¯èƒ½æ„ä¹‰ä¸å¤§ï¼‰ã€‚ä¹‹å‰æ²¡äº†è§£è¿‡è¿™äº›è½¯ä»¶ï¼Œå› æ­¤è¿™éƒ¨åˆ†å®Œå…¨æ˜¯æŒ‰ç…§<a class=link href=https://geekflare.com/prometheus-grafana-setup-for-linux/ target=_blank rel=noopener>æ•™ç¨‹</a>å®‰è£…çš„ï¼Œå…¶ä¸­ Grafana ä¸æ¶‰åŠæ•°æ®æ”¶é›†ï¼Œå¯ä»¥åœ¨ Docker å®¹å™¨ä¸­è¿è¡Œã€‚</p><p>é™¤äº†è¿™ä¸¤ä¸ªè½¯ä»¶ï¼Œæˆ‘è¿˜å®‰è£…äº† <a class=link href=https://github.com/prometheus/node_exporter target=_blank rel=noopener>node exporter</a> å’Œ <a class=link href=https://github.com/google/cadvisor target=_blank rel=noopener>cadvisor</a>ï¼Œåˆ†åˆ«æ”¶é›†æœåŠ¡å™¨ç³»ç»Ÿä¸ Docker å®¹å™¨çš„ç»Ÿè®¡ä¿¡æ¯ã€‚</p><p>è£…å¥½ä¹‹åï¼Œæˆ‘ä»¥ node exporter ä¸ºåŸºç¡€æ”¹å‡ºäº†è¿™æ ·çš„ dashboardï¼š
<img src=https://files.furffisite.link/blogimg/20230623223905-8a11623bf1549c06e503742374b7f39c-d92f1.png loading=lazy></p><h3 id=æ•°æ®åº“>æ•°æ®åº“</h3><p>æœ‰ä¸€äº›æœåŠ¡ï¼ˆä¾‹å¦‚ <a class=link href=https://github.com/go-gitea/gitea target=_blank rel=noopener>gitea</a> å’Œè‡ªå·±å†™çš„çˆ¬è™«ï¼‰çš„æ•°æ®æ˜¯å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„ï¼Œæˆ‘æ¯”è¾ƒå–œæ¬¢å°†è¿™äº›æ•°æ®æ”¾åœ¨åŒä¸€ä¸ªæ•°æ®åº“æœåŠ¡ç«¯å†…ï¼ˆè€Œéç»™æ¯ä¸ªæœ‰éœ€è¦çš„åº”ç”¨éƒ½è¿è¡Œä¸€ä¸ªæ•°æ®åº“ï¼‰ï¼Œä»¥ä¾¿äºæ•°æ®çš„ç®¡ç†ï¼ŒåŒæ—¶å‡å°‘ç³»ç»Ÿå ç”¨ã€‚</p><p>å…³äºå…³ç³»å‹æ•°æ®åº“ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ <a class=link href=https://mariadb.org/ target=_blank rel=noopener>mariadb</a>ï¼ˆMySQLçš„ä¸€ä¸ªè¡ç”Ÿç‰ˆæœ¬ï¼‰ã€‚å…³äºé•œåƒçš„ç‰ˆæœ¬ï¼Œå»ºè®®ä½¿ç”¨ä¸€ä¸ªå›ºå®šçš„ç‰ˆæœ¬å·ï¼ˆè€Œé latestï¼‰ï¼Œå› ä¸ºåœ¨ä¸åŒç‰ˆæœ¬çš„ mariadb ä¹‹é—´è¿ç§»æ•°æ®è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ã€‚</p><p>å…³äºæ•°æ®åº“çš„ç®¡ç†ç«¯ï¼Œæˆ‘ä»¥å‰å¸¸ç”¨çš„æ˜¯ <a class=link href=https://www.phpmyadmin.net/ target=_blank rel=noopener>phpmyadmin</a>ï¼Œè¿™æ¬¡æƒ³è¯•è¯•åˆ«çš„ï¼Œæ‰€ä»¥ä½¿ç”¨äº† <a class=link href=https://hub.docker.com/_/mariadb target=_blank rel=noopener>å®˜æ–¹dockeré•œåƒé¡µ</a> é‡Œæåˆ°çš„ <a class=link href=https://hub.docker.com/_/adminer target=_blank rel=noopener>adminer</a>ã€‚å…¶åŠŸèƒ½è™½ä¸å¦‚ phpmyadmin ä¸°å¯Œï¼Œç•Œé¢ä¹Ÿä¸å¦‚å®ƒç¾è§‚ï¼Œä½†æ˜¯æˆ‘å¹³æ—¶ä¼šç”¨åˆ°çš„åŸºç¡€æ“ä½œï¼ˆå»ºè¡¨ã€æŸ¥çœ‹æ•°æ®ã€SQL æŸ¥è¯¢ã€å¯¼å‡ºæ•°æ®ï¼‰å®ƒéƒ½æœ‰ï¼Œç¼ºå°‘çš„åŠŸèƒ½å¯ä»¥ç›´æ¥ç”¨ SQL è¯­å¥å‡‘å˜›~</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>db</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>mariadb:10.11.4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>mariadb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>always</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>MARIADB_ROOT_PASSWORD</span><span class=p>:</span><span class=w> </span><span class=l>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./mariadb:/var/lib/mysql</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>3306</span><span class=p>:</span><span class=m>3306</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>adminer</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>adminer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>adminer</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>restart</span><span class=p>:</span><span class=w> </span><span class=l>always</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=m>8080</span><span class=p>:</span><span class=m>8080</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>å¦‚æœæœåŠ¡éœ€è¦ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ docker è¿è¡Œéå…³ç³»å‹æ•°æ®åº“ <a class=link href=https://www.mongodb.com/ target=_blank rel=noopener>MongoDB</a> å’Œ <a class=link href=https://redis.io/ target=_blank rel=noopener>redis</a>ã€‚</p><h3 id=minecraft-æœåŠ¡å™¨-papermc>Minecraft æœåŠ¡å™¨ ï¼ˆpapermcï¼‰</h3><p>é€‰äº† docker hub é‡Œæœç´¢æ’åé å‰çš„ <a class=link href=https://hub.docker.com/r/marctv/minecraft-papermc-server target=_blank rel=noopener>marctv/minecraft-papermc-server</a>ã€‚</p><p>ç”¨äº†ä¹‹åæ‰å‘ç°ï¼Œ<a class=link href=https://papermc.io/ target=_blank rel=noopener>papermc</a> æ˜¯ <a class=link href=https://www.spigotmc.org/ target=_blank rel=noopener>SpigotMC</a> çš„åˆ†æ”¯ï¼Œæ—¨åœ¨æä¾›åŸç”Ÿ Minecraft çš„ä½“éªŒã€‚ä¹Ÿå°±æ˜¯è¯´å®ƒä¸æ”¯æŒä»¥å‰æˆ‘åœ¨ç© Minecraft æ—¶è€³ç†Ÿèƒ½è¯¦çš„é‚£äº› Forge ç‰ˆ modï¼Œåªæ”¯æŒæœåŠ¡å™¨ç«¯çš„ bukkit æ’ä»¶ï¼ˆpluginï¼‰ã€‚å¥½å¤„æ˜¯ç›¸æ¯”ä¸ Forge æœåŠ¡å™¨å ç”¨æ›´å°ï¼Œå¹¶ä¸”ä¸æŒ‘å®¢æˆ·ç«¯ï¼Œåªè¦å®¢æˆ·ç«¯ Minecraft ç‰ˆæœ¬å’ŒæœåŠ¡å™¨ä¸€è‡´å°±èƒ½è¿ä¸Šã€‚
é…ç½®å¥½ä¹‹åï¼Œä½¿ç”¨ frpc è½¬å‘ 25565 ç«¯å£åˆ°å…¬ç½‘ï¼Œå°±å¯ä»¥æ„‰å¿«åœ°å’Œæœ‹å‹ä»¬ä¸€èµ·ç©å•¦ã€‚</p><h4 id=åå°ç®¡ç†>åå°ç®¡ç†</h4><p>åœ¨ docker-compose.yaml ä¸­å¯¹åº”çš„ service é…ç½®é‡ŒåŠ ä¸Š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>stdin_open</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>tty</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>mcserver</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>ç„¶å</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ docker compose up -d
</span></span></code></pre></td></tr></table></div></div><p>ä¹‹åä¾¿å¯ä»¥é€šè¿‡</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ docker attach mcserver
</span></span></code></pre></td></tr></table></div></div><p>è¿›å…¥æœåŠ¡å™¨åå°ï¼Œä½¿ç”¨æŒ‡ä»¤ç®¡ç†æœåŠ¡å™¨ã€‚</p><h4 id=é…ç½®>é…ç½®</h4><p>papermc ç›¸æ¯”äºåŸç‰ˆæœåŠ¡ç«¯ä¿®å¤äº†æ´»å¡ç›¸å…³çš„ä¸€äº›â€œç‰¹æ€§â€ï¼Œä¾‹å¦‚ä½¿ç”¨æ´»å¡å¤åˆ¶ç‰©å“ç­‰ï¼Œå¹¶åœ¨é…ç½®æ–‡ä»¶ä¸­é»˜è®¤é™åˆ¶è¿™äº›è¡Œä¸ºï¼Œå¯¼è‡´åˆ·åœ°æ¯¯æœº/ç ´åŸºå²©ç­‰åŸç‰ˆå¯è¡Œçš„æ“ä½œåœ¨ papermc æœåŠ¡ç«¯å†…ä¸å¯ç”¨ã€‚å½“ç„¶è¿™æ ·å¯¹äºæœä¸»è€Œè¨€ç¡®å®å¯ä»¥é˜²æ­¢ç©å®¶åšå‡ºè¶Šç•Œçš„è¡Œä¸ºï¼Œä½†æ˜¯å¯¹äºæˆ‘è¿™ç§åªæœ‰å‡ ä¸ªæœ‹å‹åœ¨ä¸€èµ·ç©çš„æœåŠ¡å™¨ï¼Œå°±ä¸éœ€è¦é™åˆ¶è¿™äº›äº†ã€‚å…³é—­é™åˆ¶çš„æ–¹å¼å¾ˆç®€å•ï¼Œä¿®æ”¹æ•°æ®ç›®å½•ä¸‹çš„<code>paper.yml</code>ï¼Œå°†<code>allow-headless-pistons</code>ã€<code>allow-permanent-block-break-exploits</code>å’Œ<code>allow-piston-duplication</code>ä¸‰é¡¹è®¾ç½®ä¸º<code>true</code>å³å¯ã€‚</p><h4 id=å®‰è£…æ’ä»¶>å®‰è£…æ’ä»¶</h4><p>Papermc æ”¯æŒçš„æ’ä»¶å¯ä»¥åœ¨ <a class=link href=https://hangar.papermc.io/ target=_blank rel=noopener>Hanger</a>ã€<a class=link href=https://dev.bukkit.org/bukkit-plugins target=_blank rel=noopener>bukkit</a>æˆ–<a class=link href=https://www.spigotmc.org/resources/ target=_blank rel=noopener>SpigotMC</a>ä¸‹è½½ã€‚ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„ jar æ–‡ä»¶æ”¾åˆ° /data/plugins æ–‡ä»¶å¤¹ä¸‹ï¼ˆæˆ–è€…ç›´æ¥ä½¿ç”¨ wget/curl ä¸‹è½½ï¼‰ï¼Œç„¶åé‡å¯æœåŠ¡å™¨ï¼Œåœ¨å¯åŠ¨æ—¶å¦‚æœæ–°å¢çš„æ’ä»¶æ²¡æœ‰æŠ¥é”™è¯¯ä¿¡æ¯ï¼Œé‚£å¤§æ¦‚ç‡æ˜¯æ²¡é—®é¢˜çš„ã€‚</p><p>ç›®å‰åŠ äº†è¿™äº›æ’ä»¶ï¼š</p><ul><li>Minepacksï¼šèƒŒåŒ…æ’ä»¶ï¼›</li><li>TreeFellerï¼šè¿é”ç æ ‘ï¼›</li><li>worldeditï¼šåˆ›ä¸–ç¥æ’ä»¶ï¼›</li><li>worldguard</li><li>EssentialsXï¼šæ­£å¦‚å…¶åï¼Œæä¾›ä¸€äº›æœåŠ¡å™¨çš„å¿…å¤‡åŠŸèƒ½ï¼›</li><li>StackableItemsï¼šå¢åŠ ç‰©å“å †å ä¸Šé™ï¼›</li><li>Multiverse-Coreï¼šå¤šä¸–ç•ŒåŸºç¡€æ’ä»¶ã€‚<ul><li>Multiverse-signportalsï¼šä½¿ç”¨å‘Šç¤ºç‰Œåœ¨å¤šä¸–ç•Œé—´ä¼ é€ï¼›</li><li>OpenTerrainGeneratorï¼šåˆ›å»ºä¸åŒç±»å‹ä¸–ç•Œçš„åŸºç¡€æ’ä»¶ä¹‹ä¸€ã€‚<ul><li>Skylands</li><li>FarFromHome</li></ul></li></ul></li><li>ViaVersionï¼šæ”¾å®½å®¢æˆ·ç«¯ç‰ˆæœ¬é™åˆ¶ï¼›</li><li>LaggRemoverï¼šå‡å°‘æœåŠ¡å™¨å¡é¡¿ï¼›</li><li>BlueMap: åœ°å›¾æ’ä»¶ï¼Œæä¾›äº†ç¾è§‚çš„åœ¨çº¿3Dåœ°å›¾ï¼›</li><li><a class=link href=https://github.com/Cubxity/UnifiedMetrics target=_blank rel=noopener>UnifiedMetrics</a>ï¼šæ•°æ®æ”¶é›†æ’ä»¶ï¼Œæ”¯æŒå‰è¿°çš„ Prometheusã€‚</li></ul><h2 id=å‚è€ƒèµ„æ–™>å‚è€ƒèµ„æ–™</h2><style>.bibliography{display:table;font-size:medium;line-height:normal}.bib-item{display:table-row}.bib-item>:first-child{display:table-cell;padding-right:.5em;font-weight:700;text-align:right}.bib-item>:last-child{display:table-cell;padding-bottom:.5ex}</style><div class=bibliography><div id=cite1 class=bib-item><span>[1]</span>
<span>Install Docker Engine on Ubuntu - Docker Docs | <a class=link href=https://docs.docker.com/engine/install/ubuntu/#install-using-the-convenience-script target=_blank rel=noopener>https://docs.docker.com/engine/install/ubuntu/#install-using-the-convenience-script</a><a href=#ref-cite1-1>â¤¶</a></span></div><div id=cite2 class=bib-item><span>[2]</span>
<span>Docker æ¢æº - è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº | <a class=link href=https://cloud.tencent.com/developer/article/1769231 target=_blank rel=noopener>https://cloud.tencent.com/developer/article/1769231</a><a href=#ref-cite2-1>â¤¶</a></span></div></div></section><footer class=article-footer><section class=article-tags><a href=/tags/nas/>NAS</a>
<a href=/tags/linux/>Linux</a>
<a href=/tags/%E6%94%92%E6%9C%BA/>æ”’æœº</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>æœ¬æ–‡åŸºäº<a class=link href=https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode.zh-Hans target=_blank rel=noopener><u>CC BY-NC-SA 4.0 åè®®</u></a>å‘å¸ƒã€‚æœ¬æ–‡<strong>ä¸å¯å•†ç”¨</strong>ï¼Œè½¬è½½æ—¶è¯·<strong>æ³¨æ˜å‡ºå¤„</strong>å¹¶ä½¿ç”¨<strong>ç›¸åŒåè®®</strong>ã€‚</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/nas-4/><div class=article-image><img src=https://files.furffisite.link/blogimg/20240310022612-8671164f59f21e5d03de82e41e7073d5-7f2c7.jpg loading=lazy data-key=nas-4 data-hash=https://files.furffisite.link/blogimg/20240310022612-8671164f59f21e5d03de82e41e7073d5-7f2c7.jpg></div><div class=article-details><h2 class=article-title>æˆ‘æŠ˜è…¾ NAS çš„å†ç¨‹ï¼ˆå››ï¼‰ï¼šä¸€äº›å‡çº§</h2></div></a></article><article class=has-image><a href=/p/steamdeck-tweaking/><div class=article-image><img src=https://files.furffisite.link/blogimg/20240220134919-e7ed5ace1e94b03d7e56a619a0f7a6d7-5ca68.jpg loading=lazy data-key=steamdeck-tweaking data-hash=https://files.furffisite.link/blogimg/20240220134919-e7ed5ace1e94b03d7e56a619a0f7a6d7-5ca68.jpg></div><div class=article-details><h2 class=article-title>Steam Deck æŠ˜è…¾è®°å½•</h2></div></a></article><article class=has-image><a href=/p/windows-setup/><div class=article-image><img src=https://files.furffisite.link/blogimg/20240707215654-5c276c9ae1c98340521bf56811f4b765-87c36.jpg loading=lazy data-key=windows-setup data-hash=https://files.furffisite.link/blogimg/20240707215654-5c276c9ae1c98340521bf56811f4b765-87c36.jpg></div><div class=article-details><h2 class=article-title>ä¸ªäººå¸¸ç”¨çš„æ–° Windows 11 ç³»ç»Ÿçš„é…ç½®è¿‡ç¨‹</h2></div></a></article><article class=has-image><a href=/p/applemusic-transfer/><div class=article-image><img src=https://files.furffisite.link/blogimg/20240523203808-9f4a7d937672d53fbc1a7174037c6f64-581fc.jpg loading=lazy data-key=applemusic-transfer data-hash=https://files.furffisite.link/blogimg/20240523203808-9f4a7d937672d53fbc1a7174037c6f64-581fc.jpg></div><div class=article-details><h2 class=article-title>Apple Music æ›²åº“è¿ç§»</h2></div></a></article><article class=has-image><a href=/p/read-papers/utsp/><div class=article-image><img src=https://files.furffisite.link/blogimg/20240312193735-df25ede3714c69d2ea8b42ba9c39f7c9-755f3.jpg loading=lazy data-key=read-papers/utsp data-hash=https://files.furffisite.link/blogimg/20240312193735-df25ede3714c69d2ea8b42ba9c39f7c9-755f3.jpg></div><div class=article-details><h2 class=article-title>ã€è¯»è®ºæ–‡ã€‘Unsupervised Learning for Solving the Travelling Salesman Problem</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo=Furffico/Furffico.github.io data-repo-id=R_kgDOIs6c3Q data-category=General data-category-id=DIC_kwDOIs6c3c4CTWXf data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=en crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"light":"dark_dimmed")}})()</script><footer class=site-footer><section class=copyright>&copy;
2022 -
2024 Furffiblog</section><section class=powerby>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º<br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.26.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>